/**
 * Copyright(c) 2016 SendBird, Inc.
 * SendBird Desk JavaScript SDK v1.0.12
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SendBirdDesk=e()}(this,function(){"use strict";function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function e(t){var n="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return c(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(n,r){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return n.apply(r,t)}}var l=Object.prototype.toString;function f(t){return"[object Array]"===l.call(t)}function p(t){return null!==t&&"object"==typeof t}function h(t){return"[object Function]"===l.call(t)}function y(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),f(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var g={isArray:f,isArrayBuffer:function(t){return"[object ArrayBuffer]"===l.call(t)},isBuffer:function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:p,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===l.call(t)},isFile:function(t){return"[object File]"===l.call(t)},isBlob:function(t){return"[object Blob]"===l.call(t)},isFunction:h,isStream:function(t){return p(t)&&h(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:y,merge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]=t}for(var e=0,o=arguments.length;e<o;e++)y(arguments[e],t);return r},deepMerge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]="object"==typeof t?n({},t):t}for(var e=0,o=arguments.length;e<o;e++)y(arguments[e],t);return r},extend:function(n,t,r){return y(t,function(t,e){n[e]=r&&"function"==typeof t?s(t,r):t}),n},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function v(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function m(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(g.isURLSearchParams(e))r=e.toString();else{var o=[];g.forEach(e,function(t,e){null!=t&&(g.isArray(t)?e+="[]":t=[t],g.forEach(t,function(t){g.isDate(t)?t=t.toISOString():g.isObject(t)&&(t=JSON.stringify(t)),o.push(v(e)+"="+v(t))}))}),r=o.join("&")}if(r){var i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}function t(){this.handlers=[]}t.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},t.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},t.prototype.forEach=function(e){g.forEach(this.handlers,function(t){null!==t&&e(t)})};function S(e,n,t){return g.forEach(t,function(t){e=t(e,n)}),e}function E(t){return!(!t||!t.__CANCEL__)}function b(n,r){g.forEach(n,function(t,e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=t,delete n[e])})}function R(t,e,n,r,o){return function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,n,r,o)}var k,I,O,T=t,w=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],D=g.isStandardBrowserEnv()?(I=/(msie|trident)/i.test(navigator.userAgent),O=document.createElement("a"),k=A(window.location.href),function(t){var e=g.isString(t)?A(t):t;return e.protocol===k.protocol&&e.host===k.host}):function(){return!0};function A(t){var e=t;return I&&(O.setAttribute("href",e),e=O.href),O.setAttribute("href",e),{href:O.href,protocol:O.protocol?O.protocol.replace(/:$/,""):"",host:O.host,search:O.search?O.search.replace(/^\?/,""):"",hash:O.hash?O.hash.replace(/^#/,""):"",hostname:O.hostname,port:O.port,pathname:"/"===O.pathname.charAt(0)?O.pathname:"/"+O.pathname}}function _(s){return new Promise(function(n,r){var o=s.data,i=s.headers;g.isFormData(o)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(s.auth){var t=s.auth.username||"",e=s.auth.password||"";i.Authorization="Basic "+btoa(t+":"+e)}if(a.open(s.method.toUpperCase(),m(s.url,s.params,s.paramsSerializer),!0),a.timeout=s.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in a?function(t){var e,n,r,o={};return t&&g.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=g.trim(t.substr(0,r)).toLowerCase(),n=g.trim(t.substr(r+1)),e){if(o[e]&&0<=w.indexOf(e))return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}}),o}(a.getAllResponseHeaders()):null,e={data:s.responseType&&"text"!==s.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:t,config:s,request:a};!function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(R("Request failed with status code "+n.status,n.config,null,n.request,n))}(n,r,e),a=null}},a.onabort=function(){a&&(r(R("Request aborted",s,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(R("Network Error",s,null,a)),a=null},a.ontimeout=function(){r(R("timeout of "+s.timeout+"ms exceeded",s,"ECONNABORTED",a)),a=null},g.isStandardBrowserEnv()){var c=N,u=(s.withCredentials||D(s.url))&&s.xsrfCookieName?c.read(s.xsrfCookieName):void 0;u&&(i[s.xsrfHeaderName]=u)}if("setRequestHeader"in a&&g.forEach(i,function(t,e){void 0===o&&"content-type"===e.toLowerCase()?delete i[e]:a.setRequestHeader(e,t)}),s.withCredentials&&(a.withCredentials=!0),s.responseType)try{a.responseType=s.responseType}catch(t){if("json"!==s.responseType)throw t}"function"==typeof s.onDownloadProgress&&a.addEventListener("progress",s.onDownloadProgress),"function"==typeof s.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(t){a&&(a.abort(),r(t),a=null)}),void 0===o&&(o=null),a.send(o)})}var N=g.isStandardBrowserEnv()?{write:function(t,e,n,r,o,i){var a=[];a.push(t+"="+encodeURIComponent(e)),g.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),g.isString(r)&&a.push("path="+r),g.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},C={"Content-Type":"application/x-www-form-urlencoded"};function x(t,e){!g.isUndefined(t)&&g.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var P,j={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?P=_:"undefined"!=typeof XMLHttpRequest&&(P=_),P),transformRequest:[function(t,e){return b(e,"Accept"),b(e,"Content-Type"),g.isFormData(t)||g.isArrayBuffer(t)||g.isBuffer(t)||g.isStream(t)||g.isFile(t)||g.isBlob(t)?t:g.isArrayBufferView(t)?t.buffer:g.isURLSearchParams(t)?(x(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):g.isObject(t)?(x(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300}};j.headers={common:{Accept:"application/json, text/plain, */*"}},g.forEach(["delete","get","head"],function(t){j.headers[t]={}}),g.forEach(["post","put","patch"],function(t){j.headers[t]=g.merge(C)});var F=j;function U(t){t.cancelToken&&t.cancelToken.throwIfRequested()}function L(e){return U(e),e.baseURL&&!function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}(e.url)&&(e.url=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(e.baseURL,e.url)),e.headers=e.headers||{},e.data=S(e.data,e.headers,e.transformRequest),e.headers=g.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),g.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||F.adapter)(e).then(function(t){return U(e),t.data=S(t.data,t.headers,e.transformResponse),t},function(t){return E(t)||(U(e),t&&t.response&&(t.response.data=S(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}function M(e,n){n=n||{};var r={};return g.forEach(["url","method","params","data"],function(t){void 0!==n[t]&&(r[t]=n[t])}),g.forEach(["headers","auth","proxy"],function(t){g.isObject(n[t])?r[t]=g.deepMerge(e[t],n[t]):void 0!==n[t]?r[t]=n[t]:g.isObject(e[t])?r[t]=g.deepMerge(e[t]):void 0!==e[t]&&(r[t]=e[t])}),g.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])}),r}function B(t){this.defaults=t,this.interceptors={request:new T,response:new T}}B.prototype.request=function(t,e){"string"==typeof t?(t=e||{}).url=arguments[0]:t=t||{},(t=M(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var n=[L,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){n.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){n.push(t.fulfilled,t.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},B.prototype.getUri=function(t){return t=M(this.defaults,t),m(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},g.forEach(["delete","get","head","options"],function(n){B.prototype[n]=function(t,e){return this.request(g.merge(e||{},{method:n,url:t}))}}),g.forEach(["post","put","patch"],function(r){B.prototype[r]=function(t,e,n){return this.request(g.merge(n||{},{method:r,url:t,data:e}))}});var G=B;function K(t){this.message=t}K.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},K.prototype.__CANCEL__=!0;var z=K;function H(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new z(t),e(n.reason))})}H.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},H.source=function(){var e;return{token:new H(function(t){e=t}),cancel:e}};var V=H;function q(t){var e=new G(t),n=s(G.prototype.request,e);return g.extend(n,G.prototype,e),g.extend(n,e),n}var J=q(F);J.Axios=G,J.create=function(t){return q(M(J.defaults,t))},J.Cancel=z,J.CancelToken=V,J.isCancel=E,J.all=function(t){return Promise.all(t)},J.spread=function(e){return function(t){return e.apply(null,t)}};var Q=J,W=J;Q.default=W;function X(t){try{return!!t()}catch(t){return!0}}function Y(t){return et.call(t).slice(8,-1)}function $(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Z(t){return rt($(t))}var tt=Q,et={}.toString,nt="".split,rt=X(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==Y(t)?nt.call(t,""):Object(t)}:Object,ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function it(t,e){return t(e={exports:{}},e.exports),e.exports}function at(t){return t&&t.Math==Math&&t}function ct(t){return"object"==typeof t?null!==t:"function"==typeof t}function ut(t){return Dt?wt.createElement(t):{}}function st(t){if(!ct(t))throw TypeError(String(t)+" is not an object");return t}function lt(t,e){if(!ct(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!ct(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!ct(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!ct(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function ft(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function pt(e,n){try{Ct(Ot,e,n)}catch(t){Ot[e]=n}return n}function dt(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Pt+jt).toString(36)}function ht(t){return Lt[t]||(Lt[t]=Ft&&Ut[t]||(Ft?Ut:dt)("Symbol."+t))}function yt(t,e){return Mt.call(t,e)}function gt(t){return isNaN(t=+t)?0:(0<t?Gt:Bt)(t)}function vt(t){return 0<t?Kt(gt(t),9007199254740991):0}function mt(c){return function(t,e,n){var r,o=Z(t),i=vt(o.length),a=function(t,e){var n=gt(t);return n<0?zt(n+e,0):Ht(n,e)}(n,i);if(c&&e!=e){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((c||a in o)&&o[a]===e)return c||a||0;return!c&&-1}}function St(t,e){var n,r=Z(t),o=0,i=[];for(n in r)!yt(qt,n)&&yt(r,n)&&i.push(n);for(;e.length>o;)yt(r,n=e[o++])&&(~Jt(i,n)||i.push(n));return i}function Et(t){return"function"==typeof t?t:void 0}function bt(t,e){return arguments.length<2?Et(Yt[t])||Et(Ot[t]):Yt[t]&&Yt[t][e]||Ot[t]&&Ot[t][e]}function Rt(t){return Zt[t]||(Zt[t]=dt(t))}function kt(){}var It="object",Ot=at(typeof globalThis==It&&globalThis)||at(typeof window==It&&window)||at(typeof self==It&&self)||at(typeof ot==It&&ot)||Function("return this")(),Tt=!X(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),wt=Ot.document,Dt=ct(wt)&&ct(wt.createElement),At=!Tt&&!X(function(){return 7!=Object.defineProperty(ut("div"),"a",{get:function(){return 7}}).a}),_t=Object.defineProperty,Nt={f:Tt?_t:function(t,e,n){if(st(t),e=lt(e,!0),st(n),At)try{return _t(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ct=Tt?function(t,e,n){return Nt.f(t,e,ft(1,n))}:function(t,e,n){return t[e]=n,t},xt=it(function(t){var e="__core-js_shared__",n=Ot[e]||pt(e,{});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Pt=0,jt=Math.random(),Ft=!!Object.getOwnPropertySymbols&&!X(function(){return!String(Symbol())}),Ut=Ot.Symbol,Lt=xt("wks"),Mt={}.hasOwnProperty,Bt=Math.ceil,Gt=Math.floor,Kt=Math.min,zt=Math.max,Ht=Math.min,Vt={includes:mt(!0),indexOf:mt(!1)},qt={},Jt=Vt.indexOf,Qt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Wt=Object.keys||function(t){return St(t,Qt)},Xt=Tt?Object.defineProperties:function(t,e){st(t);for(var n,r=Wt(e),o=r.length,i=0;i<o;)Nt.f(t,n=r[i++],e[n]);return t},Yt=Ot,$t=bt("document","documentElement"),Zt=xt("keys"),te=Rt("IE_PROTO"),ee="prototype",ne=function(){var t,e=ut("iframe"),n=Qt.length,r="script";for(e.style.display="none",$t.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</"+r+">"),t.close(),ne=t.F;n--;)delete ne[ee][Qt[n]];return ne()},re=Object.create||function(t,e){var n;return null!==t?(kt[ee]=st(t),n=new kt,kt[ee]=null,n[te]=t):n=ne(),void 0===e?n:Xt(n,e)};qt[te]=!0;var oe=ht("unscopables"),ie=Array.prototype;null==ie[oe]&&Ct(ie,oe,re(null));function ae(t){ie[oe][t]=!0}var ce,ue,se,le={},fe=xt("native-function-to-string",Function.toString),pe=Ot.WeakMap,de="function"==typeof pe&&/native code/.test(fe.call(pe)),he=Ot.WeakMap;if(de){var ye=new he,ge=ye.get,ve=ye.has,me=ye.set;ce=function(t,e){return me.call(ye,t,e),e},ue=function(t){return ge.call(ye,t)||{}},se=function(t){return ve.call(ye,t)}}else{var Se=Rt("state");qt[Se]=!0,ce=function(t,e){return Ct(t,Se,e),e},ue=function(t){return yt(t,Se)?t[Se]:{}},se=function(t){return yt(t,Se)}}function Ee(t,e){for(var n=Ue(e),r=Nt.f,o=Ce.f,i=0;i<n.length;i++){var a=n[i];yt(t,a)||r(t,a,o(e,a))}}function be(t,e){var n=Be[Me(t)];return n==Ke||n!=Ge&&("function"==typeof e?X(e):!!e)}function Re(t,e){var n,r,o,i,a,c=t.target,u=t.global,s=t.stat;if(n=u?Ot:s?Ot[c]||pt(c,{}):(Ot[c]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=He(n,r))&&a.value:n[r],!ze(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ee(i,o)}(t.sham||o&&o.sham)&&Ct(i,"sham",!0),xe(n,r,i,t)}}function ke(t){return Object($(t))}var Ie,Oe,Te,we={set:ce,get:ue,has:se,enforce:function(t){return se(t)?ue(t):ce(t,{})},getterFor:function(n){return function(t){var e;if(!ct(t)||(e=ue(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},De={}.propertyIsEnumerable,Ae=Object.getOwnPropertyDescriptor,_e={f:Ae&&!De.call({1:2},1)?function(t){var e=Ae(this,t);return!!e&&e.enumerable}:De},Ne=Object.getOwnPropertyDescriptor,Ce={f:Tt?Ne:function(t,e){if(t=Z(t),e=lt(e,!0),At)try{return Ne(t,e)}catch(t){}if(yt(t,e))return ft(!_e.f.call(t,e),t[e])}},xe=it(function(t){var e=we.get,c=we.enforce,u=String(fe).split("toString");xt("inspectSource",function(t){return fe.call(t)}),(t.exports=function(t,e,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||yt(n,"name")||Ct(n,"name",e),c(n).source=u.join("string"==typeof e?e:"")),t!==Ot?(o?!a&&t[e]&&(i=!0):delete t[e],i?t[e]=n:Ct(t,e,n)):i?t[e]=n:pt(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||fe.call(this)})}),Pe=Qt.concat("length","prototype"),je={f:Object.getOwnPropertyNames||function(t){return St(t,Pe)}},Fe={f:Object.getOwnPropertySymbols},Ue=bt("Reflect","ownKeys")||function(t){var e=je.f(st(t)),n=Fe.f;return n?e.concat(n(t)):e},Le=/#|\.prototype\./,Me=be.normalize=function(t){return String(t).replace(Le,".").toLowerCase()},Be=be.data={},Ge=be.NATIVE="N",Ke=be.POLYFILL="P",ze=be,He=Ce.f,Ve=!X(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),qe=Rt("IE_PROTO"),Je=Object.prototype,Qe=Ve?Object.getPrototypeOf:function(t){return t=ke(t),yt(t,qe)?t[qe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Je:null},We=ht("iterator"),Xe=!1;[].keys&&("next"in(Te=[].keys())?(Oe=Qe(Qe(Te)))!==Object.prototype&&(Ie=Oe):Xe=!0),null==Ie&&(Ie={}),yt(Ie,We)||Ct(Ie,We,function(){return this});function Ye(t,e,n){t&&!yt(t=n?t:t.prototype,rn)&&nn(t,rn,{configurable:!0,value:e})}function $e(){return this}function Ze(){return this}function tn(t,e,n,r,o,i,a){function c(t){if(t===o&&y)return y;if(!un&&t in d)return d[t];switch(t){case"keys":case ln:case fn:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){var r=e+" Iterator";t.prototype=re(on,{next:ft(1,n)}),Ye(t,r,!1),le[r]=$e}(n,e,r);var u,s,l,f=e+" Iterator",p=!1,d=t.prototype,h=d[sn]||d["@@iterator"]||o&&d[o],y=!un&&h||c(o),g="Array"==e&&d.entries||h;if(g&&(u=Qe(g.call(new t)),cn!==Object.prototype&&u.next&&(Qe(u)!==cn&&(an?an(u,cn):"function"!=typeof u[sn]&&Ct(u,sn,Ze)),Ye(u,f,!0))),o==ln&&h&&h.name!==ln&&(p=!0,y=function(){return h.call(this)}),d[sn]!==y&&Ct(d,sn,y),le[e]=y,o)if(s={values:c(ln),keys:i?y:c("keys"),entries:c(fn)},a)for(l in s)!un&&!p&&l in d||xe(d,l,s[l]);else Re({target:e,proto:!0,forced:un||p},s);return s}var en={IteratorPrototype:Ie,BUGGY_SAFARI_ITERATORS:Xe},nn=Nt.f,rn=ht("toStringTag"),on=en.IteratorPrototype,an=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return st(t),function(t){if(!ct(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),cn=en.IteratorPrototype,un=en.BUGGY_SAFARI_ITERATORS,sn=ht("iterator"),ln="values",fn="entries",pn="Array Iterator",dn=we.set,hn=we.getterFor(pn),yn=tn(Array,"Array",function(t,e){dn(this,{type:pn,target:Z(t),index:0,kind:e})},function(){var t=hn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");le.Arguments=le.Array,ae("keys"),ae("values"),ae("entries");function gn(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),vn))?n:mn?Y(e):"Object"==(r=Y(e))&&"function"==typeof e.callee?"Arguments":r}var vn=ht("toStringTag"),mn="Arguments"==Y(function(){return arguments}()),Sn={};Sn[ht("toStringTag")]="z";var En="[object z]"!==String(Sn)?function(){return"[object "+gn(this)+"]"}:Sn.toString,bn=Object.prototype;En!==bn.toString&&xe(bn,"toString",En,{unsafe:!0});function Rn(c){return function(t,e){var n,r,o=String($(t)),i=gt(e),a=o.length;return i<0||a<=i?c?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===a||(r=o.charCodeAt(i+1))<56320||57343<r?c?o.charAt(i):n:c?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}}var kn={codeAt:Rn(!1),charAt:Rn(!0)},In=kn.charAt,On="String Iterator",Tn=we.set,wn=we.getterFor(On);tn(String,"String",function(t){Tn(this,{type:On,string:String(t),index:0})},function(){var t,e=wn(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=In(n,r),e.index+=t.length,{value:t,done:!1})});var Dn,An,_n=RegExp.prototype.exec,Nn=String.prototype.replace,Cn=_n,xn=(Dn=/a/,An=/b*/g,_n.call(Dn,"a"),_n.call(An,"a"),0!==Dn.lastIndex||0!==An.lastIndex),Pn=void 0!==/()??/.exec("")[1];(xn||Pn)&&(Cn=function(t){var e,n,r,o,i=this;return Pn&&(n=new RegExp("^"+i.source+"$(?!\\s)",function(){var t=st(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(i))),xn&&(e=i.lastIndex),r=_n.call(i,t),xn&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),Pn&&r&&1<r.length&&Nn.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});function jn(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Fn(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Y(t))throw TypeError("RegExp#exec called on incompatible receiver");return Un.call(t,e)}var Un=Cn,Ln=ht("species"),Mn=!X(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Bn=!X(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),Gn=ht("match"),Kn=ht("species"),zn=kn.charAt,Hn=[].push,Vn=Math.min,qn=4294967295,Jn=!X(function(){return!RegExp(qn,"y")});!function(n,t,e,r){var o=ht(n),i=!X(function(){var t={};return t[o]=function(){return 7},7!=""[n](t)}),a=i&&!X(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[Ln]=function(){return e}),e[o](""),!t});if(!i||!a||"replace"===n&&!Mn||"split"===n&&!Bn){var c=/./[o],u=e(o,""[n],function(t,e,n,r,o){return e.exec===Un?i&&!o?{done:!0,value:c.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),s=u[0],l=u[1];xe(String.prototype,n,s),xe(RegExp.prototype,o,2==t?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}),r&&Ct(RegExp.prototype[o],"sham",!0)}}("split",2,function(o,m,S){var E;return E="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=String($(this)),r=void 0===e?qn:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!function(t){var e;return ct(t)&&(void 0!==(e=t[Gn])?!!e:"RegExp"==Y(t))}(t))return m.call(n,t,r);for(var o,i,a,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=new RegExp(t.source,u+"g");(o=Un.call(l,n))&&!(s<(i=l.lastIndex)&&(c.push(n.slice(s,o.index)),1<o.length&&o.index<n.length&&Hn.apply(c,o.slice(1)),a=o[0].length,s=i,c.length>=r));)l.lastIndex===o.index&&l.lastIndex++;return s===n.length?!a&&l.test("")||c.push(""):c.push(n.slice(s)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:m.call(this,t,e)}:m,[function(t,e){var n=$(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):E.call(String(n),t,e)},function(t,e){var n=S(E,t,this,e,E!==m);if(n.done)return n.value;var r=st(t),o=String(this),i=function(t,e){var n,r=st(t).constructor;return void 0===r||null==(n=st(r)[Kn])?e:jn(n)}(r,RegExp),a=r.unicode,c=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Jn?"y":"g"),u=new i(Jn?r:"^(?:"+r.source+")",c),s=void 0===e?qn:e>>>0;if(0==s)return[];if(0===o.length)return null===Fn(u,o)?[o]:[];for(var l,f,p=0,d=0,h=[];d<o.length;){u.lastIndex=Jn?d:0;var y,g=Fn(u,Jn?o:o.slice(d));if(null===g||(y=Vn(vt(u.lastIndex+(Jn?0:d)),o.length))===p)l=o,d=(f=d)+(a?zn(l,f).length:1);else{if(h.push(o.slice(p,d)),h.length===s)return h;for(var v=1;v<=g.length-1;v++)if(h.push(g[v]),h.length===s)return h;d=p=y}}return h.push(o.slice(p)),h}]},!Jn);function Qn(t,e,n){for(var r in e)xe(t,r,e[r],n);return t}function Wn(r,o,t){if(jn(r),void 0===o)return r;switch(t){case 0:return function(){return r.call(o)};case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}function Xn(e,t,n,r){try{return r?t(st(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&st(o.call(e)),t}}function Yn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var $n=!X(function(){return Object.isExtensible(Object.preventExtensions({}))}),Zn=it(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++o,weakData:{}}})}var e=Nt.f,r=dt("meta"),o=0,i=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!ct(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!yt(t,r)){if(!i(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!yt(t,r)){if(!i(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return $n&&a.REQUIRED&&i(t)&&!yt(t,r)&&n(t),t}};qt[r]=!0}),tr=(Zn.REQUIRED,Zn.fastKey,Zn.getWeakData,Zn.onFreeze,ht("iterator")),er=Array.prototype,nr=ht("iterator"),rr=it(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,o){var i,a,c,u,s,l,f=Wn(e,n,r?2:1);if(o)i=t;else{if("function"!=typeof(a=function(t){if(null!=t)return t[nr]||t["@@iterator"]||le[gn(t)]}(t)))throw TypeError("Target is not iterable");if(function(t){return void 0!==t&&(le.Array===t||er[tr]===t)}(a)){for(c=0,u=vt(t.length);c<u;c++)if((s=r?f(st(l=t[c])[0],l[1]):f(t[c]))&&s instanceof p)return s;return new p(!1)}i=a.call(t)}for(;!(l=i.next()).done;)if((s=Xn(i,f,l.value,r))&&s instanceof p)return s;return new p(!1)}).stop=function(t){return new p(!0,t)}}),or=ht("iterator"),ir=!1;try{var ar=0,cr={next:function(){return{done:!!ar++}},return:function(){ir=!0}};cr[or]=function(){return this},Array.from(cr,function(){throw 2})}catch(t){}function ur(r,t,e,o,i){function n(t){var n=c[t];xe(c,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!ct(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!ct(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!ct(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var a=Ot[r],c=a&&a.prototype,u=a,s=o?"set":"add",l={};if(ze(r,"function"!=typeof a||!(i||c.forEach&&!X(function(){(new a).entries().next()}))))u=e.getConstructor(t,r,o,s),Zn.REQUIRED=!0;else if(ze(r,!0)){var f=new u,p=f[s](i?{}:-0,1)!=f,d=X(function(){f.has(1)}),h=function(t,e){if(!e&&!ir)return!1;var n=!1;try{var r={};r[or]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){new a(t)}),y=!i&&X(function(){for(var t=new a,e=5;e--;)t[s](e,e);return!t.has(-0)});h||(((u=t(function(t,e){Yn(t,u,r);var n=function(t,e,n){var r,o;return an&&"function"==typeof(r=e.constructor)&&r!==n&&ct(o=r.prototype)&&o!==n.prototype&&an(t,o),t}(new a,t,u);return null!=e&&rr(e,n[s],n,o),n})).prototype=c).constructor=u),(d||y)&&(n("delete"),n("has"),o&&n("get")),(y||p)&&n(s),i&&c.clear&&delete c.clear}return l[r]=u,Re({global:!0,forced:u!=a},l),Ye(u,r),i||e.setStrong(u,r,o),u}function sr(t,e){var n;return dr(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!dr(n.prototype)?ct(n)&&null===(n=n[hr])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function lr(d){var h=1==d,y=2==d,g=3==d,v=4==d,m=6==d,S=5==d||m;return function(t,e,n,r){for(var o,i,a=ke(t),c=rt(a),u=Wn(e,n,3),s=vt(c.length),l=0,f=r||sr,p=h?f(t,s):y?f(t,0):void 0;l<s;l++)if((S||l in c)&&(i=u(o=c[l],l,a),d))if(h)p[l]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return l;case 2:yr.call(p,o)}else if(v)return!1;return m?-1:g||v?v:p}}function fr(t){return t.frozen||(t.frozen=new kr)}function pr(t,e){return Er(t.entries,function(t){return t[0]===e})}var dr=Array.isArray||function(t){return"Array"==Y(t)},hr=ht("species"),yr=[].push,gr={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6)},vr=Zn.getWeakData,mr=we.set,Sr=we.getterFor,Er=gr.find,br=gr.findIndex,Rr=0,kr=function(){this.entries=[]};kr.prototype={get:function(t){var e=pr(this,t);if(e)return e[1]},has:function(t){return!!pr(this,t)},set:function(t,e){var n=pr(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(e){var t=br(this.entries,function(t){return t[0]===e});return~t&&this.entries.splice(t,1),!!~t}};var Ir={getConstructor:function(t,n,r,o){function i(t,e,n){var r=c(t),o=vr(st(e),!0);return!0===o?fr(r).set(e,n):o[r.id]=n,t}var a=t(function(t,e){Yn(t,a,n),mr(t,{type:n,id:Rr++,frozen:void 0}),null!=e&&rr(e,t[o],t,r)}),c=Sr(n);return Qn(a.prototype,{delete:function(t){var e=c(this);if(!ct(t))return!1;var n=vr(t);return!0===n?fr(e).delete(t):n&&yt(n,e.id)&&delete n[e.id]},has:function(t){var e=c(this);if(!ct(t))return!1;var n=vr(t);return!0===n?fr(e).has(t):n&&yt(n,e.id)}}),Qn(a.prototype,r?{get:function(t){var e=c(this);if(ct(t)){var n=vr(t);return!0===n?fr(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return i(this,t,e)}}:{add:function(t){return i(this,t,!0)}}),a}},Or=(it(function(t){function e(e){return function(t){return e(this,arguments.length?t:void 0)}}var r,o=we.enforce,n=!Ot.ActiveXObject&&"ActiveXObject"in Ot,i=Object.isExtensible,a=t.exports=ur("WeakMap",e,Ir,!0,!0);if(de&&n){r=Ir.getConstructor(e,"WeakMap",!0),Zn.REQUIRED=!0;var c=a.prototype,u=c.delete,s=c.has,l=c.get,f=c.set;Qn(c,{delete:function(t){if(!ct(t)||i(t))return u.call(this,t);var e=o(this);return e.frozen||(e.frozen=new r),u.call(this,t)||e.frozen.delete(t)},has:function(t){if(!ct(t)||i(t))return s.call(this,t);var e=o(this);return e.frozen||(e.frozen=new r),s.call(this,t)||e.frozen.has(t)},get:function(t){if(!ct(t)||i(t))return l.call(this,t);var e=o(this);return e.frozen||(e.frozen=new r),s.call(this,t)?l.call(this,t):e.frozen.get(t)},set:function(t,e){if(ct(t)&&!i(t)){var n=o(this);n.frozen||(n.frozen=new r),s.call(this,t)?f.call(this,t,e):n.frozen.set(t,e)}else f.call(this,t,e);return this}})}}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Tr=ht("iterator"),wr=ht("toStringTag"),Dr=yn.values;for(var Ar in Or){var _r=Ot[Ar],Nr=_r&&_r.prototype;if(Nr){if(Nr[Tr]!==Dr)try{Ct(Nr,Tr,Dr)}catch(t){Nr[Tr]=Dr}if(Nr[wr]||Ct(Nr,wr,Ar),Or[Ar])for(var Cr in yn)if(Nr[Cr]!==yn[Cr])try{Ct(Nr,Cr,yn[Cr])}catch(t){Nr[Cr]=yn[Cr]}}}var xr=function(){function t(){i(this,t)}return n(t,null,[{key:"write",value:function(){var t;Ur.isDebugMode&&(t=console).log.apply(t,arguments)}},{key:"error",value:function(){var t;Ur.isDebugMode&&(t=console).error.apply(t,arguments)}}]),t}(),Pr=new WeakMap,jr=null,Fr=null,Ur=function(){function o(){i(this,o)}return n(o,null,[{key:"setDebugMode",value:function(){Pr.set(this,!0)}},{key:"unsetDebugMode",value:function(){Pr.set(this,!1)}},{key:"getParamsFromCallback",value:function(t,e){return{result:t,err:e,reversed:!1}}},{key:"callback",value:function(t,e,n){if(n){var r=o.getParamsFromCallback(t,e);r.err&&xr.error(r.err),r.reversed?n(r.err,r.result):n(r.result,r.err)}}},{key:"isSendBirdSdkCompatible",value:function(t){var e="3.0.55".split("."),n=t.split(".");if(e.length!==n.length)return!1;for(var r in e)if(parseInt(e[r])>parseInt(n[r]))return!1;return!0}},{key:"sendBird",get:function(){return jr},set:function(t){jr=t}},{key:"isDebugMode",get:function(){return Pr.get(this)}},{key:"apiHost",get:function(){if(!Fr){var t=jr.getInstance();Fr="https://desk-api-".concat(t.getApplicationId(),".sendbird.com/sapi")}return Fr},set:function(t){Fr=t}},{key:"sdkVersion",get:function(){return"1.0.10"}},{key:"minSendBirdVersion",get:function(){return"3.0.55"}}]),o}(),Lr=Nt.f,Mr=Function.prototype,Br=Mr.toString,Gr=/^\s*function ([^ (]*)/;!Tt||"name"in Mr||Lr(Mr,"name",{configurable:!0,get:function(){try{return Br.call(this).match(Gr)[1]}catch(t){return""}}});function Kr(t,e,n){var r=lt(e);r in t?Nt.f(t,r,ft(0,n)):t[r]=n}function zr(e){return!X(function(){var t=[];return(t.constructor={})[Xr]=function(){return{foo:1}},1!==t[e](Boolean).foo})}function Hr(t){if(!ct(t))return!1;var e=t[Yr];return void 0!==e?!!e:dr(t)}var Vr={ERROR_SENDBIRD_SDK_MISSING:{code:100,message:"SendBird SDK is missing."},ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED:{code:101,message:"This SendBird SDK version is not supported."},ERROR_SENDBIRD_DESK_INIT_MISSING:{code:102,message:"SendBird Desk SDK is not initialized. It should be done before authentication."},ERROR_SENDBIRD_SDK_MESSAGE_LIST_FAILED:{code:200,message:"Cannot load messages in SDK client."},ERROR_INVALID_PARAMETER:{code:403,message:"Invalid parameter."},ERROR_DATA_NOT_FOUND:{code:404,message:"Data not found."},ERROR_REQUEST_TIMEOUT:{code:409,message:"Request timed-out."},ERROR_REQUEST:{code:500,message:"Request failed."},ERROR_REQUEST_CANCELED:{code:501,message:"Request canceled."}},qr=function(){function r(t,e){var n;return i(this,r),n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?u(t):e}(this,o(r).call(this,t)),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(u(n),n.constructor):n.stack=new Error(t).stack,n.name="SendBirdDeskError",n.message=t,n.code=e,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,e(Error)),n(r,null,[{key:"create",value:function(t){return t?new r(t.message,t.code):new Error("SendBirdDeskError type missing.")}},{key:"throw",value:function(t){if(t)throw new r(t.message,t.code)}},{key:"Type",get:function(){return Vr}}]),r}(),Jr=new Yt.WeakMap,Qr=function(){function t(){i(this,t)}return n(t,null,[{key:"connect",value:function(t,e,n){var r=this;"function"==typeof e&&(n=e,e="");var o=Ur.sendBird;if(o){var i=o.getInstance(),a="".concat(Ur.apiHost,"/customers/auth/"),c={sendbirdAccessToken:e||"","content-type":"application/json"},u={sendbirdAppId:i.getApplicationId(),sendbirdId:t};tt.create({headers:c}).post(a,u).then(function(t){Jr.set(r,{deskToken:t.data.token}),xr.write("[REQ] connection established"),Ur.callback(t,null,n)}).catch(function(t){Ur.callback(null,t,n)})}else Ur.callback(null,qr.create(qr.Type.ERROR_SENDBIRD_SDK_MISSING),n)}},{key:"header",get:function(){return{sendbirdDeskToken:Jr.get(this).deskToken,"content-type":"application/json","user-agent":"desk-js@".concat("1.0.10")}}},{key:"getParam",get:function(){var t=Ur.sendBird;if(t){var e=t.getInstance();return"sendbirdAppId=".concat(e.getApplicationId())}return""}},{key:"postParam",get:function(){var t=Ur.sendBird;return t?{sendbirdAppId:t.getInstance().getApplicationId()}:{}}}]),t}(),Wr=function(){function e(t){i(this,e),this.fetchFromJSON(t)}return n(e,[{key:"fetchFromJSON",value:function(t){this.userId=t?t.user:0,this.name=t?t.displayName:"",this.profileUrl=t?t.photoThumbnailUrl:""}}]),e}(),Xr=ht("species"),Yr=ht("isConcatSpreadable"),$r=9007199254740991,Zr="Maximum allowed index exceeded",to=!X(function(){var t=[];return t[Yr]=!1,t.concat()[0]!==t}),eo=zr("concat");Re({target:"Array",proto:!0,forced:!to||!eo},{concat:function(t){var e,n,r,o,i,a=ke(this),c=sr(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(Hr(i=-1===e?a:arguments[e])){if(o=vt(i.length),$r<u+o)throw TypeError(Zr);for(n=0;n<o;n++,u++)n in i&&Kr(c,u,i[n])}else{if($r<=u)throw TypeError(Zr);Kr(c,u++,i)}return c.length=u,c}});var no,ro,oo=[].join,io=rt!=Object,ao=(no=",",!(ro=[]["join"])||!X(function(){ro.call(null,no||function(){throw 1},1)}));Re({target:"Array",proto:!0,forced:io||ao},{join:function(t){return oo.call(Z(this),void 0===t?",":t)}});var co=gr.map;Re({target:"Array",proto:!0,forced:!zr("map")},{map:function(t,e){return co(this,t,1<arguments.length?e:void 0)}});var uo=X(function(){Wt(1)});Re({target:"Object",stat:!0,forced:uo},{keys:function(t){return Wt(ke(t))}});function so(t,e){var n=Ur.sendBird;if(n){var r=n.getInstance().GroupChannel.createMyGroupChannelListQuery();r.customTypesFilter=[po],r.channelUrlsFilter=t,r.includeEmpty=!0,r.next(e)}else Ur.callback(null,qr.create(qr.Type.ERROR_SENDBIRD_SDK_MISSING),e)}function lo(e,i){var a=yo.Status.OPEN;yo.isStatus(e.status)&&(a=e.status);var t=a!==yo.Status.CLOSED?"status=ASSIGNED&status=UNASSIGNED":"status=CLOSED",n="".concat(Ur.apiHost,"/tickets/")+"?".concat(Qr.getParam,"&limit=").concat(e.limit||yo.defaultLimit,"&offset=").concat(e.offset||0)+"&".concat(t,"&order=").concat(e.order||"-updated_at");e.channelUrl&&(n+="&channelUrl=".concat(e.channelUrl)),e.customFieldFilter&&"object"===d(e.customFieldFilter)&&(n+="&customFields="+encodeURIComponent(Object.keys(e.customFieldFilter).map(function(t){return"".concat(t,":").concat(encodeURIComponent(e.customFieldFilter[t]))}).join(","))),tt.create({headers:Qr.header}).get(n).then(function(t){if(t&&t.data){var o=[],e=[];for(var n in t.data.results){var r=new yo(t.data.results[n]);ho[r.channelUrl]=r,e.push(r.channelUrl),o.push(r)}so(e,function(t,e){var n=Ur.getParamsFromCallback(t,e),r=n.result;n.err||o.forEach(function(t){for(var e in r){var n=r[e];if(t.channelUrl===n.url){t.channel=n;break}}}),xr.write("[REQ] ".concat(a," ticket list:"),o),Ur.callback(o,n.err,i)})}else Ur.callback([],null,i)}).catch(function(t){return Ur.callback(null,t,i)})}var fo=function(){function t(){i(this,t)}return n(t,null,[{key:"CustomType",get:function(){return{RICH_MESSAGE:"SENDBIRD_DESK_RICH_MESSAGE",ADMIN_MESSAGE:"SENDBIRD_DESK_ADMIN_MESSAGE_CUSTOM_TYPE"}}},{key:"DataType",get:function(){return{TICKET_INQUIRE_CLOSURE:"SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE",TICKET_ASSIGN:"TICKET_ASSIGN",TICKET_TRANSFER:"TICKET_TRANSFER",TICKET_CLOSE:"TICKET_CLOSE",TICKET_FEEDBACK:"SENDBIRD_DESK_CUSTOMER_SATISFACTION",URL_PREVIEW:"SENDBIRD_DESK_URL_PREVIEW"}}},{key:"ClosureState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED",DECLINED:"DECLINED"}}},{key:"FeedbackState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED"}}},{key:"UrlRegExp",get:function(){return/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?/gi}}]),t}(),po="SENDBIRD_DESK_CHANNEL_CUSTOM_TYPE",ho={},yo=function(){function p(t){i(this,p),this.fetchFromJSON(t)}return n(p,[{key:"fetchFromJSON",value:function(t){if(this.id=t?t.id:0,this.title=t?t.channelName:"",this.status=t?t.status:"",this.info=t&&t.info?JSON.parse(t.info):null,this.priority=t?t.priority:p.Priority.MEDIUM,this.agent=t&&t.recentAssignment&&t.recentAssignment.agent?new Wr(t.recentAssignment.agent):null,this.customer=t?t.customer:null,this.customFields={},this.channel=this.channel,this.channelUrl=t?t.channelUrl:null,this.updatedAt=t?new Date(t.updatedAt).getTime():(new Date).getTime(),t&&t.customFields)for(var e=t.customFields,n=0;n<e.length;n++){var r=e[n].key,o=e[n].value;this.customFields[r]=o}}},{key:"refresh",value:function(r){var o=this,t="".concat(Ur.apiHost,"/tickets/").concat(this.id,"/?").concat(Qr.getParam);tt.create({headers:Qr.header}).get(t).then(function(t){o.fetchFromJSON(t),so([o.channelUrl],function(t,e){var n=Ur.getParamsFromCallback(t,e).result;0<n.length&&(o.channel=n[0]),ho[o.channelUrl]=o,xr.write("[REQ] ticket refresh:",o),Ur.callback(o,null,r)})}).catch(function(t){return Ur.callback(null,t,r)})}},{key:"reopen",value:function(r){var o=this,t="".concat(Ur.apiHost,"/tickets/").concat(this.id,"/reopen"),e=Qr.postParam;tt.create({headers:Qr.header}).patch(t,e).then(function(t){t.data.channelUrl?(o.fetchFromJSON(t),so([o.channelUrl],function(t,e){var n=Ur.getParamsFromCallback(t,e).result;0<n.length&&(o.channel=n[0]),ho[o.channelUrl]=o,xr.write("[REQ] ticket reopen:",o),Ur.callback(o,null,r)})):Ur.callback(o,null,r)}).catch(function(t){return Ur.callback(null,t,r)})}},{key:"setPriority",value:function(t,e){var n=this;if(Object.keys(p.Priority).map(function(t){return p.Priority[t]}).indexOf(t)<0)Ur.callback(null,qr.create(qr.Type.ERROR_INVALID_PARAMETER),e);else{var r="".concat(Ur.apiHost,"/tickets/").concat(this.id,"/"),o=Qr.postParam;o.priority=t,tt.create({headers:Qr.header}).patch(r,o).then(function(t){n.fetchFromJSON(t.data),Ur.callback(n,null,e)}).catch(function(t){Ur.callback(null,t,e)})}}},{key:"setCustomFields",value:function(t,e){var n=this;if("object"!==d(t)||null===t||Array.isArray(t))Ur.callback(null,qr.create(qr.Type.ERROR_INVALID_PARAMETER),e);else{var r={};for(var o in t)r[o]="string"==typeof t[o]?t[o]:JSON.stringify(t[o]);var i="".concat(Ur.apiHost,"/tickets/").concat(this.id,"/custom_fields/"),a=Qr.postParam;a.customFields=JSON.stringify(r),tt.create({headers:Qr.header}).patch(i,a).then(function(t){n.fetchFromJSON(t.data),Ur.callback(n,null,e)}).catch(function(t){Ur.callback(null,t,e)})}}}],[{key:"isStatus",value:function(t){for(var e in p.Status)if(p.Status[e]===t)return!0;return!1}},{key:"isPriority",value:function(t){for(var e in p.Priority)if(p.Priority[e]===t)return!0;return!1}},{key:"isDeskCustomType",value:function(t){return t===po}},{key:"clearCache",value:function(t){t?(delete ho[t],xr.write("[SYS] cached ticket for ".concat(t," cleared"))):(ho={},xr.write("[SYS] all cached ticket cleared"))}},{key:"create",value:function(t,e,n,r,o,i){var a=Ur.sendBird;if(a){if("function"==typeof n&&(i=n,o=r=n=null),"function"==typeof r&&(i=r,o=r=null),"function"==typeof o&&(i=o,o=null),"string"!=typeof t||"string"!=typeof e||n&&"string"!=typeof n||r&&"object"!==d(r)||o&&!p.isPriority(o)||Array.isArray(r))return void Ur.callback(null,qr.create(qr.Type.ERROR_INVALID_PARAMETER),i);var c=a.getInstance(),u="".concat(Ur.apiHost,"/tickets/"),s=Qr.postParam;if(s.channelName=t,s.channelType="SENDBIRD_JAVASCRIPT",n&&(s.groupKey=n),r){var l={};for(var f in r)l[f]="string"==typeof r[f]?r[f]:JSON.stringify(r[f]);s.customFields=JSON.stringify(l)}o&&(s.priority=o),s.info=JSON.stringify({ticket:{subject:t,requester:{name:e,email:c.getCurrentUserId()}}}),tt.create({headers:Qr.header}).post(u,s).then(function(t){var r=new p(t.data);so([r.channelUrl],function(t,e){var n=Ur.getParamsFromCallback(t,e).result;0<n.length&&(r.channel=n[0]),ho[r.channelUrl]=r,xr.write("[REQ] ticket create:",r),Ur.callback(r,null,i)})}).catch(function(t){return Ur.callback(null,t,i)})}else Ur.callback(null,qr.create(qr.Type.ERROR_SENDBIRD_SDK_MISSING),i)}},{key:"getOpenCount",value:function(e){var t="".concat(Ur.apiHost,"/tickets/count/?").concat(Qr.getParam);tt.create({headers:Qr.header}).get(t).then(function(t){return Ur.callback(t,null,e)}).catch(function(t){return Ur.callback(null,t,e)})}},{key:"getByChannelUrl",value:function(o,i){if(ho[o])Ur.callback(ho[o],null,i);else{var t="".concat(Ur.apiHost,"/tickets/?").concat(Qr.getParam,"&limit=10&channelUrl=").concat(o);tt.create({headers:Qr.header}).get(t).then(function(t){var r=null;t&&t.data&&0<t.data.results.length&&(r=new p(t.data.results[0])),r?so([o],function(t,e){var n=Ur.getParamsFromCallback(t,e).result;0<n.length&&(r.channel=n[0]),ho[o]=r,xr.write("[REQ] get ticket for channel ".concat(o,":"),r),Ur.callback(r,null,i)}):Ur.callback(null,qr.Type.ERROR_DATA_NOT_FOUND,i)}).catch(function(t){return Ur.callback(null,t,i)})}}},{key:"getOpenedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),lo({offset:t,customFieldFilter:e,status:this.Status.OPEN},n)}},{key:"getClosedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),lo({offset:t,customFieldFilter:e,status:this.Status.CLOSED},n)}},{key:"getUrlPreview",value:function(t,e){var n="".concat(Ur.apiHost,"/tickets/url_preview/"),r=Qr.postParam;r.url=t,tt.create({headers:Qr.header}).post(n,r).then(function(t){return Ur.callback(t,null,e)}).catch(function(t){return Ur.callback(null,t,e)})}},{key:"confirmEndOfChat",value:function(i,a,c){"string"==typeof a&&-1<["yes","no"].indexOf(a)?p.getByChannelUrl(i.channelUrl,function(t,e){var n=Ur.getParamsFromCallback(t,e).result,r="".concat(Ur.apiHost,"/tickets/").concat(n.id,"/edit_message/"),o=Qr.postParam;o.messageId=i.messageId,o.messageData=JSON.stringify({type:fo.DataType.TICKET_INQUIRE_CLOSURE,body:{state:"yes"===a?fo.ClosureState.CONFIRMED:fo.ClosureState.DECLINED,ticketId:n.id}}),tt.create({headers:Qr.header}).patch(r,o).then(function(t){xr.write("[REQ] confirmed end of chat:",n),Ur.callback(t,null,c)}).catch(function(t){return Ur.callback(null,t,c)})}):Ur.callback(null,qr.create(qr.Type.ERROR_INVALID_PARAMETER))}},{key:"submitFeedback",value:function(i,a,t,e){var c=2<arguments.length&&void 0!==t?t:"",u=3<arguments.length?e:void 0;i&&0<i.messageId&&i.channelUrl&&"number"==typeof a&&1<=a&&a<=5&&"string"==typeof c?p.getByChannelUrl(i.channelUrl,function(t,e){var n=Ur.getParamsFromCallback(t,e).result,r="".concat(Ur.apiHost,"/tickets/").concat(n.id,"/edit_message/"),o=Qr.postParam;o.messageId=i.messageId,o.messageData=JSON.stringify({type:fo.DataType.TICKET_FEEDBACK,body:{state:fo.FeedbackState.CONFIRMED,customerSatisfactionScore:a,customerSatisfactionComment:c,ticketId:n.id}}),tt.create({headers:Qr.header}).patch(r,o).then(function(t){xr.write("[REQ] customer feedback:",n),Ur.callback(t,null,u)}).catch(function(t){return Ur.callback(null,t,u)})}):Ur.callback(null,qr.create(qr.Type.ERROR_INVALID_PARAMETER))}},{key:"Status",get:function(){return{INITIALIZED:"INITIALIZED",PROACTIVE:"PROACTIVE",UNASSIGNED:"UNASSIGNED",ASSIGNED:"ASSIGNED",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"Priority",get:function(){return{URGENT:"URGENT",HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW"}}},{key:"defaultLimit",get:function(){return 10}}]),p}(),go=!1;return function(){function t(){i(this,t)}return n(t,null,[{key:"init",value:function(t){try{t||(window&&window.SendBird&&(t=window.SendBird),global&&global.SendBird&&(t=global.SendBird)),t&&t.version?(Ur.sendBird=t,Ur.isSendBirdSdkCompatible(t.version)?go=!0:qr.throw(qr.Type.ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED)):qr.throw(qr.Type.ERROR_SENDBIRD_SDK_MISSING)}catch(t){qr.throw(qr.Type.ERROR_SENDBIRD_SDK_MISSING)}}},{key:"authenticate",value:function(t,e,n){go?Qr.connect(t,e,n):qr.throw(qr.Type.ERROR_SENDBIRD_DESK_INIT_MISSING)}},{key:"isDeskChannel",value:function(t){return yo.isDeskCustomType(t.customType)}},{key:"setApiHost",value:function(t){Ur.apiHost=t}},{key:"setDebugMode",value:function(){Ur.setDebugMode()}},{key:"setCustomerCustomFields",value:function(t,o){if("object"!==d(t)||null===t||Array.isArray(t))Ur.callback(null,qr.create(qr.Type.ERROR_INVALID_PARAMETER),o);else{var e={};for(var n in t)e[n]="string"==typeof t[n]?t[n]:JSON.stringify(t[n]);var r="".concat(Ur.apiHost,"/customers/custom_fields/"),i=Qr.postParam;i.customFields=JSON.stringify(e),tt.create({headers:Qr.header}).patch(r,i).then(function(t){var e={};for(var n in t.data.customFields){var r=t.data.customFields[n];e[r.key]=r.value}Ur.callback(e,null,o)}).catch(function(t){Ur.callback(null,t,o)})}}},{key:"version",get:function(){return Ur.sdkVersion}},{key:"Error",get:function(){return qr}},{key:"Agent",get:function(){return Wr}},{key:"Ticket",get:function(){return yo}},{key:"Message",get:function(){return fo}},{key:"UrlRegExp",get:function(){return fo.UrlRegExp}}]),t}()});