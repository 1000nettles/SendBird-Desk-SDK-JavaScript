/**
 * Copyright(c) 2016 SendBird, Inc.
 * SendBird Desk JavaScript SDK v1.0.18
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SendBirdDesk=e()}(this,function(){"use strict";function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function u(t,e,n){return(u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&a(r,n.prototype),r}).apply(null,arguments)}function e(t){var r="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return u(t,arguments,o(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t(n){var r=c();return function(){var t,e=o(n);return t=r?(t=o(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?s(e):t}}function l(n,r){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return n.apply(r,t)}}var f=Object.prototype.toString;function p(t){return"[object Array]"===f.call(t)}function d(t){return void 0===t}function y(t){return null!==t&&"object"==typeof t}function g(t){return"[object Function]"===f.call(t)}function m(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),p(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var v={isArray:p,isArrayBuffer:function(t){return"[object ArrayBuffer]"===f.call(t)},isBuffer:function(t){return null!==t&&!d(t)&&null!==t.constructor&&!d(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:y,isUndefined:d,isDate:function(t){return"[object Date]"===f.call(t)},isFile:function(t){return"[object File]"===f.call(t)},isBlob:function(t){return"[object Blob]"===f.call(t)},isFunction:g,isStream:function(t){return y(t)&&g(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:m,merge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]=t}for(var e=0,o=arguments.length;e<o;e++)m(arguments[e],t);return r},deepMerge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]="object"==typeof t?n({},t):t}for(var e=0,o=arguments.length;e<o;e++)m(arguments[e],t);return r},extend:function(n,t,r){return m(t,function(t,e){n[e]=r&&"function"==typeof t?l(t,r):t}),n},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function E(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function S(t,e,n){return e&&(n=n?n(e):v.isURLSearchParams(e)?e.toString():(r=[],v.forEach(e,function(t,e){null!=t&&(v.isArray(t)?e+="[]":t=[t],v.forEach(t,function(t){v.isDate(t)?t=t.toISOString():v.isObject(t)&&(t=JSON.stringify(t)),r.push(E(e)+"="+E(t))}))}),r.join("&")))&&(-1!==(e=t.indexOf("#"))&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+n),t;var r}function b(){this.handlers=[]}b.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},b.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},b.prototype.forEach=function(e){v.forEach(this.handlers,function(t){null!==t&&e(t)})};function R(e,n,t){return v.forEach(t,function(t){e=t(e,n)}),e}function k(t){return!(!t||!t.__CANCEL__)}function I(n,r){v.forEach(n,function(t,e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=t,delete n[e])})}function O(t,e,n,r,o){return t=new Error(t),e=e,n=n,r=r,o=o,(t=t).config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}var T,A,w,D=b,_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],N=v.isStandardBrowserEnv()?(A=/(msie|trident)/i.test(navigator.userAgent),w=document.createElement("a"),T=C(window.location.href),function(t){t=v.isString(t)?C(t):t;return t.protocol===T.protocol&&t.host===T.host}):function(){return!0};function C(t){return A&&(w.setAttribute("href",t),t=w.href),w.setAttribute("href",t),{href:w.href,protocol:w.protocol?w.protocol.replace(/:$/,""):"",host:w.host,search:w.search?w.search.replace(/^\?/,""):"",hash:w.hash?w.hash.replace(/^#/,""):"",hostname:w.hostname,port:w.port,pathname:"/"===w.pathname.charAt(0)?w.pathname:"/"+w.pathname}}function x(l){return new Promise(function(c,u){var n=l.data,r=l.headers;v.isFormData(n)&&delete r["Content-Type"];var s=new XMLHttpRequest;l.auth&&(t=l.auth.username||"",o=l.auth.password||"",r.Authorization="Basic "+btoa(t+":"+o));var t,e,o,e=(t=l.baseURL,o=l.url,t&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(o)?(e=t,(t=o)?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e):o);if(s.open(l.method.toUpperCase(),S(e,l.params,l.paramsSerializer),!0),s.timeout=l.timeout,s.onreadystatechange=function(){var e,n,r,t,o,i,a;s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&(i="getAllResponseHeaders"in s?(o=s.getAllResponseHeaders(),r={},o&&v.forEach(o.split("\n"),function(t){n=t.indexOf(":"),e=v.trim(t.substr(0,n)).toLowerCase(),n=v.trim(t.substr(n+1)),e&&(r[e]&&0<=_.indexOf(e)||(r[e]="set-cookie"===e?(r[e]||[]).concat([n]):r[e]?r[e]+", "+n:n))}),r):null,a={data:l.responseType&&"text"!==l.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:i,config:l,request:s},t=c,o=u,!(a=(i=a).config.validateStatus)||a(i.status)?t(i):o(O("Request failed with status code "+i.status,i.config,null,i.request,i)),s=null)},s.onabort=function(){s&&(u(O("Request aborted",l,"ECONNABORTED",s)),s=null)},s.onerror=function(){u(O("Network Error",l,null,s)),s=null},s.ontimeout=function(){var t="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),u(O(t,l,"ECONNABORTED",s)),s=null},v.isStandardBrowserEnv()&&(o=P,(o=(l.withCredentials||N(e))&&l.xsrfCookieName?o.read(l.xsrfCookieName):void 0)&&(r[l.xsrfHeaderName]=o)),"setRequestHeader"in s&&v.forEach(r,function(t,e){void 0===n&&"content-type"===e.toLowerCase()?delete r[e]:s.setRequestHeader(e,t)}),v.isUndefined(l.withCredentials)||(s.withCredentials=!!l.withCredentials),l.responseType)try{s.responseType=l.responseType}catch(t){if("json"!==l.responseType)throw t}"function"==typeof l.onDownloadProgress&&s.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(t){s&&(s.abort(),u(t),s=null)}),void 0===n&&(n=null),s.send(n)})}var P=v.isStandardBrowserEnv()?{write:function(t,e,n,r,o,i){var a=[];a.push(t+"="+encodeURIComponent(e)),v.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),v.isString(r)&&a.push("path="+r),v.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){t=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},j={"Content-Type":"application/x-www-form-urlencoded"};function U(t,e){!v.isUndefined(t)&&v.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var F,L={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(F=x),F),transformRequest:[function(t,e){return I(e,"Accept"),I(e,"Content-Type"),v.isFormData(t)||v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t)?t:v.isArrayBufferView(t)?t.buffer:v.isURLSearchParams(t)?(U(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):v.isObject(t)?(U(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};v.forEach(["delete","get","head"],function(t){L.headers[t]={}}),v.forEach(["post","put","patch"],function(t){L.headers[t]=v.merge(j)});var M=L;function B(t){t.cancelToken&&t.cancelToken.throwIfRequested()}function G(e){return B(e),e.headers=e.headers||{},e.data=R(e.data,e.headers,e.transformRequest),e.headers=v.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),v.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||M.adapter)(e).then(function(t){return B(e),t.data=R(t.data,t.headers,e.transformResponse),t},function(t){return k(t)||(B(e),t&&t.response&&(t.response.data=R(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}function K(e,n){n=n||{};var r={},t=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];v.forEach(t,function(t){void 0!==n[t]&&(r[t]=n[t])}),v.forEach(o,function(t){v.isObject(n[t])?r[t]=v.deepMerge(e[t],n[t]):void 0!==n[t]?r[t]=n[t]:v.isObject(e[t])?r[t]=v.deepMerge(e[t]):void 0!==e[t]&&(r[t]=e[t])}),v.forEach(i,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])});var a=t.concat(o).concat(i),i=Object.keys(n).filter(function(t){return-1===a.indexOf(t)});return v.forEach(i,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])}),r}function H(t){this.defaults=t,this.interceptors={request:new D,response:new D}}H.prototype.request=function(t,e){"string"==typeof t?(t=e||{}).url=arguments[0]:t=t||{},(t=K(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=[G,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){n.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){n.push(t.fulfilled,t.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},H.prototype.getUri=function(t){return t=K(this.defaults,t),S(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},v.forEach(["delete","get","head","options"],function(n){H.prototype[n]=function(t,e){return this.request(v.merge(e||{},{method:n,url:t}))}}),v.forEach(["post","put","patch"],function(r){H.prototype[r]=function(t,e,n){return this.request(v.merge(n||{},{method:r,url:t,data:e}))}});var z=H;function V(t){this.message=t}V.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},V.prototype.__CANCEL__=!0;var q=V;function J(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new q(t),e(n.reason))})}J.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},J.source=function(){var e;return{token:new J(function(t){e=t}),cancel:e}};var Q=J;function W(t){var e=new z(t),t=l(z.prototype.request,e);return v.extend(t,z.prototype,e),v.extend(t,e),t}var $=W(M);$.Axios=z,$.create=function(t){return W(K($.defaults,t))},$.Cancel=q,$.CancelToken=Q,$.isCancel=k,$.all=function(t){return Promise.all(t)},$.spread=function(e){return function(t){return e.apply(null,t)}};var X=$;X.default=$;function Y(t){try{return!!t()}catch(t){return!0}}function Z(t){return rt.call(t).slice(8,-1)}function tt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function et(t){return it(tt(t))}var nt=X,rt={}.toString,ot="".split,it=Y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==Z(t)?ot.call(t,""):Object(t)}:Object,at="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ct(t,e){return t(e={exports:{}},e.exports),e.exports}function ut(t){return"object"==typeof t?null!==t:"function"==typeof t}function st(t){return wt?At.createElement(t):{}}function lt(t){if(!ut(t))throw TypeError(String(t)+" is not an object");return t}function ft(t,e){if(!ut(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!ut(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!ut(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!ut(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function pt(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function dt(e,n){try{Ct(Ot,e,n)}catch(t){Ot[e]=n}return n}function ht(t,e){return Ut.call(t,e)}function yt(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Ft+Lt).toString(36)}function gt(t){return ht(Bt,t)||(Mt&&ht(Gt,t)?Bt[t]=Gt[t]:Bt[t]=Kt("Symbol."+t)),Bt[t]}function mt(t){return isNaN(t=+t)?0:(0<t?zt:Ht)(t)}function vt(t){return 0<t?Vt(mt(t),9007199254740991):0}function Et(t,e){var n,r=et(t),o=0,i=[];for(n in r)!ht(Qt,n)&&ht(r,n)&&i.push(n);for(;e.length>o;)ht(r,n=e[o++])&&(~Wt(i,n)||i.push(n));return i}function St(t){return"function"==typeof t?t:void 0}function bt(){}function Rt(t){return"<script>"+t+"</"+re+">"}var kt,It=function(t){return t&&t.Math==Math&&t},Ot=It("object"==typeof globalThis&&globalThis)||It("object"==typeof window&&window)||It("object"==typeof self&&self)||It("object"==typeof at&&at)||function(){return this}()||Function("return this")(),Tt=!Y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),At=Ot.document,wt=ut(At)&&ut(At.createElement),Dt=!Tt&&!Y(function(){return 7!=Object.defineProperty(st("div"),"a",{get:function(){return 7}}).a}),_t=Object.defineProperty,Nt={f:Tt?_t:function(t,e,n){if(lt(t),e=ft(e,!0),lt(n),Dt)try{return _t(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ct=Tt?function(t,e,n){return Nt.f(t,e,pt(1,n))}:function(t,e,n){return t[e]=n,t},xt="__core-js_shared__",Pt=Ot[xt]||dt(xt,{}),jt=ct(function(t){(t.exports=function(t,e){return Pt[t]||(Pt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),Ut={}.hasOwnProperty,Ft=0,Lt=Math.random(),Mt=!!Object.getOwnPropertySymbols&&!Y(function(){return!String(Symbol())}),Q=Mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Bt=jt("wks"),Gt=Ot.Symbol,Kt=Q?Gt:Gt&&Gt.withoutSetter||yt,Ht=Math.ceil,zt=Math.floor,Vt=Math.min,qt=Math.max,Jt=Math.min,X=function(c){return function(t,e,n){var r,o=et(t),i=vt(o.length),a=function(t,e){t=mt(t);return t<0?qt(t+e,0):Jt(t,e)}(n,i);if(c&&e!=e){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((c||a in o)&&o[a]===e)return c||a||0;return!c&&-1}},It={includes:X(!0),indexOf:X(!1)},Qt={},Wt=It.indexOf,$t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Xt=Object.keys||function(t){return Et(t,$t)},Yt=Tt?Object.defineProperties:function(t,e){lt(t);for(var n,r=Xt(e),o=r.length,i=0;i<o;)Nt.f(t,n=r[i++],e[n]);return t},Zt=Ot,at=function(t,e){return arguments.length<2?St(Zt[t])||St(Ot[t]):Zt[t]&&Zt[t][e]||Ot[t]&&Ot[t][e]},te=at("document","documentElement"),ee=jt("keys"),xt=function(t){return ee[t]||(ee[t]=yt(t))},ne="prototype",re="script",oe=xt("IE_PROTO"),ie=function(){try{kt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;ie=kt?function(t){t.write(Rt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(kt):((t=st("iframe")).style.display="none",te.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(Rt("document.F=Object")),t.close(),t.F);for(var e=$t.length;e--;)delete ie[ne][$t[e]];return ie()};Qt[oe]=!0;var ae=Object.create||function(t,e){var n;return null!==t?(bt[ne]=lt(t),n=new bt,bt[ne]=null,n[oe]=t):n=ie(),void 0===e?n:Yt(n,e)},ce=gt("unscopables"),ue=Array.prototype;null==ue[ce]&&Nt.f(ue,ce,{configurable:!0,value:ae(null)});var Q=function(t){ue[ce][t]=!0},se={},le=Function.toString;"function"!=typeof Pt.inspectSource&&(Pt.inspectSource=function(t){return le.call(t)});var fe,pe,de,he,ye,ge,me,ve,Ee=Pt.inspectSource,X=Ot.WeakMap,Se="function"==typeof X&&/native code/.test(Ee(X)),jt=Ot.WeakMap;me=Se?(fe=Pt.state||(Pt.state=new jt),pe=fe.get,de=fe.has,he=fe.set,ye=function(t,e){return e.facade=t,he.call(fe,t,e),e},ge=function(t){return pe.call(fe,t)||{}},function(t){return de.call(fe,t)}):(ve=xt("state"),Qt[ve]=!0,ye=function(t,e){return e.facade=t,Ct(t,ve,e),e},ge=function(t){return ht(t,ve)?t[ve]:{}},function(t){return ht(t,ve)});function be(t,e){var n,r,o,i=t.target,a=t.global,c=t.stat,u=a?Ot:c?Ot[i]||dt(i,{}):(Ot[i]||{}).prototype;if(u)for(n in e){if(r=e[n],o=t.noTargetGet?(o=Me(u,n))&&o.value:u[n],!Le(a?n:i+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;!function(t,e){for(var n=Ce(e),r=Nt.f,o=Ae.f,i=0;i<n.length;i++){var a=n[i];ht(t,a)||r(t,a,o(e,a))}}(r,o)}(t.sham||o&&o.sham)&&Ct(r,"sham",!0),we(u,n,r,t)}}function Re(t){return Object(tt(t))}var ke={set:ye,get:ge,has:me,enforce:function(t){return me(t)?ge(t):ye(t,{})},getterFor:function(n){return function(t){var e;if(!ut(t)||(e=ge(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},X={}.propertyIsEnumerable,Ie=Object.getOwnPropertyDescriptor,Oe={f:Ie&&!X.call({1:2},1)?function(t){t=Ie(this,t);return!!t&&t.enumerable}:X},Te=Object.getOwnPropertyDescriptor,Ae={f:Tt?Te:function(t,e){if(t=et(t),e=ft(e,!0),Dt)try{return Te(t,e)}catch(t){}if(ht(t,e))return pt(!Oe.f.call(t,e),t[e])}},we=ct(function(t){var e=ke.get,c=ke.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||ht(n,"name")||Ct(n,"name",e),(r=c(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==Ot?(o?!a&&t[e]&&(i=!0):delete t[e],i?t[e]=n:Ct(t,e,n)):i?t[e]=n:dt(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||Ee(this)})}),De=$t.concat("length","prototype"),_e={f:Object.getOwnPropertyNames||function(t){return Et(t,De)}},Ne={f:Object.getOwnPropertySymbols},Ce=at("Reflect","ownKeys")||function(t){var e=_e.f(lt(t)),n=Ne.f;return n?e.concat(n(t)):e},xe=/#|\.prototype\./,jt=function(t,e){t=je[Pe(t)];return t==Fe||t!=Ue&&("function"==typeof e?Y(e):!!e)},Pe=jt.normalize=function(t){return String(t).replace(xe,".").toLowerCase()},je=jt.data={},Ue=jt.NATIVE="N",Fe=jt.POLYFILL="P",Le=jt,Me=Ae.f,X=!Y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Be=xt("IE_PROTO"),Ge=Object.prototype,Ke=X?Object.getPrototypeOf:function(t){return t=Re(t),ht(t,Be)?t[Be]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ge:null},jt=gt("iterator"),xt=!1;[].keys&&("next"in(X=[].keys())?(qe=Ke(Ke(X)))!==Object.prototype&&(cn=qe):xt=!0),null==cn&&(cn={}),ht(cn,jt)||Ct(cn,jt,function(){return this});function He(t,e,n){t&&!ht(t=n?t:t.prototype,Qe)&&Je(t,Qe,{configurable:!0,value:e})}function ze(){return this}function Ve(){return this}var qe={IteratorPrototype:cn,BUGGY_SAFARI_ITERATORS:xt},Je=Nt.f,Qe=gt("toStringTag"),We=qe.IteratorPrototype,$e=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return lt(t),function(t){if(!ut(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Xe=qe.IteratorPrototype,Ye=qe.BUGGY_SAFARI_ITERATORS,Ze=gt("iterator"),tn="values",en="entries",jt=function(t,e,n,r,o,i,a){!function(t,e,n){e+=" Iterator";t.prototype=ae(We,{next:pt(1,n)}),He(t,e,!1),se[e]=ze}(n,e,r);function c(t){if(t===o&&h)return h;if(!Ye&&t in p)return p[t];switch(t){case"keys":case tn:case en:return function(){return new n(this,t)}}return function(){return new n(this)}}var u,s,l=e+" Iterator",f=!1,p=t.prototype,d=p[Ze]||p["@@iterator"]||o&&p[o],h=!Ye&&d||c(o),r="Array"==e&&p.entries||d;if(r&&(t=Ke(r.call(new t)),Xe!==Object.prototype&&t.next&&(Ke(t)!==Xe&&($e?$e(t,Xe):"function"!=typeof t[Ze]&&Ct(t,Ze,Ve)),He(t,l,!0))),o==tn&&d&&d.name!==tn&&(f=!0,h=function(){return d.call(this)}),p[Ze]!==h&&Ct(p,Ze,h),se[e]=h,o)if(u={values:c(tn),keys:i?h:c("keys"),entries:c(en)},a)for(s in u)!Ye&&!f&&s in p||we(p,s,u[s]);else be({target:e,proto:!0,forced:Ye||f},u);return u},nn="Array Iterator",rn=ke.set,on=ke.getterFor(nn),an=jt(Array,"Array",function(t,e){rn(this,{type:nn,target:et(t),index:0,kind:e})},function(){var t=on(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");se.Arguments=se.Array,Q("keys"),Q("values"),Q("entries");var cn={};cn[gt("toStringTag")]="z";var xt="[object z]"===String(cn),un=gt("toStringTag"),sn="Arguments"==Z(function(){return arguments}()),ln=xt?Z:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),un))?t:sn?Z(e):"Object"==(t=Z(e))&&"function"==typeof e.callee?"Arguments":t},qe=xt?{}.toString:function(){return"[object "+ln(this)+"]"};xt||we(Object.prototype,"toString",qe,{unsafe:!0});function fn(t,e){return RegExp(t,e)}var Q={UNSUPPORTED_Y:Y(function(){var t=fn("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),BROKEN_CARET:Y(function(){var t=fn("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},pn=RegExp.prototype.exec,dn=String.prototype.replace,cn=pn,hn=(xt=/a/,qe=/b*/g,pn.call(xt,"a"),pn.call(qe,"a"),0!==xt.lastIndex||0!==qe.lastIndex),yn=Q.UNSUPPORTED_Y||Q.BROKEN_CARET,gn=void 0!==/()??/.exec("")[1];(hn||gn||yn)&&(cn=function(t){var e,n,r,o,i=this,a=yn&&i.sticky,c=function(){var t=lt(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(i),u=i.source,s=0,l=t;return a&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),l=String(t).slice(i.lastIndex),0<i.lastIndex&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(u="(?: "+u+")",l=" "+l,s++),n=new RegExp("^(?:"+u+")",c)),gn&&(n=new RegExp("^"+u+"$(?!\\s)",c)),hn&&(e=i.lastIndex),r=pn.call(a?n:i,l),a?r?(r.input=r.input.slice(s),r[0]=r[0].slice(s),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:hn&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),gn&&r&&1<r.length&&dn.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var mn=cn;be({target:"RegExp",proto:!0,forced:/./.exec!==mn},{exec:mn});var Q=function(i){return function(t,e){var n,r=String(tt(t)),o=mt(e),t=r.length;return o<0||t<=o?i?"":void 0:(e=r.charCodeAt(o))<55296||56319<e||o+1===t||(n=r.charCodeAt(o+1))<56320||57343<n?i?r.charAt(o):e:i?r.slice(o,o+2):n-56320+(e-55296<<10)+65536}},cn={codeAt:Q(!1),charAt:Q(!0)},vn=cn.charAt,En="String Iterator",Sn=ke.set,bn=ke.getterFor(En);jt(String,"String",function(t){Sn(this,{type:En,string:String(t),index:0})},function(){var t=bn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=vn(e,n),t.index+=n.length,{value:n,done:!1})});function Rn(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function kn(t,e){var n=t.exec;if("function"==typeof n){n=n.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==Z(t))throw TypeError("RegExp#exec called on incompatible receiver");return mn.call(t,e)}var In,On,Tn,An,wn,Dn,_n,Nn,Cn,xn=gt("species"),Pn=!Y(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),jn="$0"==="a".replace(/./,"$0"),Q=gt("replace"),Un=!!/./[Q]&&""===/./[Q]("a","$0"),Fn=!Y(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};t="ab".split(t);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}),Ln=gt("match"),Mn=gt("species"),Bn=cn.charAt,Gn=[].push,Kn=Math.min,Hn=4294967295,zn=!Y(function(){return!RegExp(Hn,"y")});On=2,Tn=function(o,m,v){var E="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=String(tt(this)),r=void 0===e?Hn:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!ut(u=t)||(void 0!==(e=u[Ln])?!e:"RegExp"!=Z(u)))return m.call(n,t,r);for(var o,i,a,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=new RegExp(t.source,u+"g");(o=mn.call(l,n))&&!(s<(i=l.lastIndex)&&(c.push(n.slice(s,o.index)),1<o.length&&o.index<n.length&&Gn.apply(c,o.slice(1)),a=o[0].length,s=i,c.length>=r));)l.lastIndex===o.index&&l.lastIndex++;return s===n.length?!a&&l.test("")||c.push(""):c.push(n.slice(s)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:m.call(this,t,e)}:m;return[function(t,e){var n=tt(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):E.call(String(n),t,e)},function(t,e){var n=v(E,t,this,e,E!==m);if(n.done)return n.value;var r=lt(t),o=String(this),t=(n=r,t=RegExp,void 0===(n=lt(n).constructor)||null==(a=lt(n)[Mn])?t:Rn(a)),i=r.unicode,a=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(zn?"y":"g"),c=new t(zn?r:"^(?:"+r.source+")",a),u=void 0===e?Hn:e>>>0;if(0==u)return[];if(0===o.length)return null===kn(c,o)?[o]:[];for(var s,l,f=0,p=0,d=[];p<o.length;){c.lastIndex=zn?p:0;var h,y=kn(c,zn?o:o.slice(p));if(null===y||(h=Kn(vt(c.lastIndex+(zn?0:p)),o.length))===f)s=o,p=(l=p)+(i?Bn(s,l).length:1);else{if(d.push(o.slice(f,p)),d.length===u)return d;for(var g=1;g<=y.length-1;g++)if(d.push(y[g]),d.length===u)return d;p=f=h}}return d.push(o.slice(f)),d}]},An=!zn,_n=gt(In="split"),Nn=!Y(function(){var t={};return t[_n]=function(){return 7},7!=""[In](t)}),Cn=Nn&&!Y(function(){var t=!1,e=/a/;return"split"===In&&((e={constructor:{}}).constructor[xn]=function(){return e},e.flags="",e[_n]=/./[_n]),e.exec=function(){return t=!0,null},e[_n](""),!t}),Nn&&Cn&&("replace"!==In||Pn&&jn&&!Un)&&("split"!==In||Fn)||(wn=/./[_n],Tn=(Cn=Tn(_n,""[In],function(t,e,n,r,o){return e.exec===mn?Nn&&!o?{done:!0,value:wn.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}},{REPLACE_KEEPS_$0:jn,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Un}))[0],Dn=Cn[1],we(String.prototype,In,Tn),we(RegExp.prototype,_n,2==On?function(t,e){return Dn.call(t,this,e)}:function(t){return Dn.call(t,this)})),An&&Ct(RegExp.prototype[_n],"sham",!0);function Vn(t,e,n){for(var r in e)we(t,r,e[r],n);return t}function qn(r,o,t){if(Rn(r),void 0===o)return r;switch(t){case 0:return function(){return r.call(o)};case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}function Jn(t){var e=t.return;return void 0!==e&&lt(e.call(t)).value}function Qn(t,e){this.stopped=t,this.result=e}function Wn(t,e,n){function r(t){return i&&Jn(i),new Qn(!0,t)}function o(t){return p?(lt(t),h?y(t[0],t[1],r):y(t[0],t[1])):h?y(t,r):y(t)}var i,a,c,u,s,l,f=n&&n.that,p=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),y=qn(e,f,1+p+h);if(d)i=t;else{if("function"!=typeof(f=function(t){if(null!=t)return t[er]||t["@@iterator"]||se[ln(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(d=f)&&(se.Array===d||tr[Zn]===d)){for(a=0,c=vt(t.length);a<c;a++)if((u=o(t[a]))&&u instanceof Qn)return u;return new Qn(!1)}i=f.call(t)}for(s=i.next;!(l=s.call(i)).done;){try{u=o(l.value)}catch(t){throw Jn(i),t}if("object"==typeof u&&u&&u instanceof Qn)return u}return new Qn(!1)}function $n(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var Xn=!Y(function(){return Object.isExtensible(Object.preventExtensions({}))}),Yn=ct(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++o,weakData:{}}})}var e=Nt.f,r=yt("meta"),o=0,i=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!ut(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!ht(t,r)){if(!i(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!ht(t,r)){if(!i(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Xn&&a.REQUIRED&&i(t)&&!ht(t,r)&&n(t),t}};Qt[r]=!0}),Zn=(Yn.REQUIRED,Yn.fastKey,Yn.getWeakData,Yn.onFreeze,gt("iterator")),tr=Array.prototype,er=gt("iterator"),nr=gt("iterator"),rr=!1;try{var or=0,ir={next:function(){return{done:!!or++}},return:function(){rr=!0}};ir[nr]=function(){return this},Array.from(ir,function(){throw 2})}catch(t){}function ar(a,t,e){function n(t){var n=d[t];we(d,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(l&&!ut(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return l&&!ut(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(l&&!ut(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,o,i,c,u,s=-1!==a.indexOf("Map"),l=-1!==a.indexOf("Weak"),f=s?"set":"add",p=Ot[a],d=p&&p.prototype,h=p,y={};return Le(a,"function"!=typeof p||!(l||d.forEach&&!Y(function(){(new p).entries().next()})))?(h=e.getConstructor(t,a,s,f),Yn.REQUIRED=!0):Le(a,!0)&&(o=(r=new h)[f](l?{}:-0,1)!=r,i=Y(function(){r.has(1)}),c=function(t,e){if(!e&&!rr)return!1;var n=!1;try{var r={};r[nr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){new p(t)}),u=!l&&Y(function(){for(var t=new p,e=5;e--;)t[f](e,e);return!t.has(-0)}),c||(((h=t(function(t,e){$n(t,h,a);var n,r,o,i,n=(n=new p,r=t,t=h,$e&&"function"==typeof(o=r.constructor)&&o!==t&&ut(i=o.prototype)&&i!==t.prototype&&$e(n,i),n);return null!=e&&Wn(e,n[f],{that:n,AS_ENTRIES:s}),n})).prototype=d).constructor=h),(i||u)&&(n("delete"),n("has"),s&&n("get")),(u||o)&&n(f),l&&d.clear&&delete d.clear),y[a]=h,be({global:!0,forced:h!=p},y),He(h,a),l||e.setStrong(h,a,s),h}function cr(t,e){var n;return lr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||lr(n.prototype))||ut(n)&&null===(n=n[fr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function ur(t){return t.frozen||(t.frozen=new Er)}function sr(t,e){return gr(t.entries,function(t){return t[0]===e})}var lr=Array.isArray||function(t){return"Array"==Z(t)},fr=gt("species"),pr=[].push,jt=function(p){var d=1==p,h=2==p,y=3==p,g=4==p,m=6==p,v=7==p,E=5==p||m;return function(t,e,n,r){for(var o,i,a=Re(t),c=it(a),u=qn(e,n,3),s=vt(c.length),l=0,r=r||cr,f=d?r(t,s):h||v?r(t,0):void 0;l<s;l++)if((E||l in c)&&(i=u(o=c[l],l,a),p))if(d)f[l]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return l;case 2:pr.call(f,o)}else switch(p){case 4:return!1;case 7:pr.call(f,o)}return m?-1:y||g?g:f}},Q={forEach:jt(0),map:jt(1),filter:jt(2),some:jt(3),every:jt(4),find:jt(5),findIndex:jt(6),filterOut:jt(7)},dr=Yn.getWeakData,hr=ke.set,yr=ke.getterFor,gr=Q.find,mr=Q.findIndex,vr=0,Er=function(){this.entries=[]};Er.prototype={get:function(t){t=sr(this,t);if(t)return t[1]},has:function(t){return!!sr(this,t)},set:function(t,e){var n=sr(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(e){var t=mr(this.entries,function(t){return t[0]===e});return~t&&this.entries.splice(t,1),!!~t}};var Sr,br={getConstructor:function(t,n,r,o){function i(t,e,n){var r=c(t),o=dr(lt(e),!0);return!0===o?ur(r).set(e,n):o[r.id]=n,t}var a=t(function(t,e){$n(t,a,n),hr(t,{type:n,id:vr++,frozen:void 0}),null!=e&&Wn(e,t[o],{that:t,AS_ENTRIES:r})}),c=yr(n);return Vn(a.prototype,{delete:function(t){var e=c(this);if(!ut(t))return!1;var n=dr(t);return!0===n?ur(e).delete(t):n&&ht(n,e.id)&&delete n[e.id]},has:function(t){var e=c(this);if(!ut(t))return!1;var n=dr(t);return!0===n?ur(e).has(t):n&&ht(n,e.id)}}),Vn(a.prototype,r?{get:function(t){var e=c(this);if(ut(t)){var n=dr(t);return!0===n?ur(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return i(this,t,e)}}:{add:function(t){return i(this,t,!0)}}),a}},Rr=(ct(function(t){function e(e){return function(t){return e(this,arguments.length?t:void 0)}}var r,n,o,i,a,c=ke.enforce,u=!Ot.ActiveXObject&&"ActiveXObject"in Ot,s=Object.isExtensible,t=t.exports=ar("WeakMap",e,br);Se&&u&&(r=br.getConstructor(e,"WeakMap",!0),Yn.REQUIRED=!0,t=t.prototype,n=t.delete,o=t.has,i=t.get,a=t.set,Vn(t,{delete:function(t){if(!ut(t)||s(t))return n.call(this,t);var e=c(this);return e.frozen||(e.frozen=new r),n.call(this,t)||e.frozen.delete(t)},has:function(t){if(!ut(t)||s(t))return o.call(this,t);var e=c(this);return e.frozen||(e.frozen=new r),o.call(this,t)||e.frozen.has(t)},get:function(t){if(!ut(t)||s(t))return i.call(this,t);var e=c(this);return e.frozen||(e.frozen=new r),o.call(this,t)?i.call(this,t):e.frozen.get(t)},set:function(t,e){var n;return ut(t)&&!s(t)?((n=c(this)).frozen||(n.frozen=new r),o.call(this,t)?a.call(this,t,e):n.frozen.set(t,e)):a.call(this,t,e),this}}))}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),kr=gt("iterator"),Ir=gt("toStringTag"),Or=an.values;for(Sr in Rr){var Tr=Ot[Sr],Ar=Tr&&Tr.prototype;if(Ar){if(Ar[kr]!==Or)try{Ct(Ar,kr,Or)}catch(t){Ar[kr]=Or}if(Ar[Ir]||Ct(Ar,Ir,Sr),Rr[Sr])for(var wr in an)if(Ar[wr]!==an[wr])try{Ct(Ar,wr,an[wr])}catch(t){Ar[wr]=an[wr]}}}var Dr=function(){function t(){i(this,t)}return n(t,null,[{key:"write",value:function(){var t;xr.isDebugMode&&(t=console).log.apply(t,arguments)}},{key:"error",value:function(){var t;xr.isDebugMode&&(t=console).error.apply(t,arguments)}}]),t}(),_r=new WeakMap,Nr=null,Cr=null,xr=function(){function r(){i(this,r)}return n(r,null,[{key:"setDebugMode",value:function(){_r.set(this,!0)}},{key:"unsetDebugMode",value:function(){_r.set(this,!1)}},{key:"getParamsFromCallback",value:function(t,e){return{result:t,err:e,reversed:!1}}},{key:"callback",value:function(t,e,n){n&&((e=r.getParamsFromCallback(t,e)).err&&Dr.error(e.err),e.reversed?n(e.err,e.result):n(e.result,e.err))}},{key:"isSendBirdSdkCompatible",value:function(t){var e,n="3.0.55".split("."),r=t.split(".");if(n.length!==r.length)return!1;for(e in n)if(parseInt(n[e])>parseInt(r[e]))return!1;return!0}},{key:"sendBird",get:function(){return Nr},set:function(t){Nr=t}},{key:"isDebugMode",get:function(){return _r.get(this)}},{key:"apiHost",get:function(){var t;return Cr||(t=Nr.getInstance(),Cr="https://desk-api-".concat(t.getApplicationId(),".sendbird.com/sapi")),Cr},set:function(t){Cr=t}},{key:"sdkVersion",get:function(){return"1.0.18"}},{key:"minSendBirdVersion",get:function(){return"3.0.55"}}]),r}(),cn=Nt.f,jt=Function.prototype,Pr=jt.toString,jr=/^\s*function ([^ (]*)/;!Tt||"name"in jt||cn(jt,"name",{configurable:!0,get:function(){try{return Pr.call(this).match(jr)[1]}catch(t){return""}}});function Ur(t,e,n){(e=ft(e))in t?Nt.f(t,e,pt(0,n)):t[e]=n}var Fr={ERROR_SENDBIRD_SDK_MISSING:{code:100,message:"SendBird SDK is missing."},ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED:{code:101,message:"This SendBird SDK version is not supported."},ERROR_SENDBIRD_DESK_INIT_MISSING:{code:102,message:"SendBird Desk SDK is not initialized. It should be done before authentication."},ERROR_SENDBIRD_SDK_MESSAGE_LIST_FAILED:{code:200,message:"Cannot load messages in SDK client."},ERROR_INVALID_PARAMETER:{code:403,message:"Invalid parameter."},ERROR_DATA_NOT_FOUND:{code:404,message:"Data not found."},ERROR_REQUEST_TIMEOUT:{code:409,message:"Request timed-out."},ERROR_REQUEST:{code:500,message:"Request failed."},ERROR_REQUEST_CANCELED:{code:501,message:"Request canceled."}},Lr=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(o,e(Error));var r=t(o);function o(t,e){var n;return i(this,o),n=r.call(this,t),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(s(n),n.constructor):n.stack=new Error(t).stack,n.name="SendBirdDeskError",n.message=t,n.code=e,n}return n(o,null,[{key:"create",value:function(t){return t?new o(t.message,t.code):new Error("SendBirdDeskError type missing.")}},{key:"throw",value:function(t){if(t)throw new o(t.message,t.code)}},{key:"Type",get:function(){return Fr}}]),o}(),Mr=new Zt.WeakMap,Br=function(){function t(){i(this,t)}return n(t,null,[{key:"connect",value:function(t,e,n){var r=this;"function"==typeof e&&(n=e,e="");var o,i=xr.sendBird;i?(o=i.getInstance(),i="".concat(xr.apiHost,"/customers/auth/"),e={sendbirdAccessToken:e||"","content-type":"application/json"},t={sendbirdAppId:o.getApplicationId(),sendbirdId:t},nt.create({headers:e}).post(i,t).then(function(t){Mr.set(r,{deskToken:t.data.token}),Dr.write("[REQ] connection established"),xr.callback(t.data,null,n)}).catch(function(t){xr.callback(null,t,n)})):xr.callback(null,Lr.create(Lr.Type.ERROR_SENDBIRD_SDK_MISSING),n)}},{key:"header",get:function(){return{sendbirdDeskToken:Mr.get(this).deskToken,"content-type":"application/json","user-agent":"desk-js@".concat("1.0.18")}}},{key:"getParam",get:function(){var t=xr.sendBird;if(t){t=t.getInstance();return"sendbirdAppId=".concat(t.getApplicationId())}return""}},{key:"postParam",get:function(){var t=xr.sendBird;return t?{sendbirdAppId:t.getInstance().getApplicationId()}:{}}}]),t}(),Gr=function(){function e(t){i(this,e),this.fetchFromJSON(t)}return n(e,[{key:"fetchFromJSON",value:function(t){this.userId=t?t.user:0,this.name=t?t.displayName:"",this.profileUrl=t?t.photoThumbnailUrl:""}}]),e}(),cn=at("navigator","userAgent")||"",jt=Ot.process,at=jt&&jt.versions,jt=at&&at.v8;jt?Xr=(Qr=jt.split("."))[0]+Qr[1]:cn&&(!(Qr=cn.match(/Edge\/(\d+)/))||74<=Qr[1])&&(Qr=cn.match(/Chrome\/(\d+)/))&&(Xr=Qr[1]);var Kr=Xr&&+Xr,Hr=gt("species"),at=function(e){return 51<=Kr||!Y(function(){var t=[];return(t.constructor={})[Hr]=function(){return{foo:1}},1!==t[e](Boolean).foo})},zr=gt("isConcatSpreadable"),Vr=9007199254740991,qr="Maximum allowed index exceeded",jt=51<=Kr||!Y(function(){var t=[];return t[zr]=!1,t.concat()[0]!==t}),cn=at("concat");be({target:"Array",proto:!0,forced:!jt||!cn},{concat:function(){for(var t,e,n,r=Re(this),o=cr(r,0),i=0,a=-1,c=arguments.length;a<c;a++)if(function(t){if(!ut(t))return!1;var e=t[zr];return void 0!==e?!!e:lr(t)}(n=-1===a?r:arguments[a])){if(e=vt(n.length),Vr<i+e)throw TypeError(qr);for(t=0;t<e;t++,i++)t in n&&Ur(o,i,n[t])}else{if(Vr<=i)throw TypeError(qr);Ur(o,i++,n)}return o.length=i,o}});function Jr(t){throw t}var Qr=function(t,e){var n=[][t];return!!n&&Y(function(){n.call(null,e||function(){throw 1},1)})},Wr=Object.defineProperty,$r={},Xr=function(t,e){if(ht($r,t))return $r[t];var n=[][t],r=!!ht(e=e||{},"ACCESSORS")&&e.ACCESSORS,o=ht(e,0)?e[0]:Jr,i=ht(e,1)?e[1]:void 0;return $r[t]=!!n&&!Y(function(){if(r&&!Tt)return 1;var t={length:-1};r?Wr(t,1,{enumerable:!0,get:Jr}):t[1]=1,n.call(t,o,i)})},Yr=Q.forEach,jt=Qr("forEach"),cn=Xr("forEach"),cn=jt&&cn?[].forEach:function(t,e){return Yr(this,t,1<arguments.length?e:void 0)};be({target:"Array",proto:!0,forced:[].forEach!=cn},{forEach:cn});var Zr=It.indexOf,to=[].indexOf,eo=!!to&&1/[1].indexOf(1,-0)<0,cn=Qr("indexOf"),It=Xr("indexOf",{ACCESSORS:!0,1:0});be({target:"Array",proto:!0,forced:eo||!cn||!It},{indexOf:function(t,e){return eo?to.apply(this,arguments)||0:Zr(this,t,1<arguments.length?e:void 0)}});var no=[].join,cn=it!=Object,It=Qr("join",",");be({target:"Array",proto:!0,forced:cn||!It},{join:function(t){return no.call(et(this),void 0===t?",":t)}});var ro=Q.map,It=at("map"),at=Xr("map");be({target:"Array",proto:!0,forced:!It||!at},{map:function(t,e){return ro(this,t,1<arguments.length?e:void 0)}});var oo=Q.some,Qr=Qr("some"),Xr=Xr("some");be({target:"Array",proto:!0,forced:!Qr||!Xr},{some:function(t,e){return oo(this,t,1<arguments.length?e:void 0)}});Xr=Y(function(){Xt(1)});be({target:"Object",stat:!0,forced:Xr},{keys:function(t){return Xt(Re(t))}});function io(t,e){var n=xr.sendBird;n?((n=n.getInstance().GroupChannel.createMyGroupChannelListQuery()).customTypesFilter=[so],n.channelUrlsFilter=t,n.includeEmpty=!0,n.next(e)):xr.callback(null,Lr.create(Lr.Type.ERROR_SENDBIRD_SDK_MISSING),e)}function ao(e,i){var a=fo.Status.OPEN;fo.isStatus(e.status)&&(a=e.status);var t=a!==fo.Status.CLOSED?"status=ASSIGNED&status=UNASSIGNED":"status=CLOSED",t="".concat(xr.apiHost,"/tickets/")+"?".concat(Br.getParam,"&limit=").concat(e.limit||fo.defaultLimit,"&offset=").concat(e.offset||0)+"&".concat(t,"&order=").concat(e.order||"-updated_at");e.channelUrl&&(t+="&channelUrl=".concat(e.channelUrl)),e.customFieldFilter&&"object"===h(e.customFieldFilter)&&(t+="&customFields="+encodeURIComponent(Object.keys(e.customFieldFilter).map(function(t){return"".concat(t,":").concat(encodeURIComponent(e.customFieldFilter[t]))}).join(","))),nt.create({headers:Br.header}).get(t).then(function(t){if(t&&t.data){var e,n=[],r=[];for(e in t.data.results){var o=new fo(t.data.results[e]);lo[o.channelUrl]=o,r.push(o.channelUrl),n.push(o)}io(r,function(t,e){var e=xr.getParamsFromCallback(t,e),r=e.result;e.err||n.forEach(function(t){for(var e in r){var n=r[e];if(t.channelUrl===n.url){t.channel=n;break}}}),Dr.write("[REQ] ".concat(a," ticket list:"),n),xr.callback(n,e.err,i)})}else xr.callback([],null,i)}).catch(function(t){return xr.callback(null,t,i)})}var co=function(){function t(){i(this,t)}return n(t,null,[{key:"CustomType",get:function(){return{RICH_MESSAGE:"SENDBIRD_DESK_RICH_MESSAGE",ADMIN_MESSAGE:"SENDBIRD_DESK_ADMIN_MESSAGE_CUSTOM_TYPE"}}},{key:"DataType",get:function(){return{TICKET_INQUIRE_CLOSURE:"SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE",TICKET_ASSIGN:"TICKET_ASSIGN",TICKET_TRANSFER:"TICKET_TRANSFER",TICKET_CLOSE:"TICKET_CLOSE",TICKET_FEEDBACK:"SENDBIRD_DESK_CUSTOMER_SATISFACTION",URL_PREVIEW:"SENDBIRD_DESK_URL_PREVIEW"}}},{key:"ClosureState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED",DECLINED:"DECLINED"}}},{key:"FeedbackState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED"}}},{key:"UrlRegExp",get:function(){return/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?/gi}}]),t}(),uo=function(){function e(t){i(this,e),this.fetchFromJSON(t)}return n(e,[{key:"fetchFromJSON",value:function(t){this.channelUrl=t?t.channel_url:"",this.name=t?t.name:""}}]),e}(),so="SENDBIRD_DESK_CHANNEL_CUSTOM_TYPE",lo={},fo=function(){function d(t){i(this,d),this.fetchFromJSON(t)}return n(d,[{key:"fetchFromJSON",value:function(t){if(this.id=t?t.id:0,this.title=t?t.channelName:"",this.status=t?t.status:"",this.info=t&&t.info?JSON.parse(t.info):null,this.priority=t?t.priority:d.Priority.MEDIUM,this.agent=t&&t.recentAssignment&&t.recentAssignment.agent?new Gr(t.recentAssignment.agent):null,this.customer=t?t.customer:null,this.customFields={},this.group=t?t.group:0,this.relatedChannels=[],this.channel=this.channel,this.channelUrl=t?t.channelUrl:null,this.updatedAt=(t?new Date(t.updatedAt):new Date).getTime(),t&&t.customFields)for(var e=t.customFields,n=0;n<e.length;n++){var r=e[n].key,o=e[n].value;this.customFields[r]=o}if(t&&t.relatedChannels)try{var i=JSON.parse(t.relatedChannels);Array.isArray(i)&&(this.relatedChannels=i.map(function(t){return new uo(t)}))}catch(t){}}},{key:"refresh",value:function(n){var r=this,t="".concat(xr.apiHost,"/tickets/").concat(this.id,"/?").concat(Br.getParam);nt.create({headers:Br.header}).get(t).then(function(t){r.fetchFromJSON(t.data),io([r.channelUrl],function(t,e){e=xr.getParamsFromCallback(t,e).result;0<e.length&&(r.channel=e[0]),lo[r.channelUrl]=r,Dr.write("[REQ] ticket refresh:",r),xr.callback(r,null,n)})}).catch(function(t){return xr.callback(null,t,n)})}},{key:"reopen",value:function(n){var r=this,t="".concat(xr.apiHost,"/tickets/").concat(this.id,"/reopen"),e=Br.postParam;nt.create({headers:Br.header}).patch(t,e).then(function(t){t&&t.data&&t.data.channelUrl?(r.fetchFromJSON(t.data),io([r.channelUrl],function(t,e){e=xr.getParamsFromCallback(t,e).result;0<e.length&&(r.channel=e[0]),lo[r.channelUrl]=r,Dr.write("[REQ] ticket reopen:",r),xr.callback(r,null,n)})):xr.callback(r,null,n)}).catch(function(t){return xr.callback(null,t,n)})}},{key:"cancel",value:function(t,n){var e,r,o=this;"function"==typeof t&&(n=t,t=null),t&&"string"!=typeof t?xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),n):(e="".concat(xr.apiHost,"/tickets/").concat(this.id,"/cancel"),r=Br.postParam,t&&(r.groupKey=t),nt.create({headers:Br.header}).patch(e,r).then(function(t){t&&t.data&&t.data.channelUrl?(o.fetchFromJSON(t.data),io([o.channelUrl],function(t,e){e=xr.getParamsFromCallback(t,e).result;0<e.length&&(o.channel=e[0]),lo[o.channelUrl]=o,Dr.write("[REQ] ticket cancel:",o),xr.callback(o,null,n)})):xr.callback(o,null,n)}).catch(function(t){return xr.callback(null,t,n)}))}},{key:"close",value:function(t,n){var r=this;if(1===arguments.length){if("function"!=typeof t)return void xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),n);n=t,t=null}else if("string"!=typeof t||"function"!=typeof n)return void xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),n);var e="".concat(xr.apiHost,"/tickets/").concat(this.id,"/close"),o=Br.postParam;t&&(o.closeComment=t),nt.create({headers:Br.header}).patch(e,o).then(function(t){t.data.channelUrl?(r.fetchFromJSON(t.data),io([r.channelUrl],function(t,e){e=xr.getParamsFromCallback(t,e).result;0<e.length&&(r.channel=e[0]),lo[r.channelUrl]=r,Dr.write("[REQ] ticket close:",r),xr.callback(r,null,n)})):xr.callback(r,null,n)}).catch(function(t){return xr.callback(null,t,n)})}},{key:"selectQuestion",value:function(t,e,n){var r,o,i=this;"number"==typeof t&&"string"==typeof e?(r="".concat(xr.apiHost,"/tickets/").concat(this.id,"/select_question"),(o=Br.postParam).faqFileId=t,o.question=e,nt.create({headers:Br.header}).post(r,o).then(function(t){Dr.write("[REQ] ticket select option:",i),xr.callback(t.data,null,n)}).catch(function(t){return xr.callback(null,t,n)})):xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),n)}},{key:"setPriority",value:function(t,e){var n,r,o=this;Object.keys(d.Priority).map(function(t){return d.Priority[t]}).indexOf(t)<0?xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),e):(n="".concat(xr.apiHost,"/tickets/").concat(this.id,"/"),(r=Br.postParam).priority=t,nt.create({headers:Br.header}).patch(n,r).then(function(t){o.fetchFromJSON(t.data),xr.callback(o,null,e)}).catch(function(t){xr.callback(null,t,e)}))}},{key:"setRelatedChannelUrls",value:function(t,e){var n,r,o=this;Array.isArray(t)&&!t.some(function(t){return"string"!=typeof t})?(n="".concat(xr.apiHost,"/tickets/").concat(this.id,"/"),(r=Br.postParam).relatedChannelUrls=t.join(","),nt.create({headers:Br.header}).patch(n,r).then(function(t){o.fetchFromJSON(t.data),xr.callback(o,null,e)}).catch(function(t){xr.callback(null,t,e)})):xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),e)}},{key:"setCustomFields",value:function(t,e){var n=this;if("object"!==h(t)||null===t||Array.isArray(t))xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),e);else{var r,o={};for(r in t)o[r]="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);var i="".concat(xr.apiHost,"/tickets/").concat(this.id,"/custom_fields/"),a=Br.postParam;a.customFields=JSON.stringify(o),nt.create({headers:Br.header}).patch(i,a).then(function(t){n.fetchFromJSON(t.data),xr.callback(n,null,e)}).catch(function(t){xr.callback(null,t,e)})}}}],[{key:"isStatus",value:function(t){for(var e in d.Status)if(d.Status[e]===t)return!0;return!1}},{key:"isPriority",value:function(t){for(var e in d.Priority)if(d.Priority[e]===t)return!0;return!1}},{key:"isDeskCustomType",value:function(t){return t===so}},{key:"clearCache",value:function(t){t?(delete lo[t],Dr.write("[SYS] cached ticket for ".concat(t," cleared"))):(lo={},Dr.write("[SYS] all cached ticket cleared"))}},{key:"create",value:function(t,e,n,r,o,i,a,c){var u=xr.sendBird;if(u)if("function"==typeof n&&(c=n,a=i=o=r=n=null),"function"==typeof r&&(c=r,a=i=o=r=null),"function"==typeof o&&(c=o,a=i=o=null),"function"==typeof i&&(c=i,a=i=null),"function"==typeof a&&(c=a,a=null),"string"!=typeof t||"string"!=typeof e||n&&"string"!=typeof n||r&&"object"!==h(r)||o&&!d.isPriority(o)||i&&(!Array.isArray(i)||i.some(function(t){return"string"!=typeof t}))||Array.isArray(r)||a&&"string"!=typeof a)xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),c);else{var s=u.getInstance(),l="".concat(xr.apiHost,"/tickets/"),u=Br.postParam;if(u.channelName=t,u.channelType="SENDBIRD_JAVASCRIPT",n&&(u.groupKey=n),r){var f,p={};for(f in r)p[f]="string"==typeof r[f]?r[f]:JSON.stringify(r[f]);u.customFields=JSON.stringify(p)}o&&(u.priority=o),i&&(u.relatedChannelUrls=i.join(",")),a&&(u.botKey=a),u.info=JSON.stringify({ticket:{subject:t,requester:{name:e,email:s.getCurrentUserId()}}}),nt.create({headers:Br.header}).post(l,u).then(function(t){var n=new d(t.data);io([n.channelUrl],function(t,e){e=xr.getParamsFromCallback(t,e).result;0<e.length&&(n.channel=e[0]),lo[n.channelUrl]=n,Dr.write("[REQ] ticket create:",n),xr.callback(n,null,c)})}).catch(function(t){return xr.callback(null,t,c)})}else xr.callback(null,Lr.create(Lr.Type.ERROR_SENDBIRD_SDK_MISSING),c)}},{key:"getOpenCount",value:function(e){var t="".concat(xr.apiHost,"/tickets/count/?").concat(Br.getParam);nt.create({headers:Br.header}).get(t).then(function(t){return xr.callback(t.data,null,e)}).catch(function(t){return xr.callback(null,t,e)})}},{key:"getByChannelUrl",value:function(r,o){var t;lo[r]?xr.callback(lo[r],null,o):(t="".concat(xr.apiHost,"/tickets/?").concat(Br.getParam,"&limit=10&channelUrl=").concat(r),nt.create({headers:Br.header}).get(t).then(function(t){var n=null;t&&t.data&&0<t.data.results.length&&(n=new d(t.data.results[0])),n?io([r],function(t,e){e=xr.getParamsFromCallback(t,e).result;0<e.length&&(n.channel=e[0]),lo[r]=n,Dr.write("[REQ] get ticket for channel ".concat(r,":"),n),xr.callback(n,null,o)}):xr.callback(null,Lr.Type.ERROR_DATA_NOT_FOUND,o)}).catch(function(t){return xr.callback(null,t,o)}))}},{key:"getOpenedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),ao({offset:t,customFieldFilter:e,status:this.Status.OPEN},n)}},{key:"getClosedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),ao({offset:t,customFieldFilter:e,status:this.Status.CLOSED},n)}},{key:"getUrlPreview",value:function(t,e){var n="".concat(xr.apiHost,"/tickets/url_preview/"),r=Br.postParam;r.url=t,nt.create({headers:Br.header}).post(n,r).then(function(t){return xr.callback(t.data,null,e)}).catch(function(t){return xr.callback(null,t,e)})}},{key:"confirmEndOfChat",value:function(r,o,i){"string"==typeof o&&-1<["yes","no"].indexOf(o)?d.getByChannelUrl(r.channelUrl,function(t,e){var n=xr.getParamsFromCallback(t,e).result,t="".concat(xr.apiHost,"/tickets/").concat(n.id,"/edit_message/"),e=Br.postParam;e.messageId=r.messageId,e.messageData=JSON.stringify({type:co.DataType.TICKET_INQUIRE_CLOSURE,body:{state:"yes"===o?co.ClosureState.CONFIRMED:co.ClosureState.DECLINED,ticketId:n.id}}),nt.create({headers:Br.header}).patch(t,e).then(function(t){Dr.write("[REQ] confirmed end of chat:",n),xr.callback(t.data,null,i)}).catch(function(t){return xr.callback(null,t,i)})}):xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER))}},{key:"submitFeedback",value:function(r,o,t,e){var i=2<arguments.length&&void 0!==t?t:"",a=3<arguments.length?e:void 0;r&&0<r.messageId&&r.channelUrl&&"number"==typeof o&&1<=o&&o<=5&&"string"==typeof i?d.getByChannelUrl(r.channelUrl,function(t,e){var n=xr.getParamsFromCallback(t,e).result,t="".concat(xr.apiHost,"/tickets/").concat(n.id,"/edit_message/"),e=Br.postParam;e.messageId=r.messageId,e.messageData=JSON.stringify({type:co.DataType.TICKET_FEEDBACK,body:{state:co.FeedbackState.CONFIRMED,customerSatisfactionScore:o,customerSatisfactionComment:i,ticketId:n.id}}),nt.create({headers:Br.header}).patch(t,e).then(function(t){Dr.write("[REQ] customer feedback:",n),xr.callback(t.data,null,a)}).catch(function(t){return xr.callback(null,t,a)})}):xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER))}},{key:"Status",get:function(){return{INITIALIZED:"INITIALIZED",PROACTIVE:"PROACTIVE",UNASSIGNED:"UNASSIGNED",ASSIGNED:"ASSIGNED",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"Priority",get:function(){return{URGENT:"URGENT",HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW"}}},{key:"defaultLimit",get:function(){return 10}}]),d}(),po=!1;return function(){function t(){i(this,t)}return n(t,null,[{key:"init",value:function(t){try{t||(window&&window.SendBird&&(t=window.SendBird),global&&global.SendBird&&(t=global.SendBird)),t&&t.version?(xr.sendBird=t,xr.isSendBirdSdkCompatible(t.version)?po=!0:Lr.throw(Lr.Type.ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED)):Lr.throw(Lr.Type.ERROR_SENDBIRD_SDK_MISSING)}catch(t){Lr.throw(Lr.Type.ERROR_SENDBIRD_SDK_MISSING)}}},{key:"authenticate",value:function(t,e,n){po?Br.connect(t,e,n):Lr.throw(Lr.Type.ERROR_SENDBIRD_DESK_INIT_MISSING)}},{key:"isDeskChannel",value:function(t){return fo.isDeskCustomType(t.customType)}},{key:"setApiHost",value:function(t){xr.apiHost=t}},{key:"setDebugMode",value:function(){xr.setDebugMode()}},{key:"setCustomerCustomFields",value:function(t,o){if("object"!==h(t)||null===t||Array.isArray(t))xr.callback(null,Lr.create(Lr.Type.ERROR_INVALID_PARAMETER),o);else{var e,n={};for(e in t)n[e]="string"==typeof t[e]?t[e]:JSON.stringify(t[e]);var r="".concat(xr.apiHost,"/customers/custom_fields/"),i=Br.postParam;i.customFields=JSON.stringify(n),nt.create({headers:Br.header}).patch(r,i).then(function(t){var e,n={};for(e in t.data.customFields){var r=t.data.customFields[e];n[r.key]=r.value}xr.callback(n,null,o)}).catch(function(t){xr.callback(null,t,o)})}}},{key:"version",get:function(){return xr.sdkVersion}},{key:"Error",get:function(){return Lr}},{key:"Agent",get:function(){return Gr}},{key:"Ticket",get:function(){return fo}},{key:"Message",get:function(){return co}},{key:"RelatedChannel",get:function(){return uo}},{key:"UrlRegExp",get:function(){return co.UrlRegExp}}]),t}()});