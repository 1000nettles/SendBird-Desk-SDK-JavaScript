/**
 * Copyright(c) 2016 SendBird, Inc.
 * SendBird Desk JavaScript SDK v1.0.9
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).SendBirdDesk=t()}(this,function(){"use strict";function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function t(e){var n="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return c(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}var l=Object.prototype.toString;function f(e){return"[object Array]"===l.call(e)}function d(e){return null!==e&&"object"==typeof e}function h(e){return"[object Function]"===l.call(e)}function y(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),f(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var g={isArray:f,isArrayBuffer:function(e){return"[object ArrayBuffer]"===l.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===l.call(e)},isFile:function(e){return"[object File]"===l.call(e)},isBlob:function(e){return"[object Blob]"===l.call(e)},isFunction:h,isStream:function(e){return d(e)&&h(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:y,merge:function n(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=n(r[t],e):r[t]=e}for(var t=0,o=arguments.length;t<o;t++)y(arguments[t],e);return r},deepMerge:function n(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=n(r[t],e):r[t]="object"==typeof e?n({},e):e}for(var t=0,o=arguments.length;t<o;t++)y(arguments[t],e);return r},extend:function(n,e,r){return y(e,function(e,t){n[t]=r&&"function"==typeof e?s(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function v(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function m(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(g.isURLSearchParams(t))r=t.toString();else{var o=[];g.forEach(t,function(e,t){null!=e&&(g.isArray(e)?t+="[]":e=[e],g.forEach(e,function(e){g.isDate(e)?e=e.toISOString():g.isObject(e)&&(e=JSON.stringify(e)),o.push(v(t)+"="+v(e))}))}),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}function e(){this.handlers=[]}e.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},e.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},e.prototype.forEach=function(t){g.forEach(this.handlers,function(e){null!==e&&t(e)})};function S(t,n,e){return g.forEach(e,function(e){t=e(t,n)}),t}function E(e){return!(!e||!e.__CANCEL__)}function b(n,r){g.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}function R(e,t,n,r,o){return function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,o)}var k,I,O,w=e,T=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],D=g.isStandardBrowserEnv()?(I=/(msie|trident)/i.test(navigator.userAgent),O=document.createElement("a"),k=_(window.location.href),function(e){var t=g.isString(e)?_(e):e;return t.protocol===k.protocol&&t.host===k.host}):function(){return!0};function _(e){var t=e;return I&&(O.setAttribute("href",t),t=O.href),O.setAttribute("href",t),{href:O.href,protocol:O.protocol?O.protocol.replace(/:$/,""):"",host:O.host,search:O.search?O.search.replace(/^\?/,""):"",hash:O.hash?O.hash.replace(/^#/,""):"",hostname:O.hostname,port:O.port,pathname:"/"===O.pathname.charAt(0)?O.pathname:"/"+O.pathname}}function A(s){return new Promise(function(n,r){var o=s.data,i=s.headers;g.isFormData(o)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(s.auth){var e=s.auth.username||"",t=s.auth.password||"";i.Authorization="Basic "+btoa(e+":"+t)}if(a.open(s.method.toUpperCase(),m(s.url,s.params,s.paramsSerializer),!0),a.timeout=s.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?function(e){var t,n,r,o={};return e&&g.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=g.trim(e.substr(0,r)).toLowerCase(),n=g.trim(e.substr(r+1)),t){if(o[t]&&0<=T.indexOf(t))return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}}),o}(a.getAllResponseHeaders()):null,t={data:s.responseType&&"text"!==s.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:e,config:s,request:a};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(R("Request failed with status code "+n.status,n.config,null,n.request,n))}(n,r,t),a=null}},a.onabort=function(){a&&(r(R("Request aborted",s,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(R("Network Error",s,null,a)),a=null},a.ontimeout=function(){r(R("timeout of "+s.timeout+"ms exceeded",s,"ECONNABORTED",a)),a=null},g.isStandardBrowserEnv()){var c=N,u=(s.withCredentials||D(s.url))&&s.xsrfCookieName?c.read(s.xsrfCookieName):void 0;u&&(i[s.xsrfHeaderName]=u)}if("setRequestHeader"in a&&g.forEach(i,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:a.setRequestHeader(t,e)}),s.withCredentials&&(a.withCredentials=!0),s.responseType)try{a.responseType=s.responseType}catch(e){if("json"!==s.responseType)throw e}"function"==typeof s.onDownloadProgress&&a.addEventListener("progress",s.onDownloadProgress),"function"==typeof s.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(e){a&&(a.abort(),r(e),a=null)}),void 0===o&&(o=null),a.send(o)})}var N=g.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),g.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),g.isString(r)&&a.push("path="+r),g.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},C={"Content-Type":"application/x-www-form-urlencoded"};function x(e,t){!g.isUndefined(e)&&g.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var j,P={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?j=A:"undefined"!=typeof XMLHttpRequest&&(j=A),j),transformRequest:[function(e,t){return b(t,"Accept"),b(t,"Content-Type"),g.isFormData(e)||g.isArrayBuffer(e)||g.isBuffer(e)||g.isStream(e)||g.isFile(e)||g.isBlob(e)?e:g.isArrayBufferView(e)?e.buffer:g.isURLSearchParams(e)?(x(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):g.isObject(e)?(x(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};P.headers={common:{Accept:"application/json, text/plain, */*"}},g.forEach(["delete","get","head"],function(e){P.headers[e]={}}),g.forEach(["post","put","patch"],function(e){P.headers[e]=g.merge(C)});var F=P;function U(e){e.cancelToken&&e.cancelToken.throwIfRequested()}function L(t){return U(t),t.baseURL&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(t.url)&&(t.url=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(t.baseURL,t.url)),t.headers=t.headers||{},t.data=S(t.data,t.headers,t.transformRequest),t.headers=g.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),g.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||F.adapter)(t).then(function(e){return U(t),e.data=S(e.data,e.headers,t.transformResponse),e},function(e){return E(e)||(U(t),e&&e.response&&(e.response.data=S(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}function M(t,n){n=n||{};var r={};return g.forEach(["url","method","params","data"],function(e){void 0!==n[e]&&(r[e]=n[e])}),g.forEach(["headers","auth","proxy"],function(e){g.isObject(n[e])?r[e]=g.deepMerge(t[e],n[e]):void 0!==n[e]?r[e]=n[e]:g.isObject(t[e])?r[e]=g.deepMerge(t[e]):void 0!==t[e]&&(r[e]=t[e])}),g.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(e){void 0!==n[e]?r[e]=n[e]:void 0!==t[e]&&(r[e]=t[e])}),r}function B(e){this.defaults=e,this.interceptors={request:new w,response:new w}}B.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=arguments[0]:e=e||{},(e=M(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var n=[L,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},B.prototype.getUri=function(e){return e=M(this.defaults,e),m(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},g.forEach(["delete","get","head","options"],function(n){B.prototype[n]=function(e,t){return this.request(g.merge(t||{},{method:n,url:e}))}}),g.forEach(["post","put","patch"],function(r){B.prototype[r]=function(e,t,n){return this.request(g.merge(n||{},{method:r,url:e,data:t}))}});var G=B;function K(e){this.message=e}K.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},K.prototype.__CANCEL__=!0;var z=K;function H(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new z(e),t(n.reason))})}H.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},H.source=function(){var t;return{token:new H(function(e){t=e}),cancel:t}};var q=H;function V(e){var t=new G(e),n=s(G.prototype.request,t);return g.extend(n,G.prototype,t),g.extend(n,t),n}var Q=V(F);Q.Axios=G,Q.create=function(e){return V(M(Q.defaults,e))},Q.Cancel=z,Q.CancelToken=q,Q.isCancel=E,Q.all=function(e){return Promise.all(e)},Q.spread=function(t){return function(e){return t.apply(null,e)}};var J=Q,W=Q;J.default=W;function X(e){try{return!!e()}catch(e){return!0}}function Y(e){return te.call(e).slice(8,-1)}function $(e){if(null==e)throw TypeError("Can't call method on "+e);return e}function Z(e){return re($(e))}var ee=J,te={}.toString,ne="".split,re=X(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==Y(e)?ne.call(e,""):Object(e)}:Object,oe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ie(e,t){return e(t={exports:{}},t.exports),t.exports}function ae(e){return e&&e.Math==Math&&e}function ce(e){return"object"==typeof e?null!==e:"function"==typeof e}function ue(e){return De?Te.createElement(e):{}}function se(e){if(!ce(e))throw TypeError(String(e)+" is not an object");return e}function le(e,t){if(!ce(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!ce(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!ce(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!ce(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}function fe(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function pe(t,n){try{Ce(Oe,t,n)}catch(e){Oe[t]=n}return n}function de(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++je+Pe).toString(36)}function he(e){return Le[e]||(Le[e]=Fe&&Ue[e]||(Fe?Ue:de)("Symbol."+e))}function ye(e,t){return Me.call(e,t)}function ge(e){return isNaN(e=+e)?0:(0<e?Ge:Be)(e)}function ve(e){return 0<e?Ke(ge(e),9007199254740991):0}function me(c){return function(e,t,n){var r,o=Z(e),i=ve(o.length),a=function(e,t){var n=ge(e);return n<0?ze(n+t,0):He(n,t)}(n,i);if(c&&t!=t){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((c||a in o)&&o[a]===t)return c||a||0;return!c&&-1}}function Se(e,t){var n,r=Z(e),o=0,i=[];for(n in r)!ye(Ve,n)&&ye(r,n)&&i.push(n);for(;t.length>o;)ye(r,n=t[o++])&&(~Qe(i,n)||i.push(n));return i}function Ee(e){return"function"==typeof e?e:void 0}function be(e,t){return arguments.length<2?Ee(Ye[e])||Ee(Oe[e]):Ye[e]&&Ye[e][t]||Oe[e]&&Oe[e][t]}function Re(e){return Ze[e]||(Ze[e]=de(e))}function ke(){}var Ie="object",Oe=ae(typeof globalThis==Ie&&globalThis)||ae(typeof window==Ie&&window)||ae(typeof self==Ie&&self)||ae(typeof oe==Ie&&oe)||Function("return this")(),we=!X(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Te=Oe.document,De=ce(Te)&&ce(Te.createElement),_e=!we&&!X(function(){return 7!=Object.defineProperty(ue("div"),"a",{get:function(){return 7}}).a}),Ae=Object.defineProperty,Ne={f:we?Ae:function(e,t,n){if(se(e),t=le(t,!0),se(n),_e)try{return Ae(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ce=we?function(e,t,n){return Ne.f(e,t,fe(1,n))}:function(e,t,n){return e[t]=n,e},xe=ie(function(e){var t="__core-js_shared__",n=Oe[t]||pe(t,{});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),je=0,Pe=Math.random(),Fe=!!Object.getOwnPropertySymbols&&!X(function(){return!String(Symbol())}),Ue=Oe.Symbol,Le=xe("wks"),Me={}.hasOwnProperty,Be=Math.ceil,Ge=Math.floor,Ke=Math.min,ze=Math.max,He=Math.min,qe={includes:me(!0),indexOf:me(!1)},Ve={},Qe=qe.indexOf,Je=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],We=Object.keys||function(e){return Se(e,Je)},Xe=we?Object.defineProperties:function(e,t){se(e);for(var n,r=We(t),o=r.length,i=0;i<o;)Ne.f(e,n=r[i++],t[n]);return e},Ye=Oe,$e=be("document","documentElement"),Ze=xe("keys"),et=Re("IE_PROTO"),tt="prototype",nt=function(){var e,t=ue("iframe"),n=Je.length,r="script";for(t.style.display="none",$e.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object</"+r+">"),e.close(),nt=e.F;n--;)delete nt[tt][Je[n]];return nt()},rt=Object.create||function(e,t){var n;return null!==e?(ke[tt]=se(e),n=new ke,ke[tt]=null,n[et]=e):n=nt(),void 0===t?n:Xe(n,t)};Ve[et]=!0;var ot=he("unscopables"),it=Array.prototype;null==it[ot]&&Ce(it,ot,rt(null));function at(e){it[ot][e]=!0}var ct,ut,st,lt={},ft=xe("native-function-to-string",Function.toString),pt=Oe.WeakMap,dt="function"==typeof pt&&/native code/.test(ft.call(pt)),ht=Oe.WeakMap;if(dt){var yt=new ht,gt=yt.get,vt=yt.has,mt=yt.set;ct=function(e,t){return mt.call(yt,e,t),t},ut=function(e){return gt.call(yt,e)||{}},st=function(e){return vt.call(yt,e)}}else{var St=Re("state");Ve[St]=!0,ct=function(e,t){return Ce(e,St,t),t},ut=function(e){return ye(e,St)?e[St]:{}},st=function(e){return ye(e,St)}}function Et(e,t){for(var n=Ut(t),r=Ne.f,o=Ct.f,i=0;i<n.length;i++){var a=n[i];ye(e,a)||r(e,a,o(t,a))}}function bt(e,t){var n=Bt[Mt(e)];return n==Kt||n!=Gt&&("function"==typeof t?X(t):!!t)}function Rt(e,t){var n,r,o,i,a,c=e.target,u=e.global,s=e.stat;if(n=u?Oe:s?Oe[c]||pe(c,{}):(Oe[c]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=Ht(n,r))&&a.value:n[r],!zt(u?r:c+(s?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Et(i,o)}(e.sham||o&&o.sham)&&Ce(i,"sham",!0),xt(n,r,i,e)}}function kt(e){return Object($(e))}var It,Ot,wt,Tt={set:ct,get:ut,has:st,enforce:function(e){return st(e)?ut(e):ct(e,{})},getterFor:function(n){return function(e){var t;if(!ce(e)||(t=ut(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}},Dt={}.propertyIsEnumerable,_t=Object.getOwnPropertyDescriptor,At={f:_t&&!Dt.call({1:2},1)?function(e){var t=_t(this,e);return!!t&&t.enumerable}:Dt},Nt=Object.getOwnPropertyDescriptor,Ct={f:we?Nt:function(e,t){if(e=Z(e),t=le(t,!0),_e)try{return Nt(e,t)}catch(e){}if(ye(e,t))return fe(!At.f.call(e,t),e[t])}},xt=ie(function(e){var t=Tt.get,c=Tt.enforce,u=String(ft).split("toString");xe("inspectSource",function(e){return ft.call(e)}),(e.exports=function(e,t,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||ye(n,"name")||Ce(n,"name",t),c(n).source=u.join("string"==typeof t?t:"")),e!==Oe?(o?!a&&e[t]&&(i=!0):delete e[t],i?e[t]=n:Ce(e,t,n)):i?e[t]=n:pe(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||ft.call(this)})}),jt=Je.concat("length","prototype"),Pt={f:Object.getOwnPropertyNames||function(e){return Se(e,jt)}},Ft={f:Object.getOwnPropertySymbols},Ut=be("Reflect","ownKeys")||function(e){var t=Pt.f(se(e)),n=Ft.f;return n?t.concat(n(e)):t},Lt=/#|\.prototype\./,Mt=bt.normalize=function(e){return String(e).replace(Lt,".").toLowerCase()},Bt=bt.data={},Gt=bt.NATIVE="N",Kt=bt.POLYFILL="P",zt=bt,Ht=Ct.f,qt=!X(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Vt=Re("IE_PROTO"),Qt=Object.prototype,Jt=qt?Object.getPrototypeOf:function(e){return e=kt(e),ye(e,Vt)?e[Vt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Qt:null},Wt=he("iterator"),Xt=!1;[].keys&&("next"in(wt=[].keys())?(Ot=Jt(Jt(wt)))!==Object.prototype&&(It=Ot):Xt=!0),null==It&&(It={}),ye(It,Wt)||Ce(It,Wt,function(){return this});function Yt(e,t,n){e&&!ye(e=n?e:e.prototype,rn)&&nn(e,rn,{configurable:!0,value:t})}function $t(){return this}function Zt(){return this}function en(e,t,n,r,o,i,a){function c(e){if(e===o&&y)return y;if(!un&&e in d)return d[e];switch(e){case"keys":case ln:case fn:return function(){return new n(this,e)}}return function(){return new n(this)}}!function(e,t,n){var r=t+" Iterator";e.prototype=rt(on,{next:fe(1,n)}),Yt(e,r,!1),lt[r]=$t}(n,t,r);var u,s,l,f=t+" Iterator",p=!1,d=e.prototype,h=d[sn]||d["@@iterator"]||o&&d[o],y=!un&&h||c(o),g="Array"==t&&d.entries||h;if(g&&(u=Jt(g.call(new e)),cn!==Object.prototype&&u.next&&(Jt(u)!==cn&&(an?an(u,cn):"function"!=typeof u[sn]&&Ce(u,sn,Zt)),Yt(u,f,!0))),o==ln&&h&&h.name!==ln&&(p=!0,y=function(){return h.call(this)}),d[sn]!==y&&Ce(d,sn,y),lt[t]=y,o)if(s={values:c(ln),keys:i?y:c("keys"),entries:c(fn)},a)for(l in s)!un&&!p&&l in d||xt(d,l,s[l]);else Rt({target:t,proto:!0,forced:un||p},s);return s}var tn={IteratorPrototype:It,BUGGY_SAFARI_ITERATORS:Xt},nn=Ne.f,rn=he("toStringTag"),on=tn.IteratorPrototype,an=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),r=e instanceof Array}catch(e){}return function(e,t){return se(e),function(e){if(!ce(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(t),r?n.call(e,t):e.__proto__=t,e}}():void 0),cn=tn.IteratorPrototype,un=tn.BUGGY_SAFARI_ITERATORS,sn=he("iterator"),ln="values",fn="entries",pn="Array Iterator",dn=Tt.set,hn=Tt.getterFor(pn),yn=en(Array,"Array",function(e,t){dn(this,{type:pn,target:Z(e),index:0,kind:t})},function(){var e=hn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values");lt.Arguments=lt.Array,at("keys"),at("values"),at("entries");function gn(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),vn))?n:mn?Y(t):"Object"==(r=Y(t))&&"function"==typeof t.callee?"Arguments":r}var vn=he("toStringTag"),mn="Arguments"==Y(function(){return arguments}()),Sn={};Sn[he("toStringTag")]="z";var En="[object z]"!==String(Sn)?function(){return"[object "+gn(this)+"]"}:Sn.toString,bn=Object.prototype;En!==bn.toString&&xt(bn,"toString",En,{unsafe:!0});function Rn(c){return function(e,t){var n,r,o=String($(e)),i=ge(t),a=o.length;return i<0||a<=i?c?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===a||(r=o.charCodeAt(i+1))<56320||57343<r?c?o.charAt(i):n:c?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}}var kn={codeAt:Rn(!1),charAt:Rn(!0)},In=kn.charAt,On="String Iterator",wn=Tt.set,Tn=Tt.getterFor(On);en(String,"String",function(e){wn(this,{type:On,string:String(e),index:0})},function(){var e,t=Tn(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=In(n,r),t.index+=e.length,{value:e,done:!1})});var Dn,_n,An=RegExp.prototype.exec,Nn=String.prototype.replace,Cn=An,xn=(Dn=/a/,_n=/b*/g,An.call(Dn,"a"),An.call(_n,"a"),0!==Dn.lastIndex||0!==_n.lastIndex),jn=void 0!==/()??/.exec("")[1];(xn||jn)&&(Cn=function(e){var t,n,r,o,i=this;return jn&&(n=new RegExp("^"+i.source+"$(?!\\s)",function(){var e=se(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}.call(i))),xn&&(t=i.lastIndex),r=An.call(i,e),xn&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),jn&&r&&1<r.length&&Nn.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});function Pn(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}function Fn(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Y(e))throw TypeError("RegExp#exec called on incompatible receiver");return Un.call(e,t)}var Un=Cn,Ln=he("species"),Mn=!X(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Bn=!X(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),Gn=he("match"),Kn=he("species"),zn=kn.charAt,Hn=[].push,qn=Math.min,Vn=4294967295,Qn=!X(function(){return!RegExp(Vn,"y")});!function(n,e,t,r){var o=he(n),i=!X(function(){var e={};return e[o]=function(){return 7},7!=""[n](e)}),a=i&&!X(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[Ln]=function(){return t}),t[o](""),!e});if(!i||!a||"replace"===n&&!Mn||"split"===n&&!Bn){var c=/./[o],u=t(o,""[n],function(e,t,n,r,o){return t.exec===Un?i&&!o?{done:!0,value:c.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),s=u[0],l=u[1];xt(String.prototype,n,s),xt(RegExp.prototype,o,2==e?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)}),r&&Ce(RegExp.prototype[o],"sham",!0)}}("split",2,function(o,m,S){var E;return E="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var n=String($(this)),r=void 0===t?Vn:t>>>0;if(0==r)return[];if(void 0===e)return[n];if(!function(e){var t;return ce(e)&&(void 0!==(t=e[Gn])?!!t:"RegExp"==Y(e))}(e))return m.call(n,e,r);for(var o,i,a,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),s=0,l=new RegExp(e.source,u+"g");(o=Un.call(l,n))&&!(s<(i=l.lastIndex)&&(c.push(n.slice(s,o.index)),1<o.length&&o.index<n.length&&Hn.apply(c,o.slice(1)),a=o[0].length,s=i,c.length>=r));)l.lastIndex===o.index&&l.lastIndex++;return s===n.length?!a&&l.test("")||c.push(""):c.push(n.slice(s)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:m.call(this,e,t)}:m,[function(e,t){var n=$(this),r=null==e?void 0:e[o];return void 0!==r?r.call(e,n,t):E.call(String(n),e,t)},function(e,t){var n=S(E,e,this,t,E!==m);if(n.done)return n.value;var r=se(e),o=String(this),i=function(e,t){var n,r=se(e).constructor;return void 0===r||null==(n=se(r)[Kn])?t:Pn(n)}(r,RegExp),a=r.unicode,c=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Qn?"y":"g"),u=new i(Qn?r:"^(?:"+r.source+")",c),s=void 0===t?Vn:t>>>0;if(0==s)return[];if(0===o.length)return null===Fn(u,o)?[o]:[];for(var l,f,p=0,d=0,h=[];d<o.length;){u.lastIndex=Qn?d:0;var y,g=Fn(u,Qn?o:o.slice(d));if(null===g||(y=qn(ve(u.lastIndex+(Qn?0:d)),o.length))===p)l=o,d=(f=d)+(a?zn(l,f).length:1);else{if(h.push(o.slice(p,d)),h.length===s)return h;for(var v=1;v<=g.length-1;v++)if(h.push(g[v]),h.length===s)return h;d=p=y}}return h.push(o.slice(p)),h}]},!Qn);function Jn(e,t,n){for(var r in t)xt(e,r,t[r],n);return e}function Wn(r,o,e){if(Pn(r),void 0===o)return r;switch(e){case 0:return function(){return r.call(o)};case 1:return function(e){return r.call(o,e)};case 2:return function(e,t){return r.call(o,e,t)};case 3:return function(e,t,n){return r.call(o,e,t,n)}}return function(){return r.apply(o,arguments)}}function Xn(t,e,n,r){try{return r?e(se(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&se(o.call(t)),e}}function Yn(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}var $n=!X(function(){return Object.isExtensible(Object.preventExtensions({}))}),Zn=ie(function(e){function n(e){t(e,r,{value:{objectID:"O"+ ++o,weakData:{}}})}var t=Ne.f,r=de("meta"),o=0,i=Object.isExtensible||function(){return!0},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!ce(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ye(e,r)){if(!i(e))return"F";if(!t)return"E";n(e)}return e[r].objectID},getWeakData:function(e,t){if(!ye(e,r)){if(!i(e))return!0;if(!t)return!1;n(e)}return e[r].weakData},onFreeze:function(e){return $n&&a.REQUIRED&&i(e)&&!ye(e,r)&&n(e),e}};Ve[r]=!0}),er=(Zn.REQUIRED,Zn.fastKey,Zn.getWeakData,Zn.onFreeze,he("iterator")),tr=Array.prototype,nr=he("iterator"),rr=ie(function(e){function p(e,t){this.stopped=e,this.result=t}(e.exports=function(e,t,n,r,o){var i,a,c,u,s,l,f=Wn(t,n,r?2:1);if(o)i=e;else{if("function"!=typeof(a=function(e){if(null!=e)return e[nr]||e["@@iterator"]||lt[gn(e)]}(e)))throw TypeError("Target is not iterable");if(function(e){return void 0!==e&&(lt.Array===e||tr[er]===e)}(a)){for(c=0,u=ve(e.length);c<u;c++)if((s=r?f(se(l=e[c])[0],l[1]):f(e[c]))&&s instanceof p)return s;return new p(!1)}i=a.call(e)}for(;!(l=i.next()).done;)if((s=Xn(i,f,l.value,r))&&s instanceof p)return s;return new p(!1)}).stop=function(e){return new p(!0,e)}}),or=he("iterator"),ir=!1;try{var ar=0,cr={next:function(){return{done:!!ar++}},return:function(){ir=!0}};cr[or]=function(){return this},Array.from(cr,function(){throw 2})}catch(e){}function ur(r,e,t,o,i){function n(e){var n=c[e];xt(c,e,"add"==e?function(e){return n.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ce(e))&&n.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!ce(e)?void 0:n.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ce(e))&&n.call(this,0===e?0:e)}:function(e,t){return n.call(this,0===e?0:e,t),this})}var a=Oe[r],c=a&&a.prototype,u=a,s=o?"set":"add",l={};if(zt(r,"function"!=typeof a||!(i||c.forEach&&!X(function(){(new a).entries().next()}))))u=t.getConstructor(e,r,o,s),Zn.REQUIRED=!0;else if(zt(r,!0)){var f=new u,p=f[s](i?{}:-0,1)!=f,d=X(function(){f.has(1)}),h=function(e,t){if(!t&&!ir)return!1;var n=!1;try{var r={};r[or]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}(function(e){new a(e)}),y=!i&&X(function(){for(var e=new a,t=5;t--;)e[s](t,t);return!e.has(-0)});h||(((u=e(function(e,t){Yn(e,u,r);var n=function(e,t,n){var r,o;return an&&"function"==typeof(r=t.constructor)&&r!==n&&ce(o=r.prototype)&&o!==n.prototype&&an(e,o),e}(new a,e,u);return null!=t&&rr(t,n[s],n,o),n})).prototype=c).constructor=u),(d||y)&&(n("delete"),n("has"),o&&n("get")),(y||p)&&n(s),i&&c.clear&&delete c.clear}return l[r]=u,Rt({global:!0,forced:u!=a},l),Yt(u,r),i||t.setStrong(u,r,o),u}function sr(e,t){var n;return dr(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!dr(n.prototype)?ce(n)&&null===(n=n[hr])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}function lr(d){var h=1==d,y=2==d,g=3==d,v=4==d,m=6==d,S=5==d||m;return function(e,t,n,r){for(var o,i,a=kt(e),c=re(a),u=Wn(t,n,3),s=ve(c.length),l=0,f=r||sr,p=h?f(e,s):y?f(e,0):void 0;l<s;l++)if((S||l in c)&&(i=u(o=c[l],l,a),d))if(h)p[l]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return l;case 2:yr.call(p,o)}else if(v)return!1;return m?-1:g||v?v:p}}function fr(e){return e.frozen||(e.frozen=new kr)}function pr(e,t){return Er(e.entries,function(e){return e[0]===t})}var dr=Array.isArray||function(e){return"Array"==Y(e)},hr=he("species"),yr=[].push,gr={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6)},vr=Zn.getWeakData,mr=Tt.set,Sr=Tt.getterFor,Er=gr.find,br=gr.findIndex,Rr=0,kr=function(){this.entries=[]};kr.prototype={get:function(e){var t=pr(this,e);if(t)return t[1]},has:function(e){return!!pr(this,e)},set:function(e,t){var n=pr(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(t){var e=br(this.entries,function(e){return e[0]===t});return~e&&this.entries.splice(e,1),!!~e}};var Ir={getConstructor:function(e,n,r,o){function i(e,t,n){var r=c(e),o=vr(se(t),!0);return!0===o?fr(r).set(t,n):o[r.id]=n,e}var a=e(function(e,t){Yn(e,a,n),mr(e,{type:n,id:Rr++,frozen:void 0}),null!=t&&rr(t,e[o],e,r)}),c=Sr(n);return Jn(a.prototype,{delete:function(e){var t=c(this);if(!ce(e))return!1;var n=vr(e);return!0===n?fr(t).delete(e):n&&ye(n,t.id)&&delete n[t.id]},has:function(e){var t=c(this);if(!ce(e))return!1;var n=vr(e);return!0===n?fr(t).has(e):n&&ye(n,t.id)}}),Jn(a.prototype,r?{get:function(e){var t=c(this);if(ce(e)){var n=vr(e);return!0===n?fr(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return i(this,e,t)}}:{add:function(e){return i(this,e,!0)}}),a}},Or=(ie(function(e){function t(t){return function(e){return t(this,arguments.length?e:void 0)}}var r,o=Tt.enforce,n=!Oe.ActiveXObject&&"ActiveXObject"in Oe,i=Object.isExtensible,a=e.exports=ur("WeakMap",t,Ir,!0,!0);if(dt&&n){r=Ir.getConstructor(t,"WeakMap",!0),Zn.REQUIRED=!0;var c=a.prototype,u=c.delete,s=c.has,l=c.get,f=c.set;Jn(c,{delete:function(e){if(!ce(e)||i(e))return u.call(this,e);var t=o(this);return t.frozen||(t.frozen=new r),u.call(this,e)||t.frozen.delete(e)},has:function(e){if(!ce(e)||i(e))return s.call(this,e);var t=o(this);return t.frozen||(t.frozen=new r),s.call(this,e)||t.frozen.has(e)},get:function(e){if(!ce(e)||i(e))return l.call(this,e);var t=o(this);return t.frozen||(t.frozen=new r),s.call(this,e)?l.call(this,e):t.frozen.get(e)},set:function(e,t){if(ce(e)&&!i(e)){var n=o(this);n.frozen||(n.frozen=new r),s.call(this,e)?f.call(this,e,t):n.frozen.set(e,t)}else f.call(this,e,t);return this}})}}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),wr=he("iterator"),Tr=he("toStringTag"),Dr=yn.values;for(var _r in Or){var Ar=Oe[_r],Nr=Ar&&Ar.prototype;if(Nr){if(Nr[wr]!==Dr)try{Ce(Nr,wr,Dr)}catch(e){Nr[wr]=Dr}if(Nr[Tr]||Ce(Nr,Tr,_r),Or[_r])for(var Cr in yn)if(Nr[Cr]!==yn[Cr])try{Ce(Nr,Cr,yn[Cr])}catch(e){Nr[Cr]=yn[Cr]}}}var xr=function(){function e(){i(this,e)}return n(e,null,[{key:"write",value:function(){var e;Ur.isDebugMode&&(e=console).log.apply(e,arguments)}},{key:"error",value:function(){var e;Ur.isDebugMode&&(e=console).error.apply(e,arguments)}}]),e}(),jr=new WeakMap,Pr=null,Fr=null,Ur=function(){function o(){i(this,o)}return n(o,null,[{key:"setDebugMode",value:function(){jr.set(this,!0)}},{key:"unsetDebugMode",value:function(){jr.set(this,!1)}},{key:"getParamsFromCallback",value:function(e,t){return{result:e,err:t,reversed:!1}}},{key:"callback",value:function(e,t,n){if(n){var r=o.getParamsFromCallback(e,t);r.err&&xr.error(r.err),r.reversed?n(r.err,r.result):n(r.result,r.err)}}},{key:"isSendBirdSdkCompatible",value:function(e){var t="3.0.55".split("."),n=e.split(".");if(t.length!==n.length)return!1;for(var r in t)if(parseInt(t[r])>parseInt(n[r]))return!1;return!0}},{key:"sendBird",get:function(){return Pr},set:function(e){Pr=e}},{key:"isDebugMode",get:function(){return jr.get(this)}},{key:"apiHost",get:function(){if(!Fr){var e=Pr.getInstance();Fr="https://desk-api-".concat(e.getApplicationId(),".sendbird.com/sapi")}return Fr},set:function(e){Fr=e}},{key:"sdkVersion",get:function(){return"1.0.9"}},{key:"minSendBirdVersion",get:function(){return"3.0.55"}}]),o}(),Lr=Ne.f,Mr=Function.prototype,Br=Mr.toString,Gr=/^\s*function ([^ (]*)/;!we||"name"in Mr||Lr(Mr,"name",{configurable:!0,get:function(){try{return Br.call(this).match(Gr)[1]}catch(e){return""}}});function Kr(e,t,n){var r=le(t);r in e?Ne.f(e,r,fe(0,n)):e[r]=n}function zr(t){return!X(function(){var e=[];return(e.constructor={})[Xr]=function(){return{foo:1}},1!==e[t](Boolean).foo})}function Hr(e){if(!ce(e))return!1;var t=e[Yr];return void 0!==t?!!t:dr(e)}var qr={ERROR_SENDBIRD_SDK_MISSING:{code:100,message:"SendBird SDK is missing."},ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED:{code:101,message:"This SendBird SDK version is not supported."},ERROR_SENDBIRD_DESK_INIT_MISSING:{code:102,message:"SendBird Desk SDK is not initialized. It should be done before authentication."},ERROR_SENDBIRD_SDK_MESSAGE_LIST_FAILED:{code:200,message:"Cannot load messages in SDK client."},ERROR_INVALID_PARAMETER:{code:403,message:"Invalid parameter."},ERROR_DATA_NOT_FOUND:{code:404,message:"Data not found."},ERROR_REQUEST_TIMEOUT:{code:409,message:"Request timed-out."},ERROR_REQUEST:{code:500,message:"Request failed."},ERROR_REQUEST_CANCELED:{code:501,message:"Request canceled."}},Vr=function(){function r(e,t){var n;return i(this,r),n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}(this,o(r).call(this,e)),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(u(n),n.constructor):n.stack=new Error(e).stack,n.name="SendBirdDeskError",n.message=e,n.code=t,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,t(Error)),n(r,null,[{key:"create",value:function(e){return e?new r(e.message,e.code):new Error("SendBirdDeskError type missing.")}},{key:"throw",value:function(e){if(e)throw new r(e.message,e.code)}},{key:"Type",get:function(){return qr}}]),r}(),Qr=new Ye.WeakMap,Jr=function(){function e(){i(this,e)}return n(e,null,[{key:"connect",value:function(e,t,n){var r=this;"function"==typeof t&&(n=t,t="");var o=Ur.sendBird;if(o){var i=o.getInstance(),a="".concat(Ur.apiHost,"/customers/auth/"),c={sendbirdAccessToken:t||"","content-type":"application/json"},u={sendbirdAppId:i.getApplicationId(),sendbirdId:e};ee.create({headers:c}).post(a,u).then(function(e){Qr.set(r,{deskToken:e.data.token}),xr.write("[REQ] connection established"),Ur.callback(e,null,n)}).catch(function(e){Ur.callback(null,e,n)})}else Ur.callback(null,Vr.create(Vr.Type.ERROR_SENDBIRD_SDK_MISSING),n)}},{key:"header",get:function(){return{sendbirdDeskToken:Qr.get(this).deskToken,"content-type":"application/json"}}},{key:"getParam",get:function(){var e=Ur.sendBird;if(e){var t=e.getInstance();return"sendbirdAppId=".concat(t.getApplicationId())}return""}},{key:"postParam",get:function(){var e=Ur.sendBird;return e?{sendbirdAppId:e.getInstance().getApplicationId()}:{}}}]),e}(),Wr=function(){function t(e){i(this,t),this.fetchFromJSON(e)}return n(t,[{key:"fetchFromJSON",value:function(e){this.userId=e?e.user:0,this.name=e?e.displayName:"",this.profileUrl=e?e.photoThumbnailUrl:""}}]),t}(),Xr=he("species"),Yr=he("isConcatSpreadable"),$r=9007199254740991,Zr="Maximum allowed index exceeded",eo=!X(function(){var e=[];return e[Yr]=!1,e.concat()[0]!==e}),to=zr("concat");Rt({target:"Array",proto:!0,forced:!eo||!to},{concat:function(e){var t,n,r,o,i,a=kt(this),c=sr(a,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(Hr(i=-1===t?a:arguments[t])){if(o=ve(i.length),$r<u+o)throw TypeError(Zr);for(n=0;n<o;n++,u++)n in i&&Kr(c,u,i[n])}else{if($r<=u)throw TypeError(Zr);Kr(c,u++,i)}return c.length=u,c}});var no,ro,oo=[].join,io=re!=Object,ao=(no=",",!(ro=[]["join"])||!X(function(){ro.call(null,no||function(){throw 1},1)}));Rt({target:"Array",proto:!0,forced:io||ao},{join:function(e){return oo.call(Z(this),void 0===e?",":e)}});var co=gr.map;Rt({target:"Array",proto:!0,forced:!zr("map")},{map:function(e,t){return co(this,e,1<arguments.length?t:void 0)}});var uo=X(function(){We(1)});Rt({target:"Object",stat:!0,forced:uo},{keys:function(e){return We(kt(e))}});function so(e,t){var n=Ur.sendBird;if(n){var r=n.getInstance().GroupChannel.createMyGroupChannelListQuery();r.customTypesFilter=[po],r.channelUrlsFilter=e,r.includeEmpty=!0,r.next(t)}else Ur.callback(null,Vr.create(Vr.Type.ERROR_SENDBIRD_SDK_MISSING),t)}function lo(t,i){var a=yo.Status.OPEN;yo.isStatus(t.status)&&(a=t.status);var e=a!==yo.Status.CLOSED?"status=ASSIGNED&status=UNASSIGNED":"status=CLOSED",n="".concat(Ur.apiHost,"/tickets/")+"?".concat(Jr.getParam,"&limit=").concat(t.limit||yo.defaultLimit,"&offset=").concat(t.offset||0)+"&".concat(e,"&order=").concat(t.order||"-updated_at");t.channelUrl&&(n+="&channelUrl=".concat(t.channelUrl)),t.customFieldFilter&&"object"===p(t.customFieldFilter)&&(n+="&customFields="+encodeURIComponent(Object.keys(t.customFieldFilter).map(function(e){return"".concat(e,":").concat(encodeURIComponent(t.customFieldFilter[e]))}).join(","))),ee.create({headers:Jr.header}).get(n).then(function(e){if(e&&e.data){var o=[],t=[];for(var n in e.data.results){var r=new yo(e.data.results[n]);ho[r.channelUrl]=r,t.push(r.channelUrl),o.push(r)}so(t,function(e,t){var n=Ur.getParamsFromCallback(e,t),r=n.result;n.err||o.forEach(function(e){for(var t in r){var n=r[t];if(e.channelUrl===n.url){e.channel=n;break}}}),xr.write("[REQ] ".concat(a," ticket list:"),o),Ur.callback(o,n.err,i)})}else Ur.callback([],null,i)}).catch(function(e){return Ur.callback(null,e,i)})}var fo=function(){function e(){i(this,e)}return n(e,null,[{key:"CustomType",get:function(){return{RICH_MESSAGE:"SENDBIRD_DESK_RICH_MESSAGE",ADMIN_MESSAGE:"SENDBIRD_DESK_ADMIN_MESSAGE_CUSTOM_TYPE"}}},{key:"DataType",get:function(){return{TICKET_INQUIRE_CLOSURE:"SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE",TICKET_ASSIGN:"TICKET_ASSIGN",TICKET_TRANSFER:"TICKET_TRANSFER",TICKET_CLOSE:"TICKET_CLOSE",TICKET_FEEDBACK:"SENDBIRD_DESK_CUSTOMER_SATISFACTION",URL_PREVIEW:"SENDBIRD_DESK_URL_PREVIEW"}}},{key:"ClosureState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED",DECLINED:"DECLINED"}}},{key:"FeedbackState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED"}}},{key:"UrlRegExp",get:function(){return/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?/gi}}]),e}(),po="SENDBIRD_DESK_CHANNEL_CUSTOM_TYPE",ho={},yo=function(){function f(e){i(this,f),this.fetchFromJSON(e)}return n(f,[{key:"fetchFromJSON",value:function(e){if(this.id=e?e.id:0,this.title=e?e.channelName:"",this.status=e?e.status:"",this.info=e&&e.info?JSON.parse(e.info):null,this.agent=e&&e.recentAssignment&&e.recentAssignment.agent?new Wr(e.recentAssignment.agent):null,this.customer=e?e.customer:null,this.customFields={},this.channel=this.channel,this.channelUrl=e?e.channelUrl:null,this.updatedAt=e?new Date(e.updatedAt).getTime():(new Date).getTime(),e&&e.customFields)for(var t=e.customFields,n=0;n<t.length;n++){var r=t[n].key,o=t[n].value;this.customFields[r]=o}}},{key:"refresh",value:function(r){var o=this,e="".concat(Ur.apiHost,"/tickets/").concat(this.id,"/?").concat(Jr.getParam);ee.create({headers:Jr.header}).get(e).then(function(e){o.fetchFromJSON(e),so([o.channelUrl],function(e,t){var n=Ur.getParamsFromCallback(e,t).result;0<n.length&&(o.channel=n[0]),ho[o.channelUrl]=o,xr.write("[REQ] ticket refresh:",o),Ur.callback(o,null,r)})}).catch(function(e){return Ur.callback(null,e,r)})}},{key:"reopen",value:function(r){var o=this,e="".concat(Ur.apiHost,"/tickets/").concat(this.id,"/reopen"),t=Jr.postParam;ee.create({headers:Jr.header}).patch(e,t).then(function(e){e.data.channelUrl?(o.fetchFromJSON(e),so([o.channelUrl],function(e,t){var n=Ur.getParamsFromCallback(e,t).result;0<n.length&&(o.channel=n[0]),ho[o.channelUrl]=o,xr.write("[REQ] ticket reopen:",o),Ur.callback(o,null,r)})):Ur.callback(o,null,r)}).catch(function(e){return Ur.callback(null,e,r)})}}],[{key:"isStatus",value:function(e){for(var t in f.Status)if(f.Status[t]===e)return!0;return!1}},{key:"isDeskCustomType",value:function(e){return e===po}},{key:"clearCache",value:function(e){e?(delete ho[e],xr.write("[SYS] cached ticket for ".concat(e," cleared"))):(ho={},xr.write("[SYS] all cached ticket cleared"))}},{key:"create",value:function(e,t,n,r,o){var i=Ur.sendBird;if(i){if("function"==typeof n&&(o=n,r=n=null),"string"!=typeof e||"string"!=typeof t||n&&"string"!=typeof n||r&&"object"!==p(r)||Array.isArray(r))return void Ur.callback(null,Vr.create(Vr.Type.ERROR_INVALID_PARAMETER),o);var a=i.getInstance(),c="".concat(Ur.apiHost,"/tickets/"),u=Jr.postParam;if(u.channelName=e,n&&(u.groupKey=n),r){var s={};for(var l in r)s[l]="string"==typeof r[l]?r[l]:JSON.stringify(r[l]);u.customFields=JSON.stringify(s)}u.info=JSON.stringify({ticket:{subject:e,requester:{name:t,email:a.getCurrentUserId()}}}),ee.create({headers:Jr.header}).post(c,u).then(function(e){var r=new f(e.data);so([r.channelUrl],function(e,t){var n=Ur.getParamsFromCallback(e,t).result;0<n.length&&(r.channel=n[0]),ho[r.channelUrl]=r,xr.write("[REQ] ticket create:",r),Ur.callback(r,null,o)})}).catch(function(e){return Ur.callback(null,e,o)})}else Ur.callback(null,Vr.create(Vr.Type.ERROR_SENDBIRD_SDK_MISSING),o)}},{key:"getOpenCount",value:function(t){var e="".concat(Ur.apiHost,"/tickets/count/?").concat(Jr.getParam);ee.create({headers:Jr.header}).get(e).then(function(e){return Ur.callback(e,null,t)}).catch(function(e){return Ur.callback(null,e,t)})}},{key:"getByChannelUrl",value:function(o,i){if(ho[o])Ur.callback(ho[o],null,i);else{var e="".concat(Ur.apiHost,"/tickets/?").concat(Jr.getParam,"&limit=10&channelUrl=").concat(o);ee.create({headers:Jr.header}).get(e).then(function(e){var r=null;e&&e.data&&0<e.data.results.length&&(r=new f(e.data.results[0])),r?so([o],function(e,t){var n=Ur.getParamsFromCallback(e,t).result;0<n.length&&(r.channel=n[0]),ho[o]=r,xr.write("[REQ] get ticket for channel ".concat(o,":"),r),Ur.callback(r,null,i)}):Ur.callback(null,Vr.Type.ERROR_DATA_NOT_FOUND,i)}).catch(function(e){return Ur.callback(null,e,i)})}}},{key:"getOpenedList",value:function(e,t,n){"function"==typeof t&&(n=t,t=null),lo({offset:e,customFieldFilter:t,status:this.Status.OPEN},n)}},{key:"getClosedList",value:function(e,t,n){"function"==typeof t&&(n=t,t=null),lo({offset:e,customFieldFilter:t,status:this.Status.CLOSED},n)}},{key:"getUrlPreview",value:function(e,t){var n="".concat(Ur.apiHost,"/tickets/url_preview/"),r=Jr.postParam;r.url=e,ee.create({headers:Jr.header}).post(n,r).then(function(e){return Ur.callback(e,null,t)}).catch(function(e){return Ur.callback(null,e,t)})}},{key:"confirmEndOfChat",value:function(i,a,c){"string"==typeof a&&-1<["yes","no"].indexOf(a)?f.getByChannelUrl(i.channelUrl,function(e,t){var n=Ur.getParamsFromCallback(e,t).result,r="".concat(Ur.apiHost,"/tickets/").concat(n.id,"/edit_message/"),o=Jr.postParam;o.messageId=i.messageId,o.messageData=JSON.stringify({type:fo.DataType.TICKET_INQUIRE_CLOSURE,body:{state:"yes"===a?fo.ClosureState.CONFIRMED:fo.ClosureState.DECLINED,ticketId:n.id}}),ee.create({headers:Jr.header}).patch(r,o).then(function(e){xr.write("[REQ] confirmed end of chat:",n),Ur.callback(e,null,c)}).catch(function(e){return Ur.callback(null,e,c)})}):Ur.callback(null,Vr.create(Vr.Type.ERROR_INVALID_PARAMETER))}},{key:"submitFeedback",value:function(i,a,e,t){var c=2<arguments.length&&void 0!==e?e:"",u=3<arguments.length?t:void 0;i&&0<i.messageId&&i.channelUrl&&"number"==typeof a&&1<=a&&a<=5&&"string"==typeof c?f.getByChannelUrl(i.channelUrl,function(e,t){var n=Ur.getParamsFromCallback(e,t).result,r="".concat(Ur.apiHost,"/tickets/").concat(n.id,"/edit_message/"),o=Jr.postParam;o.messageId=i.messageId,o.messageData=JSON.stringify({type:fo.DataType.TICKET_FEEDBACK,body:{state:fo.FeedbackState.CONFIRMED,customerSatisfactionScore:a,customerSatisfactionComment:c,ticketId:n.id}}),ee.create({headers:Jr.header}).patch(r,o).then(function(e){xr.write("[REQ] customer feedback:",n),Ur.callback(e,null,u)}).catch(function(e){return Ur.callback(null,e,u)})}):Ur.callback(null,Vr.create(Vr.Type.ERROR_INVALID_PARAMETER))}},{key:"Status",get:function(){return{INITIALIZED:"INITIALIZED",UNASSIGNED:"UNASSIGNED",ASSIGNED:"ASSIGNED",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"defaultLimit",get:function(){return 10}}]),f}(),go=!1;return function(){function e(){i(this,e)}return n(e,null,[{key:"init",value:function(e){try{e||(window&&window.SendBird&&(e=window.SendBird),global&&global.SendBird&&(e=global.SendBird)),e&&e.version?(Ur.sendBird=e,Ur.isSendBirdSdkCompatible(e.version)?go=!0:Vr.throw(Vr.Type.ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED)):Vr.throw(Vr.Type.ERROR_SENDBIRD_SDK_MISSING)}catch(e){Vr.throw(Vr.Type.ERROR_SENDBIRD_SDK_MISSING)}}},{key:"authenticate",value:function(e,t,n){go?Jr.connect(e,t,n):Vr.throw(Vr.Type.ERROR_SENDBIRD_DESK_INIT_MISSING)}},{key:"isDeskChannel",value:function(e){return yo.isDeskCustomType(e.customType)}},{key:"setApiHost",value:function(e){Ur.apiHost=e}},{key:"setDebugMode",value:function(){Ur.setDebugMode()}},{key:"setCustomerCustomFields",value:function(e,t){if("object"!==p(e)||null===e||Array.isArray(e))Ur.callback(null,Vr.create(Vr.Type.ERROR_INVALID_PARAMETER),t);else{var n={};for(var r in e)n[r]="string"==typeof e[r]?e[r]:JSON.stringify(e[r]);var o="".concat(Ur.apiHost,"/customers/custom_fields/"),i=Jr.postParam;i.customFields=JSON.stringify(n),ee.create({headers:Jr.header}).patch(o,i).then(function(){Ur.callback(null,null,t)}).catch(function(e){Ur.callback(null,e,t)})}}},{key:"version",get:function(){return Ur.sdkVersion}},{key:"Error",get:function(){return Vr}},{key:"Agent",get:function(){return Wr}},{key:"Ticket",get:function(){return yo}},{key:"Message",get:function(){return fo}},{key:"UrlRegExp",get:function(){return fo.UrlRegExp}}]),e}()});