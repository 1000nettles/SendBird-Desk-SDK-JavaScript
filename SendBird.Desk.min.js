/**
 * Copyright(c) 2016 SendBird, Inc.
 * SendBird Desk JavaScript SDK v1.0.20
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SendBirdDesk=e()}(this,function(){"use strict";function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t,e,n){return(u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&a(r,n.prototype),r}).apply(null,arguments)}function t(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return u(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)}(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(n){var r=c();return function(){var t,e=o(n);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}(this,r?(t=o(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function l(n,r){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return n.apply(r,t)}}var f=Object.prototype.toString;function p(t){return"[object Array]"===f.call(t)}function d(t){return void 0===t}function y(t){return null!==t&&"object"==typeof t}function g(t){return"[object Function]"===f.call(t)}function m(t,e){if(null!=t)if(p(t="object"!=typeof t?[t]:t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var v={isArray:p,isArrayBuffer:function(t){return"[object ArrayBuffer]"===f.call(t)},isBuffer:function(t){return null!==t&&!d(t)&&null!==t.constructor&&!d(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:y,isUndefined:d,isDate:function(t){return"[object Date]"===f.call(t)},isFile:function(t){return"[object File]"===f.call(t)},isBlob:function(t){return"[object Blob]"===f.call(t)},isFunction:g,isStream:function(t){return y(t)&&g(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:m,merge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]=t}for(var e=0,o=arguments.length;e<o;e++)m(arguments[e],t);return r},deepMerge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]="object"==typeof t?n({},t):t}for(var e=0,o=arguments.length;e<o;e++)m(arguments[e],t);return r},extend:function(n,t,r){return m(t,function(t,e){n[e]=r&&"function"==typeof t?l(t,r):t}),n},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function b(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var E=function(t,e,n){if(!e)return t;var r,n=n?n(e):v.isURLSearchParams(e)?e.toString():(r=[],v.forEach(e,function(t,e){null!=t&&(v.isArray(t)?e+="[]":t=[t],v.forEach(t,function(t){v.isDate(t)?t=t.toISOString():v.isObject(t)&&(t=JSON.stringify(t)),r.push(b(e)+"="+b(t))}))}),r.join("&"));return n&&(-1!==(e=t.indexOf("#"))&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+n),t};function S(){this.handlers=[]}S.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},S.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},S.prototype.forEach=function(e){v.forEach(this.handlers,function(t){null!==t&&e(t)})};function R(e,n,t){return v.forEach(t,function(t){e=t(e,n)}),e}function k(t){return!(!t||!t.__CANCEL__)}function O(n,r){v.forEach(n,function(t,e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=t,delete n[e])})}var I,w,T,A=S,D=function(t,e,n,r,o){var t=new Error(t);return n=n,r=r,o=o,(t=t).config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},N=function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(D("Request failed with status code "+n.status,n.config,null,n.request,n))},_=function(t,e){return t&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)?(n=t,(t=e)?n.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):n):e;var n},C=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],x=function(t){var e,n,r={};return t&&v.forEach(t.split("\n"),function(t){n=t.indexOf(":"),e=v.trim(t.substr(0,n)).toLowerCase(),n=v.trim(t.substr(n+1)),e&&(r[e]&&0<=C.indexOf(e)||(r[e]="set-cookie"===e?(r[e]||[]).concat([n]):r[e]?r[e]+", "+n:n))}),r},P=v.isStandardBrowserEnv()?(w=/(msie|trident)/i.test(navigator.userAgent),T=document.createElement("a"),I=j(window.location.href),function(t){t=v.isString(t)?j(t):t;return t.protocol===I.protocol&&t.host===I.host}):function(){return!0};function j(t){return w&&(T.setAttribute("href",t),t=T.href),T.setAttribute("href",t),{href:T.href,protocol:T.protocol?T.protocol.replace(/:$/,""):"",host:T.host,search:T.search?T.search.replace(/^\?/,""):"",hash:T.hash?T.hash.replace(/^#/,""):"",hostname:T.hostname,port:T.port,pathname:"/"===T.pathname.charAt(0)?T.pathname:"/"+T.pathname}}function F(c){return new Promise(function(e,n){var r=c.data,o=c.headers;v.isFormData(r)&&delete o["Content-Type"];var i=new XMLHttpRequest;c.auth&&(a=c.auth.username||"",t=c.auth.password||"",o.Authorization="Basic "+btoa(a+":"+t));var t,a=_(c.baseURL,c.url);if(i.open(c.method.toUpperCase(),E(a,c.params,c.paramsSerializer),!0),i.timeout=c.timeout,i.onreadystatechange=function(){var t;i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))&&(t="getAllResponseHeaders"in i?x(i.getAllResponseHeaders()):null,t={data:c.responseType&&"text"!==c.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:t,config:c,request:i},N(e,n,t),i=null)},i.onabort=function(){i&&(n(D("Request aborted",c,"ECONNABORTED",i)),i=null)},i.onerror=function(){n(D("Network Error",c,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+c.timeout+"ms exceeded";c.timeoutErrorMessage&&(t=c.timeoutErrorMessage),n(D(t,c,"ECONNABORTED",i)),i=null},v.isStandardBrowserEnv()&&(t=U,(t=(c.withCredentials||P(a))&&c.xsrfCookieName?t.read(c.xsrfCookieName):void 0)&&(o[c.xsrfHeaderName]=t)),"setRequestHeader"in i&&v.forEach(o,function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete o[e]:i.setRequestHeader(e,t)}),v.isUndefined(c.withCredentials)||(i.withCredentials=!!c.withCredentials),c.responseType)try{i.responseType=c.responseType}catch(t){if("json"!==c.responseType)throw t}"function"==typeof c.onDownloadProgress&&i.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(t){i&&(i.abort(),n(t),i=null)}),void 0===r&&(r=null),i.send(r)})}var U=v.isStandardBrowserEnv()?{write:function(t,e,n,r,o,i){var a=[];a.push(t+"="+encodeURIComponent(e)),v.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),v.isString(r)&&a.push("path="+r),v.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){t=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},L={"Content-Type":"application/x-www-form-urlencoded"};function M(t,e){!v.isUndefined(t)&&v.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var B={adapter:qt="undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?F:qt,transformRequest:[function(t,e){return O(e,"Accept"),O(e,"Content-Type"),v.isFormData(t)||v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t)?t:v.isArrayBufferView(t)?t.buffer:v.isURLSearchParams(t)?(M(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):v.isObject(t)?(M(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};v.forEach(["delete","get","head"],function(t){B.headers[t]={}}),v.forEach(["post","put","patch"],function(t){B.headers[t]=v.merge(L)});var G=B;function K(t){t.cancelToken&&t.cancelToken.throwIfRequested()}function H(e){return K(e),e.headers=e.headers||{},e.data=R(e.data,e.headers,e.transformRequest),e.headers=v.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),v.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||G.adapter)(e).then(function(t){return K(e),t.data=R(t.data,t.headers,e.transformResponse),t},function(t){return k(t)||(K(e),t&&t.response&&(t.response.data=R(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}function z(e,n){n=n||{};var r={},t=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];v.forEach(t,function(t){void 0!==n[t]&&(r[t]=n[t])}),v.forEach(o,function(t){v.isObject(n[t])?r[t]=v.deepMerge(e[t],n[t]):void 0!==n[t]?r[t]=n[t]:v.isObject(e[t])?r[t]=v.deepMerge(e[t]):void 0!==e[t]&&(r[t]=e[t])}),v.forEach(i,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])});var a=t.concat(o).concat(i),i=Object.keys(n).filter(function(t){return-1===a.indexOf(t)});return v.forEach(i,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])}),r}function V(t){this.defaults=t,this.interceptors={request:new A,response:new A}}V.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=z(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[H,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},V.prototype.getUri=function(t){return t=z(this.defaults,t),E(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},v.forEach(["delete","get","head","options"],function(n){V.prototype[n]=function(t,e){return this.request(v.merge(e||{},{method:n,url:t}))}}),v.forEach(["post","put","patch"],function(r){V.prototype[r]=function(t,e,n){return this.request(v.merge(n||{},{method:r,url:t,data:e}))}});var q=V;function J(t){this.message=t}J.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},J.prototype.__CANCEL__=!0;var W=J;function Q(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new W(t),e(n.reason))})}Q.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Q.source=function(){var e;return{token:new Q(function(t){e=t}),cancel:e}};var X=Q;function Y(t){var e=new q(t),t=l(q.prototype.request,e);return v.extend(t,q.prototype,e),v.extend(t,e),t}var $=Y(G);$.Axios=q,$.create=function(t){return Y(z($.defaults,t))},$.Cancel=W,$.CancelToken=X,$.isCancel=k,$.all=function(t){return Promise.all(t)},$.spread=function(e){return function(t){return e.apply(null,t)}};var Z=$;Z.default=$;var tt=Z,et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function nt(t,e){return t(e={exports:{}},e.exports),e.exports}function rt(t){return t&&t.Math==Math&&t}function ot(t){try{return!!t()}catch(t){return!0}}function it(t){return At(Nt(t))}function at(t){return Ft(Nt(t))}function ct(t){return"Symbol("+(void 0===t?"":t)+")_"+Gt(++Mt+Bt,36)}function ut(t,e){return arguments.length<2?(n=mt[t],Kt(n)?n:void 0):mt[t]&&mt[t][e];var n}function st(t){var e;return Lt(Xt,t)&&(Wt||"string"==typeof Xt[t])||(e="Symbol."+t,Wt&&Lt(Yt,t)?Xt[t]=Yt[t]:Xt[t]=(Qt&&$t?$t:Zt)(e)),Xt[t]}function lt(t){return t=function(t,e){if(!te(t)||pe(t))return t;var n=me(t,Se);if(n){if(n=se(n,t,e=void 0===e?"default":e),!te(n)||pe(n))return n;throw Ee("Can't convert object to primitive value")}return be(t,e=void 0===e?"number":e)}(t,"string"),pe(t)?t:t+""}function ft(c){return function(t,e,n){var r,o=it(t),i=xe(o),a=Ne(n,i);if(c&&e!=e){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((c||a in o)&&o[a]===e)return c||a||0;return!c&&-1}}function pt(t,e){var n,r=it(t),o=0,i=[];for(n in r)!Lt(Pe,n)&&Lt(r,n)&&Fe(i,n);for(;e.length>o;)Lt(r,n=e[o++])&&(~je(i,n)||Fe(i,n));return i}function dt(t){return Ge[t]||(Ge[t]=ct(t))}function ht(){}function yt(t){t.write(Ve("")),t.close();var e=t.parentWindow.Object;return t=null,e}var gt,mt=rt("object"==typeof globalThis&&globalThis)||rt("object"==typeof window&&window)||rt("object"==typeof self&&self)||rt("object"==typeof et&&et)||function(){return this}()||Function("return this")(),vt=Function.prototype,bt=vt.bind,Et=vt.call,St=bt&&bt.bind(Et),Rt=bt?function(t){return t&&St(Et,t)}:function(t){return t&&function(){return Et.apply(t,arguments)}},kt=Rt({}.toString),Ot=Rt("".slice),It=function(t){return Ot(kt(t),8,-1)},wt=mt.Object,Tt=Rt("".split),At=ot(function(){return!wt("z").propertyIsEnumerable(0)})?function(t){return"String"==It(t)?Tt(t,""):wt(t)}:wt,Dt=mt.TypeError,Nt=function(t){if(null==t)throw Dt("Can't call method on "+t);return t},_t=Object.defineProperty,Ct=function(e,n){try{_t(mt,e,{value:n,configurable:!0,writable:!0})}catch(t){mt[e]=n}return n},xt="__core-js_shared__",Pt=mt[xt]||Ct(xt,{}),jt=nt(function(t){(t.exports=function(t,e){return Pt[t]||(Pt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})}),Ft=mt.Object,Ut=Rt({}.hasOwnProperty),Lt=Object.hasOwn||function(t,e){return Ut(at(t),e)},Mt=0,Bt=Math.random(),Gt=Rt(1..toString),Kt=function(t){return"function"==typeof t},Ht=ut("navigator","userAgent")||"",zt=mt.process,Vt=mt.Deno,qt=zt&&zt.versions||Vt&&Vt.version,X=qt&&qt.v8,Jt=Kn=!(Kn=X?0<(Fn=X.split("."))[0]&&Fn[0]<4?1:+(Fn[0]+Fn[1]):Kn)&&Ht&&(!(Fn=Ht.match(/Edge\/(\d+)/))||74<=Fn[1])&&(Fn=Ht.match(/Chrome\/(\d+)/))?+Fn[1]:Kn,Wt=!!Object.getOwnPropertySymbols&&!ot(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Jt&&Jt<41}),Qt=Wt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Xt=jt("wks"),Yt=mt.Symbol,$t=Yt&&Yt.for,Zt=Qt?Yt:Yt&&Yt.withoutSetter||ct,te=function(t){return"object"==typeof t?null!==t:Kt(t)},ee=mt.String,ne=mt.TypeError,re=function(t){if(te(t))return t;throw ne(ee(t)+" is not an object")},Z=!ot(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),oe=mt.document,ie=te(oe)&&te(oe.createElement),ae=function(t){return ie?oe.createElement(t):{}},ce=!Z&&!ot(function(){return 7!=Object.defineProperty(ae("div"),"a",{get:function(){return 7}}).a}),ue=Function.prototype.call,se=ue.bind?ue.bind(ue):function(){return ue.apply(ue,arguments)},le=Rt({}.isPrototypeOf),fe=mt.Object,pe=Qt?function(t){return"symbol"==typeof t}:function(t){var e=ut("Symbol");return Kt(e)&&le(e.prototype,fe(t))},de=mt.String,he=function(t){try{return de(t)}catch(t){return"Object"}},ye=mt.TypeError,ge=function(t){if(Kt(t))return t;throw ye(he(t)+" is not a function")},me=function(t,e){e=t[e];return null==e?void 0:ge(e)},ve=mt.TypeError,be=function(t,e){var n,r;if("string"===e&&Kt(n=t.toString)&&!te(r=se(n,t)))return r;if(Kt(n=t.valueOf)&&!te(r=se(n,t)))return r;if("string"!==e&&Kt(n=t.toString)&&!te(r=se(n,t)))return r;throw ve("Can't convert object to primitive value")},Ee=mt.TypeError,Se=st("toPrimitive"),Re=mt.TypeError,ke=Object.defineProperty,Oe={f:Z?ke:function(t,e,n){if(re(t),e=lt(e),re(n),ce)try{return ke(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Re("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ie=Math.ceil,we=Math.floor,Te=function(t){t=+t;return t!=t||0==t?0:(0<t?we:Ie)(t)},Ae=Math.max,De=Math.min,Ne=function(t,e){t=Te(t);return t<0?Ae(t+e,0):De(t,e)},_e=Math.min,Ce=function(t){return 0<t?_e(Te(t),9007199254740991):0},xe=function(t){return Ce(t.length)},et={includes:ft(!0),indexOf:ft(!1)},Pe={},je=et.indexOf,Fe=Rt([].push),Ue=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Le=Object.keys||function(t){return pt(t,Ue)},Me=Z?Object.defineProperties:function(t,e){re(t);for(var n,r=it(e),o=Le(e),i=o.length,a=0;a<i;)Oe.f(t,n=o[a++],r[n]);return t},Be=ut("document","documentElement"),Ge=jt("keys"),Ke="prototype",He="script",ze=dt("IE_PROTO"),Ve=function(t){return"<"+He+">"+t+"</"+He+">"},qe=function(){try{gt=new ActiveXObject("htmlfile")}catch(t){}var t,e;qe="undefined"==typeof document||document.domain&&gt?yt(gt):(t=ae("iframe"),e="java"+He+":",t.style.display="none",Be.appendChild(t),t.src=String(e),(t=t.contentWindow.document).open(),t.write(Ve("document.F=Object")),t.close(),t.F);for(var n=Ue.length;n--;)delete qe[Ke][Ue[n]];return qe()};Pe[ze]=!0;var Je=Object.create||function(t,e){var n;return null!==t?(ht[Ke]=re(t),n=new ht,ht[Ke]=null,n[ze]=t):n=qe(),void 0===e?n:Me(n,e)},We=st("unscopables"),Qe=Array.prototype;null==Qe[We]&&Oe.f(Qe,We,{configurable:!0,value:Je(null)});function Xe(t){Qe[We][t]=!0}var Ye={},$e=Rt(Function.toString);Kt(Pt.inspectSource)||(Pt.inspectSource=function(t){return $e(t)});var Ze,tn,en,nn,rn,on,an,cn,un=Pt.inspectSource,vt=mt.WeakMap,bt=Kt(vt)&&/native code/.test(un(vt)),sn=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ln=Z?function(t,e,n){return Oe.f(t,e,sn(1,n))}:function(t,e,n){return t[e]=n,t},fn="Object already initialized",pn=mt.TypeError,xt=mt.WeakMap;an=bt||Pt.state?(Ze=Pt.state||(Pt.state=new xt),tn=Rt(Ze.get),en=Rt(Ze.has),nn=Rt(Ze.set),rn=function(t,e){if(en(Ze,t))throw new pn(fn);return e.facade=t,nn(Ze,t,e),e},on=function(t){return tn(Ze,t)||{}},function(t){return en(Ze,t)}):(cn=dt("state"),Pe[cn]=!0,rn=function(t,e){if(Lt(t,cn))throw new pn(fn);return e.facade=t,ln(t,cn,e),e},on=function(t){return Lt(t,cn)?t[cn]:{}},function(t){return Lt(t,cn)});function dn(t,e){return(t=_n[Nn(t)])==xn||t!=Cn&&(Kt(e)?ot(e):!!e)}function hn(t,e){var n,r,o,i=t.target,a=t.global,c=t.stat,u=a?mt:c?mt[i]||Ct(i,{}):(mt[i]||{}).prototype;if(u)for(n in e){if(r=e[n],o=t.noTargetGet?(o=jn(u,n))&&o.value:u[n],!Pn(a?n:i+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;An(r,o)}(t.sham||o&&o.sham)&&ln(r,"sham",!0),Rn(u,n,r,t)}}var yn,gn={set:rn,get:on,has:an,enforce:function(t){return an(t)?on(t):rn(t,{})},getterFor:function(n){return function(t){var e;if(!te(t)||(e=on(t)).type!==n)throw pn("Incompatible receiver, "+n+" required");return e}}},zt={}.propertyIsEnumerable,mn=Object.getOwnPropertyDescriptor,vn={f:mn&&!zt.call({1:2},1)?function(t){t=mn(this,t);return!!t&&t.enumerable}:zt},bn=Object.getOwnPropertyDescriptor,En={f:Z?bn:function(t,e){if(t=it(t),e=lt(e),ce)try{return bn(t,e)}catch(t){}if(Lt(t,e))return sn(!se(vn.f,t,e),t[e])}},Vt=Function.prototype,qt=Z&&Object.getOwnPropertyDescriptor,X=Lt(Vt,"name"),Sn={EXISTS:X,PROPER:X&&"something"===function(){}.name,CONFIGURABLE:X&&(!Z||qt(Vt,"name").configurable)},Rn=nt(function(t){var u=Sn.CONFIGURABLE,e=gn.get,s=gn.enforce,l=String(String).split("String");(t.exports=function(t,e,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet,c=r&&void 0!==r.name?r.name:e;Kt(n)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Lt(n,"name")||u&&n.name!==c)&&ln(n,"name",c),(r=s(n)).source||(r.source=l.join("string"==typeof c?c:""))),t!==mt?(o?!a&&t[e]&&(i=!0):delete t[e],i?t[e]=n:ln(t,e,n)):i?t[e]=n:Ct(e,n)})(Function.prototype,"toString",function(){return Kt(this)&&e(this).source||un(this)})}),kn=Ue.concat("length","prototype"),On={f:Object.getOwnPropertyNames||function(t){return pt(t,kn)}},In={f:Object.getOwnPropertySymbols},wn=Rt([].concat),Tn=ut("Reflect","ownKeys")||function(t){var e=On.f(re(t)),n=In.f;return n?wn(e,n(t)):e},An=function(t,e){for(var n=Tn(e),r=Oe.f,o=En.f,i=0;i<n.length;i++){var a=n[i];Lt(t,a)||r(t,a,o(e,a))}},Dn=/#|\.prototype\./,Nn=dn.normalize=function(t){return String(t).replace(Dn,".").toLowerCase()},_n=dn.data={},Cn=dn.NATIVE="N",xn=dn.POLYFILL="P",Pn=dn,jn=En.f,Fn=!ot(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Un=dt("IE_PROTO"),Ln=mt.Object,Mn=Ln.prototype,Bn=Fn?Ln.getPrototypeOf:function(t){var e=at(t);if(Lt(e,Un))return e[Un];t=e.constructor;return Kt(t)&&e instanceof t?t.prototype:e instanceof Ln?Mn:null},Gn=st("iterator"),Ht=!1;[].keys&&("next"in(Ao=[].keys())?(Do=Bn(Bn(Ao)))!==Object.prototype&&(yn=Do):Ht=!0);var Kn=null==yn||ot(function(){var t={};return yn[Gn].call(t)!==t});Kt((yn=Kn?{}:yn)[Gn])||Rn(yn,Gn,function(){return this});function Hn(){return this}function zn(t,e,n,r,o,i,a){function c(t){if(t===o&&y)return y;if(!nr&&t in d)return d[t];switch(t){case"keys":case or:case ir:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n,r){e+=" Iterator";t.prototype=Je(Wn,{next:sn(+!r,n)}),Jn(t,e,!1),Ye[e]=Qn}(n,e,r);var u,s,l,f=e+" Iterator",p=!1,d=t.prototype,h=d[rr]||d["@@iterator"]||o&&d[o],y=!nr&&h||c(o);if((r="Array"==e&&d.entries||h)&&(u=Bn(r.call(new t)))!==Object.prototype&&u.next&&(Bn(u)!==er&&($n?$n(u,er):Kt(u[rr])||Rn(u,rr,Hn)),Jn(u,f,!0)),Zn&&o==or&&h&&h.name!==or&&(tr?ln(d,"name",or):(p=!0,y=function(){return se(h,this)})),o)if(s={values:c(or),keys:i?y:c("keys"),entries:c(ir)},a)for(l in s)!nr&&!p&&l in d||Rn(d,l,s[l]);else hn({target:e,proto:!0,forced:nr||p},s);return d[rr]!==y&&Rn(d,rr,y,{name:o}),Ye[e]=y,s}var et={IteratorPrototype:yn,BUGGY_SAFARI_ITERATORS:Ht},Vn=Oe.f,qn=st("toStringTag"),Jn=function(t,e,n){t&&!Lt(t=n?t:t.prototype,qn)&&Vn(t,qn,{configurable:!0,value:e})},Wn=et.IteratorPrototype,Qn=function(){return this},Xn=mt.String,Yn=mt.TypeError,$n=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Rt(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return re(t),function(t){if("object"==typeof t||Kt(t))return;throw Yn("Can't set "+Xn(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),Zn=Sn.PROPER,tr=Sn.CONFIGURABLE,er=et.IteratorPrototype,nr=et.BUGGY_SAFARI_ITERATORS,rr=st("iterator"),or="values",ir="entries",ar="Array Iterator",cr=gn.set,ur=gn.getterFor(ar),sr=zn(Array,"Array",function(t,e){cr(this,{type:ar,target:it(t),index:0,kind:e})},function(){var t=ur(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Ye.Arguments=Ye.Array,Xe("keys"),Xe("values"),Xe("entries");vt={};vt[st("toStringTag")]="z";var xt="[object z]"===String(vt),lr=st("toStringTag"),fr=mt.Object,pr="Arguments"==It(function(){return arguments}()),dr=xt?It:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=fr(t),lr))?t:pr?It(e):"Object"==(t=It(e))&&Kt(e.callee)?"Arguments":t};xt||Rn(Object.prototype,"toString",xt?{}.toString:function(){return"[object "+dr(this)+"]"},{unsafe:!0});function hr(t){if("Symbol"===dr(t))throw TypeError("Cannot convert a Symbol value to a string");return gr(t)}function yr(i){return function(t,e){var n,r=hr(Nt(t)),o=Te(e),t=r.length;return o<0||t<=o?i?"":void 0:(e=vr(r,o))<55296||56319<e||o+1===t||(n=vr(r,o+1))<56320||57343<n?i?mr(r,o):e:i?br(r,o,o+2):n-56320+(e-55296<<10)+65536}}var gr=mt.String,mr=Rt("".charAt),vr=Rt("".charCodeAt),br=Rt("".slice),zt={codeAt:yr(!1),charAt:yr(!0)},Er=zt.charAt,Sr="String Iterator",Rr=gn.set,kr=gn.getterFor(Sr);zn(String,"String",function(t){Rr(this,{type:Sr,string:hr(t),index:0})},function(){var t=kr(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Er(e,n),t.index+=n.length,{value:n,done:!1})});function Or(t,e,n){for(var r in e)Rn(t,r,e[r],n);return t}function Ir(t,e){return ge(t),void 0===e?t:Gr?Gr(t,e):function(){return t.apply(e,arguments)}}function wr(t,e,n){var r,o;re(t);try{if(!(r=me(t,"return"))){if("throw"===e)throw n;return n}r=se(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return re(r),n}function Tr(t,e){this.stopped=t,this.result=e}function Ar(t,e,n){function r(t){return i&&wr(i,"normal",t),new Tr(!0,t)}function o(t){return p?(re(t),h?y(t[0],t[1],r):y(t[0],t[1])):h?y(t,r):y(t)}var i,a,c,u,s,l,f=n&&n.that,p=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),y=Ir(e,f);if(d)i=t;else{if(!(f=Vr(t)))throw Jr(he(t)+" is not iterable");if(void 0!==(d=f)&&(Ye.Array===d||Hr[Kr]===d)){for(a=0,c=xe(t);a<c;a++)if((u=o(t[a]))&&le(Wr,u))return u;return new Tr(!1)}i=function(t,e){e=arguments.length<2?Vr(t):e;if(ge(e))return re(se(e,t));throw qr(he(t)+" is not iterable")}(t,f)}for(s=i.next;!(l=se(s,i)).done;){try{u=o(l.value)}catch(t){wr(i,"throw",t)}if("object"==typeof u&&u&&le(Wr,u))return u}return new Tr(!1)}function Dr(t,e){if(le(e,t))return t;throw Qr("Incorrect invocation")}var Nr=function(t,e,n){e=lt(e);e in t?Oe.f(t,e,sn(0,n)):t[e]=n},_r=mt.Array,Cr=Math.max,xr=function(t,e,n){for(var r=xe(t),o=Ne(e,r),i=Ne(void 0===n?r:n,r),a=_r(Cr(i-o,0)),c=0;o<i;o++,c++)Nr(a,c,t[o]);return a.length=c,a},Pr=On.f,jr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Fr={f:function(t){return jr&&"Window"==It(t)?function(t){try{return Pr(t)}catch(t){return xr(jr)}}(t):Pr(it(t))}},Ur=ot(function(){var t;"function"==typeof ArrayBuffer&&(t=new ArrayBuffer(8),Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8}))}),Lr=Object.isExtensible,Mr=ot(function(){Lr(1)})||Ur?function(t){return!!te(t)&&((!Ur||"ArrayBuffer"!=It(t))&&(!Lr||Lr(t)))}:Lr,Br=!ot(function(){return Object.isExtensible(Object.preventExtensions({}))}),X=nt(function(t){function n(t){e(t,a,{value:{objectID:"O"+o++,weakData:{}}})}var e=Oe.f,r=!1,a=ct("meta"),o=0,c=t.exports={enable:function(){c.enable=function(){},r=!0;var o=On.f,i=Rt([].splice),t={};t[a]=1,o(t).length&&(On.f=function(t){for(var e=o(t),n=0,r=e.length;n<r;n++)if(e[n]===a){i(e,n,1);break}return e},hn({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Fr.f}))},fastKey:function(t,e){if(!te(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Lt(t,a)){if(!Mr(t))return"F";if(!e)return"E";n(t)}return t[a].objectID},getWeakData:function(t,e){if(!Lt(t,a)){if(!Mr(t))return!0;if(!e)return!1;n(t)}return t[a].weakData},onFreeze:function(t){return Br&&r&&Mr(t)&&!Lt(t,a)&&n(t),t}};Pe[a]=!0}),Gr=(X.enable,X.fastKey,X.getWeakData,X.onFreeze,Rt(Rt.bind)),Kr=st("iterator"),Hr=Array.prototype,zr=st("iterator"),Vr=function(t){if(null!=t)return me(t,zr)||me(t,"@@iterator")||Ye[dr(t)]},qr=mt.TypeError,Jr=mt.TypeError,Wr=Tr.prototype,Qr=mt.TypeError,Xr=st("iterator"),Yr=!1;try{var $r=0,Zr={next:function(){return{done:!!$r++}},return:function(){Yr=!0}};Zr[Xr]=function(){return this},Array.from(Zr,function(){throw 2})}catch(t){}function to(){}function eo(t){if(!Kt(t))return!1;try{return so(to,uo,t),!0}catch(t){return!1}}function no(t,e){return new(mo(t))(0===e?0:e)}function ro(p){var d=1==p,h=2==p,y=3==p,g=4==p,m=6==p,v=7==p,b=5==p||m;return function(t,e,n,r){for(var o,i,a=at(t),c=At(a),u=Ir(e,n),s=xe(c),l=0,r=r||no,f=d?r(t,s):h||v?r(t,0):void 0;l<s;l++)if((b||l in c)&&(i=u(o=c[l],l,a),p))if(d)f[l]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return l;case 2:vo(f,o)}else switch(p){case 4:return!1;case 7:vo(f,o)}return m?-1:y||g?g:f}}function oo(t){return t.frozen||(t.frozen=new io)}function io(){this.entries=[]}function ao(t,e){return Ro(t.entries,function(t){return t[0]===e})}var co=Array.isArray||function(t){return"Array"==It(t)},uo=[],so=ut("Reflect","construct"),lo=/^\s*(?:class|function)\b/,fo=Rt(lo.exec),po=!lo.exec(to),ho=!so||ot(function(){var t;return eo(eo.call)||!eo(Object)||!eo(function(){t=!0})||t})?function(t){if(!Kt(t))return!1;switch(dr(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return po||!!fo(lo,un(t))}:eo,yo=st("species"),go=mt.Array,mo=function(t){var e;return co(t)&&(e=t.constructor,(ho(e)&&(e===go||co(e.prototype))||te(e)&&null===(e=e[yo]))&&(e=void 0)),void 0===e?go:e},vo=Rt([].push),qt={forEach:ro(0),map:ro(1),filter:ro(2),some:ro(3),every:ro(4),find:ro(5),findIndex:ro(6),filterReject:ro(7)},bo=X.getWeakData,Eo=gn.set,So=gn.getterFor,Ro=qt.find,ko=qt.findIndex,Oo=Rt([].splice),Io=0;io.prototype={get:function(t){t=ao(this,t);if(t)return t[1]},has:function(t){return!!ao(this,t)},set:function(t,e){var n=ao(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(e){var t=ko(this.entries,function(t){return t[0]===e});return~t&&Oo(this.entries,t,1),!!~t}};function wo(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}var To,Ao,Do,No,_o,Co,xo,Po,jo,Fo,Uo,Lo,Mo,Bo,Vt={getConstructor:function(t,n,r,o){function i(t,e,n){var r=c(t),o=bo(re(e),!0);return!0===o?oo(r).set(e,n):o[r.id]=n,t}var t=t(function(t,e){Dr(t,a),Eo(t,{type:n,id:Io++,frozen:void 0}),null!=e&&Ar(e,t[o],{that:t,AS_ENTRIES:r})}),a=t.prototype,c=So(n);return Or(a,{delete:function(t){var e=c(this);if(!te(t))return!1;var n=bo(t);return!0===n?oo(e).delete(t):n&&Lt(n,e.id)&&delete n[e.id]},has:function(t){var e=c(this);if(!te(t))return!1;var n=bo(t);return!0===n?oo(e).has(t):n&&Lt(n,e.id)}}),Or(a,r?{get:function(t){var e=c(this);if(te(t)){var n=bo(t);return!0===n?oo(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return i(this,t,e)}}:{add:function(t){return i(this,t,!0)}}),t}},Go=gn.enforce,Fn=!mt.ActiveXObject&&"ActiveXObject"in mt,Kn=(Ao=wo,Do=Vt,_o=-1!==(Kn="WeakMap").indexOf("Map"),Co=-1!==Kn.indexOf("Weak"),xo=_o?"set":"add",Po=mt[Kn],jo=Po&&Po.prototype,Ht={},Pn(Kn,!Kt(Fo=Po)||!(Co||jo.forEach&&!ot(function(){(new Po).entries().next()})))?(Fo=Do.getConstructor(Ao,Kn,_o,xo),X.enable()):Pn(Kn,!0)&&(et=(No=new Fo)[xo](Co?{}:-0,1)!=No,vt=ot(function(){No.has(1)}),xt=function(t,e){if(!e&&!Yr)return!1;var n=!1;try{var r={};r[Xr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){new Po(t)}),Zr=!Co&&ot(function(){for(var t=new Po,e=5;e--;)t[xo](e,e);return!t.has(-0)}),xt||(((Fo=Ao(function(t,e){Dr(t,jo);var n,r,o,i=(i=new Po,n=t,t=Fo,$n&&Kt(r=n.constructor)&&r!==t&&te(o=r.prototype)&&o!==t.prototype&&$n(i,o),i);return null!=e&&Ar(e,i[xo],{that:i,AS_ENTRIES:_o}),i})).prototype=jo).constructor=Fo),(vt||Zr)&&(Ko("delete"),Ko("has"),_o&&Ko("get")),(Zr||et)&&Ko(xo),Co&&jo.clear&&delete jo.clear),Ht[Kn]=Fo,hn({global:!0,forced:Fo!=Po},Ht),Jn(Fo,Kn),Co||Do.setStrong(Fo,Kn,_o),Fo);function Ko(t){var n=Rt(jo[t]);Rn(jo,t,"add"==t?function(t){return n(this,0===t?0:t),this}:"delete"==t?function(t){return!(Co&&!te(t))&&n(this,0===t?0:t)}:"get"==t?function(t){return Co&&!te(t)?void 0:n(this,0===t?0:t)}:"has"==t?function(t){return!(Co&&!te(t))&&n(this,0===t?0:t)}:function(t,e){return n(this,0===t?0:t,e),this})}bt&&Fn&&(To=Vt.getConstructor(wo,"WeakMap",!0),X.enable(),Yo=Kn.prototype,Uo=Rt(Yo.delete),Lo=Rt(Yo.has),Mo=Rt(Yo.get),Bo=Rt(Yo.set),Or(Yo,{delete:function(t){if(!te(t)||Mr(t))return Uo(this,t);var e=Go(this);return e.frozen||(e.frozen=new To),Uo(this,t)||e.frozen.delete(t)},has:function(t){if(!te(t)||Mr(t))return Lo(this,t);var e=Go(this);return e.frozen||(e.frozen=new To),Lo(this,t)||e.frozen.has(t)},get:function(t){if(!te(t)||Mr(t))return Mo(this,t);var e=Go(this);return e.frozen||(e.frozen=new To),Lo(this,t)?Mo(this,t):e.frozen.get(t)},set:function(t,e){var n;return te(t)&&!Mr(t)?((n=Go(this)).frozen||(n.frozen=new To),Lo(this,t)?Bo(this,t,e):n.frozen.set(t,e)):Bo(this,t,e),this}}));function Ho(e,t){if(e){if(e[qo]!==Wo)try{ln(e,qo,Wo)}catch(t){e[qo]=Wo}if(e[Jo]||ln(e,Jo,t),Vo[t])for(var n in sr)if(e[n]!==sr[n])try{ln(e,n,sr[n])}catch(t){e[n]=sr[n]}}}var zo,Vo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Vt=ae("span").classList,X=Vt&&Vt.constructor&&Vt.constructor.prototype,Kn=X===Object.prototype?void 0:X,qo=st("iterator"),Jo=st("toStringTag"),Wo=sr.values;for(zo in Vo)Ho(mt[zo]&&mt[zo].prototype,zo);Ho(Kn,"DOMTokenList");function Qo(){var t=re(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var Xo=mt.RegExp,Yo=ot(function(){var t=Xo("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),Vt=Yo||ot(function(){return!Xo("a","y").sticky}),X={BROKEN_CARET:Yo||ot(function(){var t=Xo("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:Vt,UNSUPPORTED_Y:Yo},$o=mt.RegExp,Kn=ot(function(){var t=$o(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),Zo=mt.RegExp,Vt=ot(function(){var t=Zo("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),ti=gn.get,ei=jt("native-string-replace",String.prototype.replace),ni=RegExp.prototype.exec,ri=ni,oi=Rt("".charAt),ii=Rt("".indexOf),ai=Rt("".replace),ci=Rt("".slice),ui=(Yo=/b*/g,se(ni,jt=/a/,"a"),se(ni,Yo,"a"),0!==jt.lastIndex||0!==Yo.lastIndex),si=X.BROKEN_CARET,li=void 0!==/()??/.exec("")[1],fi=ri=ui||li||si||Kn||Vt?function(t){var e,n,r,o,i,a,c=this,u=ti(c),s=hr(t),l=u.raw;if(l)return l.lastIndex=c.lastIndex,d=se(ri,l,s),c.lastIndex=l.lastIndex,d;var f=u.groups,p=si&&c.sticky,t=se(Qo,c),l=c.source,d=0,u=s;if(p&&(t=ai(t,"y",""),-1===ii(t,"g")&&(t+="g"),u=ci(s,c.lastIndex),0<c.lastIndex&&(!c.multiline||c.multiline&&"\n"!==oi(s,c.lastIndex-1))&&(l="(?: "+l+")",u=" "+u,d++),e=new RegExp("^(?:"+l+")",t)),li&&(e=new RegExp("^"+l+"$(?!\\s)",t)),ui&&(n=c.lastIndex),r=se(ni,p?e:c,u),p?r?(r.input=ci(r.input,d),r[0]=ci(r[0],d),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:ui&&r&&(c.lastIndex=c.global?r.index+r[0].length:n),li&&r&&1<r.length&&se(ei,r[0],e,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r&&f)for(r.groups=i=Je(null),o=0;o<f.length;o++)i[(a=f[o])[0]]=r[a[1]];return r}:ri;hn({target:"RegExp",proto:!0,forced:/./.exec!==fi},{exec:fi});function pi(t,e){var n;return void 0===(t=re(t).constructor)||null==(n=re(t)[Ii])?e:function(t){if(ho(t))return t;throw Oi(he(t)+" is not a constructor")}(n)}function di(t,e){var n=t.exec;if(Kt(n)){n=se(n,t,e);return null!==n&&re(n),n}if("RegExp"===It(t))return se(fi,t,e);throw Ti("RegExp#exec called on incompatible receiver")}var hi,yi,gi,mi,Kn=Function.prototype,vi=Kn.apply,Vt=Kn.bind,bi=Kn.call,Ei="object"==typeof Reflect&&Reflect.apply||(Vt?bi.bind(vi):function(){return bi.apply(vi,arguments)}),Si=st("species"),Ri=RegExp.prototype,ki=st("match"),Oi=mt.TypeError,Ii=st("species"),wi=zt.charAt,Ti=mt.TypeError,Ai=X.UNSUPPORTED_Y,Di=4294967295,Ni=Math.min,_i=[].push,Ci=Rt(/./.exec),xi=Rt(_i),Pi=Rt("".slice),Kn=!ot(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};t="ab".split(t);return 2!==t.length||"a"!==t[0]||"b"!==t[1]});Vt=function(o,g,m){var v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=hr(Nt(this)),r=void 0===e?Di:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!te(u=t)||(void 0!==(e=u[ki])?!e:"RegExp"!=It(u)))return se(g,n,t,r);for(var o,i,a,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=new RegExp(t.source,u+"g");(o=se(fi,l,n))&&!(s<(i=l.lastIndex)&&(xi(c,Pi(n,s,o.index)),1<o.length&&o.index<n.length&&Ei(_i,c,xr(o,1)),a=o[0].length,s=i,r<=c.length));)l.lastIndex===o.index&&l.lastIndex++;return s===n.length?!a&&Ci(l,"")||xi(c,""):xi(c,Pi(n,s)),r<c.length?xr(c,0,r):c}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:se(g,this,t,e)}:g;return[function(t,e){var n=Nt(this),r=null==t?void 0:me(t,o);return r?se(r,t,n,e):se(v,hr(n),t,e)},function(t,e){var n=re(this),r=hr(t),o=m(v,n,r,e,v!==g);if(o.done)return o.value;var t=pi(n,RegExp),i=n.unicode,o=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(Ai?"g":"y"),a=new t(Ai?"^(?:"+n.source+")":n,o),c=void 0===e?Di:e>>>0;if(0==c)return[];if(0===r.length)return null===di(a,r)?[r]:[];for(var u,s,l=0,f=0,p=[];f<r.length;){a.lastIndex=Ai?0:f;var d,h=di(a,Ai?Pi(r,f):r);if(null===h||(d=Ni(Ce(a.lastIndex+(Ai?f:0)),r.length))===l)u=r,f=(s=f)+(i?wi(u,s).length:1);else{if(xi(p,Pi(r,l,f)),p.length===c)return p;for(var y=1;y<=h.length-1;y++)if(xi(p,h[y]),p.length===c)return p;f=l=d}}return xi(p,Pi(r,l)),p}]},zt=!Kn,X=Ai,gi=st(hi="split"),mi=!ot(function(){var t={};return t[gi]=function(){return 7},7!=""[hi](t)}),Kn=mi&&!ot(function(){var t=!1,e=/a/;return"split"===hi&&((e={constructor:{}}).constructor[Si]=function(){return e},e.flags="",e[gi]=/./[gi]),e.exec=function(){return t=!0,null},e[gi](""),!t}),mi&&Kn&&!zt||(yi=Rt(/./[gi]),Vt=Vt(gi,""[hi],function(t,e,n,r,o){var i=Rt(t),t=e.exec;return t===fi||t===Ri.exec?mi&&!o?{done:!0,value:yi(e,n,r)}:{done:!0,value:i(n,e,r)}:{done:!1}}),Rn(String.prototype,hi,Vt[0]),Rn(Ri,gi,Vt[1])),X&&ln(Ri[gi],"sham",!0);var ji=function(){function t(){i(this,t)}return n(t,null,[{key:"write",value:function(){var t;Mi.isDebugMode&&(t=console).log.apply(t,arguments)}},{key:"error",value:function(){var t;Mi.isDebugMode&&(t=console).error.apply(t,arguments)}}]),t}(),Fi=new WeakMap,Ui=null,Li=null,Mi=function(){function r(){i(this,r)}return n(r,null,[{key:"sendBird",get:function(){return Ui},set:function(t){Ui=t}},{key:"isDebugMode",get:function(){return Fi.get(this)}},{key:"setDebugMode",value:function(){Fi.set(this,!0)}},{key:"unsetDebugMode",value:function(){Fi.set(this,!1)}},{key:"apiHost",get:function(){var t;return Li||(t=Ui.getInstance(),Li="https://desk-api-".concat(t.getApplicationId(),".sendbird.com/sapi")),Li},set:function(t){Li=t}},{key:"sdkVersion",get:function(){return"1.0.20"}},{key:"minSendBirdVersion",get:function(){return"3.0.55"}},{key:"getParamsFromCallback",value:function(t,e){return{result:t,err:e,reversed:!1}}},{key:"callback",value:function(t,e,n){n&&((e=r.getParamsFromCallback(t,e)).err&&ji.error(e.err),e.reversed?n(e.err,e.result):n(e.result,e.err))}},{key:"isSendBirdSdkCompatible",value:function(t){var e,n="3.0.55".split("."),r=t.split(".");if(n.length!==r.length)return!1;for(e in n){if(parseInt(n[e])<parseInt(r[e]))return!0;if(parseInt(n[e])>parseInt(r[e]))return!1}return!0}}]),r}(),zt=Sn.EXISTS,Vt=Oe.f,X=Function.prototype,Bi=Rt(X.toString),Gi=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ki=Rt(Gi.exec);Z&&!zt&&Vt(X,"name",{configurable:!0,get:function(){try{return Ki(Gi,Bi(this))[1]}catch(t){return""}}});function Hi(e){return 51<=Jt||!ot(function(){var t=[];return(t.constructor={})[Qi]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var zi={ERROR_SENDBIRD_SDK_MISSING:{code:100,message:"SendBird SDK is missing."},ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED:{code:101,message:"This SendBird SDK version is not supported."},ERROR_SENDBIRD_DESK_INIT_MISSING:{code:102,message:"SendBird Desk SDK is not initialized. It should be done before authentication."},ERROR_SENDBIRD_SDK_MESSAGE_LIST_FAILED:{code:200,message:"Cannot load messages in SDK client."},ERROR_INVALID_PARAMETER:{code:403,message:"Invalid parameter."},ERROR_DATA_NOT_FOUND:{code:404,message:"Data not found."},ERROR_REQUEST_TIMEOUT:{code:409,message:"Request timed-out."},ERROR_REQUEST:{code:500,message:"Request failed."},ERROR_REQUEST_CANCELED:{code:501,message:"Request canceled."}},Vi=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&a(t,e)}(o,t(Error));var r=e(o);function o(t,e){var n;return i(this,o),n=r.call(this,t),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(s(n),n.constructor):n.stack=new Error(t).stack,n.name="SendBirdDeskError",n.message=t,n.code=e,n}return n(o,null,[{key:"Type",get:function(){return zi}},{key:"create",value:function(t){return t?new o(t.message,t.code):new Error("SendBirdDeskError type missing.")}},{key:"throw",value:function(t){if(t)throw new o(t.message,t.code)}}]),o}(),qi=new mt.WeakMap,Ji=function(){function t(){i(this,t)}return n(t,null,[{key:"connect",value:function(t,e,n){var r=this;"function"==typeof e&&(n=e,e="");var o,i=Mi.sendBird;i?(o=i.getInstance(),i="".concat(Mi.apiHost,"/customers/auth/"),e={sendbirdAccessToken:e||"","content-type":"application/json"},t={sendbirdAppId:o.getApplicationId(),sendbirdId:t},tt.create({headers:e}).post(i,t).then(function(t){qi.set(r,{deskToken:t.data.token}),ji.write("[REQ] connection established"),Mi.callback(t.data,null,n)}).catch(function(t){Mi.callback(null,t,n)})):Mi.callback(null,Vi.create(Vi.Type.ERROR_SENDBIRD_SDK_MISSING),n)}},{key:"header",get:function(){return{sendbirdDeskToken:qi.get(this).deskToken,"content-type":"application/json","user-agent":"desk-js@".concat("1.0.20")}}},{key:"getParam",get:function(){var t=Mi.sendBird;if(t){t=t.getInstance();return"sendbirdAppId=".concat(t.getApplicationId())}return""}},{key:"postParam",get:function(){var t=Mi.sendBird;return t?{sendbirdAppId:t.getInstance().getApplicationId()}:{}}}]),t}(),Wi=function(){function e(t){i(this,e),this.fetchFromJSON(t)}return n(e,[{key:"fetchFromJSON",value:function(t){this.userId=t?t.user:0,this.name=t?t.displayName:"",this.profileUrl=t?t.photoThumbnailUrl:""}}]),e}(),Qi=st("species"),Xi=st("isConcatSpreadable"),Yi=9007199254740991,$i="Maximum allowed index exceeded",Zi=mt.TypeError,Vt=51<=Jt||!ot(function(){var t=[];return t[Xi]=!1,t.concat()[0]!==t}),X=Hi("concat");hn({target:"Array",proto:!0,forced:!Vt||!X},{concat:function(t){for(var e,n,r,o=at(this),i=no(o,0),a=0,c=-1,u=arguments.length;c<u;c++)if(function(t){if(!te(t))return!1;var e=t[Xi];return void 0!==e?!!e:co(t)}(r=-1===c?o:arguments[c])){if(n=xe(r),Yi<a+n)throw Zi($i);for(e=0;e<n;e++,a++)e in r&&Nr(i,a,r[e])}else{if(Yi<=a)throw Zi($i);Nr(i,a++,r)}return i.length=a,i}});var ta,ea,na=Rt([].join),Vt=At!=Object,X=(ta=",",!!(ea=[]["join"])&&ot(function(){ea.call(null,ta||function(){throw 1},1)}));hn({target:"Array",proto:!0,forced:Vt||!X},{join:function(t){return na(it(this),void 0===t?",":t)}});var ra=qt.map,qt=Hi("map");hn({target:"Array",proto:!0,forced:!qt},{map:function(t){return ra(this,t,1<arguments.length?arguments[1]:void 0)}});qt=ot(function(){Le(1)});hn({target:"Object",stat:!0,forced:qt},{keys:function(t){return Le(at(t))}});function oa(t,e){var n=Mi.sendBird;n?((n=n.getInstance().GroupChannel.createMyGroupChannelListQuery()).customTypesFilter=[ua],n.channelUrlsFilter=t,n.includeEmpty=!0,n.next(e)):Mi.callback(null,Vi.create(Vi.Type.ERROR_SENDBIRD_SDK_MISSING),e)}function ia(e,i){var a=la.Status.OPEN,t=(a=la.isStatus(e.status)?e.status:a)!==la.Status.CLOSED?"status=ASSIGNED&status=UNASSIGNED":"status=CLOSED",t="".concat(Mi.apiHost,"/tickets/")+"?".concat(Ji.getParam,"&limit=").concat(e.limit||la.defaultLimit,"&offset=").concat(e.offset||0)+"&".concat(t,"&order=").concat(e.order||"-updated_at");e.channelUrl&&(t+="&channelUrl=".concat(e.channelUrl)),e.customFieldFilter&&"object"===h(e.customFieldFilter)&&(t+="&customFields="+encodeURIComponent(Object.keys(e.customFieldFilter).map(function(t){return"".concat(t,":").concat(encodeURIComponent(e.customFieldFilter[t]))}).join(","))),tt.create({headers:Ji.header}).get(t).then(function(t){if(t&&t.data){var e,r=[],n=[];for(e in t.data.results){var o=new la(t.data.results[e]);sa[o.channelUrl]=o,n.push(o.channelUrl),r.push(o)}oa(n,function(t,e){var e=Mi.getParamsFromCallback(t,e),n=e.result;e.err||r.forEach(function(t){for(var e in n){e=n[e];if(t.channelUrl===e.url){t.channel=e;break}}}),ji.write("[REQ] ".concat(a," ticket list:"),r),Mi.callback(r,e.err,i)})}else Mi.callback([],null,i)}).catch(function(t){return Mi.callback(null,t,i)})}var aa=function(){function t(){i(this,t)}return n(t,null,[{key:"CustomType",get:function(){return{RICH_MESSAGE:"SENDBIRD_DESK_RICH_MESSAGE",ADMIN_MESSAGE:"SENDBIRD_DESK_ADMIN_MESSAGE_CUSTOM_TYPE"}}},{key:"DataType",get:function(){return{TICKET_INQUIRE_CLOSURE:"SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE",TICKET_ASSIGN:"TICKET_ASSIGN",TICKET_TRANSFER:"TICKET_TRANSFER",TICKET_CLOSE:"TICKET_CLOSE",TICKET_FEEDBACK:"SENDBIRD_DESK_CUSTOMER_SATISFACTION",URL_PREVIEW:"SENDBIRD_DESK_URL_PREVIEW"}}},{key:"ClosureState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED",DECLINED:"DECLINED"}}},{key:"FeedbackState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED"}}},{key:"UrlRegExp",get:function(){return/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?/gi}}]),t}(),ca=function(){function e(t){i(this,e),this.fetchFromJSON(t)}return n(e,[{key:"fetchFromJSON",value:function(t){this.channelUrl=t?t.channel_url:"",this.name=t?t.name:""}}]),e}(),ua="SENDBIRD_DESK_CHANNEL_CUSTOM_TYPE",sa={},la=function(){function d(t){i(this,d),this.fetchFromJSON(t)}return n(d,[{key:"fetchFromJSON",value:function(t){if(this.id=t?t.id:0,this.title=t?t.channelName:"",this.status=t?t.status:"",this.info=t&&t.info?JSON.parse(t.info):null,this.priority=t?t.priority:d.Priority.MEDIUM,this.agent=t&&t.recentAssignment&&t.recentAssignment.agent?new Wi(t.recentAssignment.agent):null,this.customer=t?t.customer:null,this.customFields={},this.group=t?t.group:0,this.relatedChannels=[],this.channel=this.channel,this.channelUrl=t?t.channelUrl:null,this.updatedAt=(t?new Date(t.updatedAt):new Date).getTime(),t&&t.customFields)for(var e=t.customFields,n=0;n<e.length;n++){var r=e[n].key,o=e[n].value;this.customFields[r]=o}if(t&&t.relatedChannels)try{var i=JSON.parse(t.relatedChannels);Array.isArray(i)&&(this.relatedChannels=i.map(function(t){return new ca(t)}))}catch(t){}}},{key:"refresh",value:function(n){var r=this,t="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/?").concat(Ji.getParam);tt.create({headers:Ji.header}).get(t).then(function(t){r.fetchFromJSON(t.data),oa([r.channelUrl],function(t,e){e=Mi.getParamsFromCallback(t,e).result;0<e.length&&(r.channel=e[0]),sa[r.channelUrl]=r,ji.write("[REQ] ticket refresh:",r),Mi.callback(r,null,n)})}).catch(function(t){return Mi.callback(null,t,n)})}},{key:"reopen",value:function(n){var r=this,t="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/reopen"),e=Ji.postParam;tt.create({headers:Ji.header}).patch(t,e).then(function(t){t&&t.data&&t.data.channelUrl?(r.fetchFromJSON(t.data),oa([r.channelUrl],function(t,e){e=Mi.getParamsFromCallback(t,e).result;0<e.length&&(r.channel=e[0]),sa[r.channelUrl]=r,ji.write("[REQ] ticket reopen:",r),Mi.callback(r,null,n)})):Mi.callback(r,null,n)}).catch(function(t){return Mi.callback(null,t,n)})}},{key:"cancel",value:function(t,n){var e,r,o=this;"function"==typeof t&&(n=t,t=null),t&&"string"!=typeof t?Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),n):(e="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/cancel"),r=Ji.postParam,t&&(r.groupKeyForTransfer=t),tt.create({headers:Ji.header}).patch(e,r).then(function(t){t&&t.data&&t.data.channelUrl?(o.fetchFromJSON(t.data),oa([o.channelUrl],function(t,e){e=Mi.getParamsFromCallback(t,e).result;0<e.length&&(o.channel=e[0]),sa[o.channelUrl]=o,ji.write("[REQ] ticket cancel:",o),Mi.callback(o,null,n)})):Mi.callback(o,null,n)}).catch(function(t){return Mi.callback(null,t,n)}))}},{key:"close",value:function(t,n){var r=this;if(1===arguments.length){if("function"!=typeof t)return void Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),n);n=t,t=null}else if("string"!=typeof t||"function"!=typeof n)return void Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),n);var e="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/close"),o=Ji.postParam;t&&(o.closeComment=t),tt.create({headers:Ji.header}).patch(e,o).then(function(t){t.data.channelUrl?(r.fetchFromJSON(t.data),oa([r.channelUrl],function(t,e){e=Mi.getParamsFromCallback(t,e).result;0<e.length&&(r.channel=e[0]),sa[r.channelUrl]=r,ji.write("[REQ] ticket close:",r),Mi.callback(r,null,n)})):Mi.callback(r,null,n)}).catch(function(t){return Mi.callback(null,t,n)})}},{key:"selectQuestion",value:function(t,e,n){var r,o,i=this;"number"==typeof t&&"string"==typeof e?(r="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/select_question"),(o=Ji.postParam).faqFileId=t,o.question=e,tt.create({headers:Ji.header}).post(r,o).then(function(t){ji.write("[REQ] ticket select option:",i),Mi.callback(t.data,null,n)}).catch(function(t){return Mi.callback(null,t,n)})):Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),n)}},{key:"setPriority",value:function(t,e){var n,r,o=this;Object.keys(d.Priority).map(function(t){return d.Priority[t]}).indexOf(t)<0?Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),e):(n="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/"),(r=Ji.postParam).priority=t,tt.create({headers:Ji.header}).patch(n,r).then(function(t){o.fetchFromJSON(t.data),Mi.callback(o,null,e)}).catch(function(t){Mi.callback(null,t,e)}))}},{key:"setRelatedChannelUrls",value:function(t,e){var n,r,o=this;Array.isArray(t)&&!t.some(function(t){return"string"!=typeof t})?(n="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/"),(r=Ji.postParam).relatedChannelUrls=t.join(","),tt.create({headers:Ji.header}).patch(n,r).then(function(t){o.fetchFromJSON(t.data),Mi.callback(o,null,e)}).catch(function(t){Mi.callback(null,t,e)})):Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),e)}},{key:"setCustomFields",value:function(t,e){var n=this;if("object"!==h(t)||null===t||Array.isArray(t))Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),e);else{var r,o={};for(r in t)o[r]="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);var i="".concat(Mi.apiHost,"/tickets/").concat(this.id,"/custom_fields/"),a=Ji.postParam;a.customFields=JSON.stringify(o),tt.create({headers:Ji.header}).patch(i,a).then(function(t){n.fetchFromJSON(t.data),Mi.callback(n,null,e)}).catch(function(t){Mi.callback(null,t,e)})}}}],[{key:"Status",get:function(){return{INITIALIZED:"INITIALIZED",PROACTIVE:"PROACTIVE",UNASSIGNED:"UNASSIGNED",ASSIGNED:"ASSIGNED",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"isStatus",value:function(t){for(var e in d.Status)if(d.Status[e]===t)return!0;return!1}},{key:"Priority",get:function(){return{URGENT:"URGENT",HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW"}}},{key:"isPriority",value:function(t){for(var e in d.Priority)if(d.Priority[e]===t)return!0;return!1}},{key:"isDeskCustomType",value:function(t){return t===ua}},{key:"defaultLimit",get:function(){return 10}},{key:"clearCache",value:function(t){t?(delete sa[t],ji.write("[SYS] cached ticket for ".concat(t," cleared"))):(sa={},ji.write("[SYS] all cached ticket cleared"))}},{key:"create",value:function(t,e,n,r,o,i,a,c){var u=Mi.sendBird;if(u)if("function"==typeof n&&(c=n,a=i=o=r=n=null),"function"==typeof r&&(c=r,a=i=o=r=null),"function"==typeof o&&(c=o,a=i=o=null),"function"==typeof i&&(c=i,a=i=null),"function"==typeof a&&(c=a,a=null),"string"!=typeof t||"string"!=typeof e||n&&"string"!=typeof n||r&&"object"!==h(r)||o&&!d.isPriority(o)||i&&(!Array.isArray(i)||i.some(function(t){return"string"!=typeof t}))||Array.isArray(r)||a&&"string"!=typeof a)Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),c);else{var s=u.getInstance(),l="".concat(Mi.apiHost,"/tickets/"),u=Ji.postParam;if(u.channelName=t,u.channelType="SENDBIRD_JAVASCRIPT",n&&(u.groupKey=n),r){var f,p={};for(f in r)p[f]="string"==typeof r[f]?r[f]:JSON.stringify(r[f]);u.customFields=JSON.stringify(p)}o&&(u.priority=o),i&&(u.relatedChannelUrls=i.join(",")),a&&(u.botKey=a),u.info=JSON.stringify({ticket:{subject:t,requester:{name:e,email:s.getCurrentUserId()}}}),tt.create({headers:Ji.header}).post(l,u).then(function(t){var n=new d(t.data);oa([n.channelUrl],function(t,e){e=Mi.getParamsFromCallback(t,e).result;0<e.length&&(n.channel=e[0]),sa[n.channelUrl]=n,ji.write("[REQ] ticket create:",n),Mi.callback(n,null,c)})}).catch(function(t){return Mi.callback(null,t,c)})}else Mi.callback(null,Vi.create(Vi.Type.ERROR_SENDBIRD_SDK_MISSING),c)}},{key:"getOpenCount",value:function(e){var t="".concat(Mi.apiHost,"/tickets/count/?").concat(Ji.getParam);tt.create({headers:Ji.header}).get(t).then(function(t){return Mi.callback(t.data,null,e)}).catch(function(t){return Mi.callback(null,t,e)})}},{key:"getByChannelUrl",value:function(r,o){var t;sa[r]?Mi.callback(sa[r],null,o):(t="".concat(Mi.apiHost,"/tickets/?").concat(Ji.getParam,"&limit=10&channelUrl=").concat(r),tt.create({headers:Ji.header}).get(t).then(function(t){var n=null;(n=t&&t.data&&0<t.data.results.length?new d(t.data.results[0]):n)?oa([r],function(t,e){e=Mi.getParamsFromCallback(t,e).result;0<e.length&&(n.channel=e[0]),sa[r]=n,ji.write("[REQ] get ticket for channel ".concat(r,":"),n),Mi.callback(n,null,o)}):Mi.callback(null,Vi.Type.ERROR_DATA_NOT_FOUND,o)}).catch(function(t){return Mi.callback(null,t,o)}))}},{key:"getOpenedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),ia({offset:t,customFieldFilter:e,status:this.Status.OPEN},n)}},{key:"getClosedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),ia({offset:t,customFieldFilter:e,status:this.Status.CLOSED},n)}},{key:"getUrlPreview",value:function(t,e){var n="".concat(Mi.apiHost,"/tickets/url_preview/"),r=Ji.postParam;r.url=t,tt.create({headers:Ji.header}).post(n,r).then(function(t){return Mi.callback(t.data,null,e)}).catch(function(t){return Mi.callback(null,t,e)})}},{key:"confirmEndOfChat",value:function(r,o,i){"string"==typeof o&&-1<["yes","no"].indexOf(o)?d.getByChannelUrl(r.channelUrl,function(t,e){var n=Mi.getParamsFromCallback(t,e).result,t="".concat(Mi.apiHost,"/tickets/").concat(n.id,"/edit_message/"),e=Ji.postParam;e.messageId=r.messageId,e.messageData=JSON.stringify({type:aa.DataType.TICKET_INQUIRE_CLOSURE,body:{state:"yes"===o?aa.ClosureState.CONFIRMED:aa.ClosureState.DECLINED,ticketId:n.id}}),tt.create({headers:Ji.header}).patch(t,e).then(function(t){ji.write("[REQ] confirmed end of chat:",n),Mi.callback(t.data,null,i)}).catch(function(t){return Mi.callback(null,t,i)})}):Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER))}},{key:"submitFeedback",value:function(r,o){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",a=3<arguments.length?arguments[3]:void 0;r&&0<r.messageId&&r.channelUrl&&"number"==typeof o&&1<=o&&o<=5&&"string"==typeof i?d.getByChannelUrl(r.channelUrl,function(t,e){var n=Mi.getParamsFromCallback(t,e).result,t="".concat(Mi.apiHost,"/tickets/").concat(n.id,"/edit_message/"),e=Ji.postParam;e.messageId=r.messageId,e.messageData=JSON.stringify({type:aa.DataType.TICKET_FEEDBACK,body:{state:aa.FeedbackState.CONFIRMED,customerSatisfactionScore:o,customerSatisfactionComment:i,ticketId:n.id}}),tt.create({headers:Ji.header}).patch(t,e).then(function(t){ji.write("[REQ] customer feedback:",n),Mi.callback(t.data,null,a)}).catch(function(t){return Mi.callback(null,t,a)})}):Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER))}}]),d}(),fa=!1;return function(){function t(){i(this,t)}return n(t,null,[{key:"version",get:function(){return Mi.sdkVersion}},{key:"Error",get:function(){return Vi}},{key:"Agent",get:function(){return Wi}},{key:"Ticket",get:function(){return la}},{key:"Message",get:function(){return aa}},{key:"RelatedChannel",get:function(){return ca}},{key:"UrlRegExp",get:function(){return aa.UrlRegExp}},{key:"init",value:function(t){try{t||(window&&window.SendBird&&(t=window.SendBird),global&&global.SendBird&&(t=global.SendBird)),t&&t.version?(Mi.sendBird=t,Mi.isSendBirdSdkCompatible(t.version)?fa=!0:Vi.throw(Vi.Type.ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED)):Vi.throw(Vi.Type.ERROR_SENDBIRD_SDK_MISSING)}catch(t){Vi.throw(Vi.Type.ERROR_SENDBIRD_SDK_MISSING)}}},{key:"authenticate",value:function(t,e,n){fa?Ji.connect(t,e,n):Vi.throw(Vi.Type.ERROR_SENDBIRD_DESK_INIT_MISSING)}},{key:"isDeskChannel",value:function(t){return la.isDeskCustomType(t.customType)}},{key:"setApiHost",value:function(t){Mi.apiHost=t}},{key:"setDebugMode",value:function(){Mi.setDebugMode()}},{key:"setCustomerCustomFields",value:function(t,o){if("object"!==h(t)||null===t||Array.isArray(t))Mi.callback(null,Vi.create(Vi.Type.ERROR_INVALID_PARAMETER),o);else{var e,n={};for(e in t)n[e]="string"==typeof t[e]?t[e]:JSON.stringify(t[e]);var r="".concat(Mi.apiHost,"/customers/custom_fields/"),i=Ji.postParam;i.customFields=JSON.stringify(n),tt.create({headers:Ji.header}).patch(r,i).then(function(t){var e,n={};for(e in t.data.customFields){var r=t.data.customFields[e];n[r.key]=r.value}Mi.callback(n,null,o)}).catch(function(t){Mi.callback(null,t,o)})}}}]),t}()});